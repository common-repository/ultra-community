jQuery(document).ready(function(e){}),window.UltraComm=window.UltraComm||{},jQuery(document).ready(function(n){function r(e){e.preventDefault();var t=n(this),i=t.closest(".mfp-container").length?n.magnificPopup.instance:null,o=t.find("p.uc-notice");o.length&&o.remove(),t.off("submit"),t.find(".uc-ajax-loader").show(),UltraComm.Request.ajaxPostRequest({action:"authenticateUser",isModalLogin:i?1:0},n(this).serialize()).always(function(e){t.one("submit",r),t.find(".uc-ajax-loader").hide(),e.success?e.success&&e.data.userId&&UltraComm.Utils.isInteger(e.data.userId)&&(UltraComm.loggedInUserId=+e.data.userId,UltraComm.ajaxRequestNonce=e.data.ajaxRequestNonce,UltraComm.Request.setRequestNonce(UltraComm.ajaxRequestNonce),e.data.redirectUrl&&(window.location.href=e.data.redirectUrl),i&&"userAddReview"!==i.currItem.el.attr("data-uc-trigger-login")&&i.close(),s(),i&&i.st.mainEl.attr("data-uc-trigger-login")&&i.st.el.trigger("click")):t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-error">'+e.data.message+"</p>")})}function s(){n(".uch").off("click","[data-uc-trigger-login]").on("click","[data-uc-trigger-login]",function(e){"function"==typeof t[n(this).attr("data-uc-trigger-login")]&&t[n(this).attr("data-uc-trigger-login")](e)})}UltraComm.Request.ajaxPostRequest("getLoggedInUserInfo").always(function(e){if(UltraComm.loggedInUserId=0,e.success&&e.data.userId&&UltraComm.Utils.isInteger(e.data.userId))return UltraComm.loggedInUserId=+e.data.userId,UltraComm.ajaxRequestNonce=e.data.ajaxRequestNonce,UltraComm.Request.setRequestNonce(UltraComm.ajaxRequestNonce),void s();UltraComm.loggedInUserId||n("[data-uc-trigger-login]").magnificPopup({midClick:!0,mainClass:"mfp-fade",removalDelay:500,tClose:"",type:"inline",disableOn:function(){return!(UltraComm.Utils.isInteger(UltraComm.loggedInUserId)&&0<UltraComm.loggedInUserId)},callbacks:{beforeOpen:function(){var e=n("#uc-modal-login-popup").find("p.uc-notice");e.length&&e.remove()},open:function(){this.content.find("form").off("submit").one("submit",r)}}}).attr("data-mfp-src","#uc-modal-login-popup")}),UltraComm.Masonry.resizeAllMasonryItems(),autosize(document.querySelectorAll("form.uc-form textarea:not(.wp-editor-area)")),n("form.uc-form select.uc-nice-select").niceSelect().each(function(){var t=function(e){e.siblings("label.uc-floating-label").css({transition:"none",opacity:1})};n(this).children(":selected").length&&t(n(this)),n(this).parent().on("change",this,function(e){n(e.target).val()&&t(n(this))})}),n("form.uc-form .nice-select").on("click",function(){setTimeout(function(){n(this).find(".list").scrollTop(n(this).find(".list .selected").position().top)}.bind(this),100)}),n(".uc-login-form").off("submit").one("submit",r);var t=this;this.changeActivityPostFormat=function(e){UltraComm.Activity.changePostFormat(e)},this.submitNewActivityPost=function(e){UltraComm.Activity.submitNewActivityPost(e)},this.activityFooterActionLike=function(e){UltraComm.Activity.likeActivity(e)},this.activityFooterActionReposts=function(e){UltraComm.Activity.repostActivity(e)},this.activityFooterActionDelete=function(e){UltraComm.Activity.deleteActivity(e)},this.userFollow=function(e){UltraComm.UserRelations.userFollow(e)},this.userUnFollow=function(e){UltraComm.UserRelations.userUnFollow(e)},this.userFriendRequest=function(e){UltraComm.UserRelations.userFriendRequest(e)},this.userUnFriend=function(e){UltraComm.UserRelations.userUnFriend(e)},this.userAcceptFriendship=function(e){UltraComm.UserRelations.manageFriendshipRequest(e,"userAcceptFriendship")},this.userDeclineFriendship=function(e){UltraComm.UserRelations.manageFriendshipRequest(e,"userDeclineFriendship")},this.userManageGroup=function(e){UltraComm.Group.redirectToManageGroup(e)},this.userJoinGroup=function(e){UltraComm.Group.userJoinGroup(e)},this.userLeaveGroup=function(e){UltraComm.Group.userLeaveGroup(e)},this.userAddReview=function(e){UltraComm.UserReviews.addUserReview(e)},this.groupAcceptUserJoinRequest=function(e){UltraComm.Group.manageMembershipRequest(e,"acceptJoinRequest")},this.groupDeclineUserJoinRequest=function(e){UltraComm.Group.manageMembershipRequest(e,"declineJoinRequest")},this.groupBlockUser=function(e){UltraComm.Group.changeUserStatus(e,"blockUser")},this.groupUnBlockUser=function(e){UltraComm.Group.changeUserStatus(e,"unBlockUser")},this.groupDeleteUser=function(e){UltraComm.Group.changeUserStatus(e,"deleteUser")}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery||window.Zepto)}(function(u){var d,o,p,n,h,t,l="Close",c="BeforeClose",f="MarkupParse",m="Open",s="Change",i="mfp",g="."+i,v="mfp-ready",r="mfp-removing",a="mfp-prevent-close",e=function(){},y=!!window.jQuery,b=u(window),w=function(e,t){d.ev.on(i+e+g,t)},x=function(e,t,i,o){var n=document.createElement("div");return n.className="mfp-"+e,i&&(n.innerHTML=i),o?t&&t.appendChild(n):(n=u(n),t&&n.appendTo(t)),n},C=function(e,t){d.ev.triggerHandler(i+e,t),d.st.callbacks&&(e=e.charAt(0).toLowerCase()+e.slice(1),d.st.callbacks[e]&&d.st.callbacks[e].apply(d,u.isArray(t)?t:[t]))},_=function(e){return e===t&&d.currTemplate.closeBtn||(d.currTemplate.closeBtn=u(d.st.closeMarkup.replace("%title%",d.st.tClose)),t=e),d.currTemplate.closeBtn},S=function(){u.magnificPopup.instance||((d=new e).init(),u.magnificPopup.instance=d)};e.prototype={constructor:e,init:function(){var e=navigator.appVersion;d.isLowIE=d.isIE8=document.all&&!document.addEventListener,d.isAndroid=/android/gi.test(e),d.isIOS=/iphone|ipad|ipod/gi.test(e),d.supportsTransition=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1}(),d.probablyMobile=d.isAndroid||d.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),p=u(document),d.popupsCache={}},open:function(e){var t;if(!1===e.isObj){d.items=e.items.toArray(),d.index=0;var i,o=e.items;for(t=0;t<o.length;t++)if((i=o[t]).parsed&&(i=i.el[0]),i===e.el[0]){d.index=t;break}}else d.items=u.isArray(e.items)?e.items:[e.items],d.index=e.index||0;if(!d.isOpen){d.types=[],h="",e.mainEl&&e.mainEl.length?d.ev=e.mainEl.eq(0):d.ev=p,e.key?(d.popupsCache[e.key]||(d.popupsCache[e.key]={}),d.currTemplate=d.popupsCache[e.key]):d.currTemplate={},d.st=u.extend(!0,{},u.magnificPopup.defaults,e),d.fixedContentPos="auto"===d.st.fixedContentPos?!d.probablyMobile:d.st.fixedContentPos,d.st.modal&&(d.st.closeOnContentClick=!1,d.st.closeOnBgClick=!1,d.st.showCloseBtn=!1,d.st.enableEscapeKey=!1),d.bgOverlay||(d.bgOverlay=x("bg").on("click"+g,function(){d.close()}),d.wrap=x("wrap").attr("tabindex",-1).on("click"+g,function(e){d._checkIfClose(e.target)&&d.close()}),d.container=x("container",d.wrap)),d.contentContainer=x("content"),d.st.preloader&&(d.preloader=x("preloader",d.container,d.st.tLoading));var n=u.magnificPopup.modules;for(t=0;t<n.length;t++){var r=n[t];r=r.charAt(0).toUpperCase()+r.slice(1),d["init"+r].call(d)}C("BeforeOpen"),d.st.showCloseBtn&&(d.st.closeBtnInside?(w(f,function(e,t,i,o){i.close_replaceWith=_(o.type)}),h+=" mfp-close-btn-in"):d.wrap.append(_())),d.st.alignTop&&(h+=" mfp-align-top"),d.fixedContentPos?d.wrap.css({overflow:d.st.overflowY,overflowX:"hidden",overflowY:d.st.overflowY}):d.wrap.css({top:b.scrollTop(),position:"absolute"}),(!1===d.st.fixedBgPos||"auto"===d.st.fixedBgPos&&!d.fixedContentPos)&&d.bgOverlay.css({height:p.height(),position:"absolute"}),d.st.enableEscapeKey&&p.on("keyup"+g,function(e){27===e.keyCode&&d.close()}),b.on("resize"+g,function(){d.updateSize()}),d.st.closeOnContentClick||(h+=" mfp-auto-cursor"),h&&d.wrap.addClass(h);var s=d.wH=b.height(),a={};if(d.fixedContentPos&&d._hasScrollBar(s)){var l=d._getScrollbarSize();l&&(a.marginRight=l)}d.fixedContentPos&&(d.isIE7?u("body, html").css("overflow","hidden"):a.overflow="hidden");var c=d.st.mainClass;return d.isIE7&&(c+=" mfp-ie7"),c&&d._addClassToMFP(c),d.updateItemHTML(),C("BuildControls"),u("html").css(a),d.bgOverlay.add(d.wrap).prependTo(d.st.prependTo||u(document.body)),d._lastFocusedEl=document.activeElement,setTimeout(function(){d.content?(d._addClassToMFP(v),d._setFocus()):d.bgOverlay.addClass(v),p.on("focusin"+g,d._onFocusIn)},16),d.isOpen=!0,d.updateSize(s),C(m),e}d.updateItemHTML()},close:function(){d.isOpen&&(C(c),d.isOpen=!1,d.st.removalDelay&&!d.isLowIE&&d.supportsTransition?(d._addClassToMFP(r),setTimeout(function(){d._close()},d.st.removalDelay)):d._close())},_close:function(){C(l);var e=r+" "+v+" ";if(d.bgOverlay.detach(),d.wrap.detach(),d.container.empty(),d.st.mainClass&&(e+=d.st.mainClass+" "),d._removeClassFromMFP(e),d.fixedContentPos){var t={marginRight:""};d.isIE7?u("body, html").css("overflow",""):t.overflow="",u("html").css(t)}p.off("keyup.mfp focusin"+g),d.ev.off(g),d.wrap.attr("class","mfp-wrap").removeAttr("style"),d.bgOverlay.attr("class","mfp-bg"),d.container.attr("class","mfp-container"),!d.st.showCloseBtn||d.st.closeBtnInside&&!0!==d.currTemplate[d.currItem.type]||d.currTemplate.closeBtn&&d.currTemplate.closeBtn.detach(),d.st.autoFocusLast&&d._lastFocusedEl&&u(d._lastFocusedEl).focus(),d.currItem=null,d.content=null,d.currTemplate=null,d.prevHeight=0,C("AfterClose")},updateSize:function(e){if(d.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*t;d.wrap.css("height",i),d.wH=i}else d.wH=e||b.height();d.fixedContentPos||d.wrap.css("height",d.wH),C("Resize")},updateItemHTML:function(){var e=d.items[d.index];d.contentContainer.detach(),d.content&&d.content.detach(),e.parsed||(e=d.parseEl(d.index));var t=e.type;if(C("BeforeChange",[d.currItem?d.currItem.type:"",t]),d.currItem=e,!d.currTemplate[t]){var i=!!d.st[t]&&d.st[t].markup;C("FirstMarkupParse",i),d.currTemplate[t]=!i||u(i)}n&&n!==e.type&&d.container.removeClass("mfp-"+n+"-holder");var o=d["get"+t.charAt(0).toUpperCase()+t.slice(1)](e,d.currTemplate[t]);d.appendContent(o,t),e.preloaded=!0,C(s,e),n=e.type,d.container.prepend(d.contentContainer),C("AfterChange")},appendContent:function(e,t){(d.content=e)?d.st.showCloseBtn&&d.st.closeBtnInside&&!0===d.currTemplate[t]?d.content.find(".mfp-close").length||d.content.append(_()):d.content=e:d.content="",C("BeforeAppend"),d.container.addClass("mfp-"+t+"-holder"),d.contentContainer.append(d.content)},parseEl:function(e){var t,i=d.items[e];if(i.tagName?i={el:u(i)}:(t=i.type,i={data:i,src:i.src}),i.el){for(var o=d.types,n=0;n<o.length;n++)if(i.el.hasClass("mfp-"+o[n])){t=o[n];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=t||d.st.type||"inline",i.index=e,i.parsed=!0,d.items[e]=i,C("ElementParse",i),d.items[e]},addGroup:function(t,i){var e=function(e){e.mfpEl=this,d._openClick(e,t,i)};i||(i={});var o="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(o).on(o,e)):(i.isObj=!1,i.delegate?t.off(o).on(o,i.delegate,e):(i.items=t).off(o).on(o,e))},_openClick:function(e,t,i){if((void 0!==i.midClick?i.midClick:u.magnificPopup.defaults.midClick)||!(2===e.which||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)){var o=void 0!==i.disableOn?i.disableOn:u.magnificPopup.defaults.disableOn;if(o)if(u.isFunction(o)){if(!o.call(d))return!0}else if(b.width()<o)return!0;e.type&&(e.preventDefault(),d.isOpen&&e.stopPropagation()),i.el=u(e.mfpEl),i.delegate&&(i.items=t.find(i.delegate)),d.open(i)}},updateStatus:function(e,t){if(d.preloader){o!==e&&d.container.removeClass("mfp-s-"+o),t||"loading"!==e||(t=d.st.tLoading);var i={status:e,text:t};C("UpdateStatus",i),e=i.status,t=i.text,d.preloader.html(t),d.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),d.container.addClass("mfp-s-"+e),o=e}},_checkIfClose:function(e){if(!u(e).hasClass(a)){var t=d.st.closeOnContentClick,i=d.st.closeOnBgClick;if(t&&i)return!0;if(!d.content||u(e).hasClass("mfp-close")||d.preloader&&e===d.preloader[0])return!0;if(e===d.content[0]||u.contains(d.content[0],e)){if(t)return!0}else if(i&&u.contains(document,e))return!0;return!1}},_addClassToMFP:function(e){d.bgOverlay.addClass(e),d.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),d.wrap.removeClass(e)},_hasScrollBar:function(e){return(d.isIE7?p.height():document.body.scrollHeight)>(e||b.height())},_setFocus:function(){(d.st.focus?d.content.find(d.st.focus).eq(0):d.wrap).focus()},_onFocusIn:function(e){if(e.target!==d.wrap[0]&&!u.contains(d.wrap[0],e.target))return d._setFocus(),!1},_parseMarkup:function(n,e,t){var r;t.data&&(e=u.extend(t.data,e)),C(f,[n,e,t]),u.each(e,function(e,t){if(void 0===t||!1===t)return!0;if(1<(r=e.split("_")).length){var i=n.find(g+"-"+r[0]);if(0<i.length){var o=r[1];"replaceWith"===o?i[0]!==t[0]&&i.replaceWith(t):"img"===o?i.is("img")?i.attr("src",t):i.replaceWith(u("<img>").attr("src",t).attr("class",i.attr("class"))):i.attr(r[1],t)}}else n.find(g+"-"+e).html(t)})},_getScrollbarSize:function(){if(void 0===d.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),d.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return d.scrollbarSize}},u.magnificPopup={instance:null,proto:e.prototype,modules:[],open:function(e,t){return S(),(e=e?u.extend(!0,{},e):{}).isObj=!0,e.index=t||0,this.instance.open(e)},close:function(){return u.magnificPopup.instance&&u.magnificPopup.instance.close()},registerModule:function(e,t){t.options&&(u.magnificPopup.defaults[e]=t.options),u.extend(this.proto,t.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},u.fn.magnificPopup=function(e){S();var t=u(this);if("string"==typeof e)if("open"===e){var i,o=y?t.data("magnificPopup"):t[0].magnificPopup,n=parseInt(arguments[1],10)||0;o.items?i=o.items[n]:(i=t,o.delegate&&(i=i.find(o.delegate)),i=i.eq(n)),d._openClick({mfpEl:i},t,o)}else d.isOpen&&d[e].apply(d,Array.prototype.slice.call(arguments,1));else e=u.extend(!0,{},e),y?t.data("magnificPopup",e):t[0].magnificPopup=e,d.addGroup(t,e);return t};var k,T,E,I="inline",j=function(){E&&(T.after(E.addClass(k)).detach(),E=null)};u.magnificPopup.registerModule(I,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){d.types.push(I),w(l+"."+I,function(){j()})},getInline:function(e,t){if(j(),e.src){var i=d.st.inline,o=u(e.src);if(o.length){var n=o[0].parentNode;n&&n.tagName&&(T||(k=i.hiddenClass,T=x(k),k="mfp-"+k),E=o.after(T).detach().removeClass(k)),d.updateStatus("ready")}else d.updateStatus("error",i.tNotFound),o=u("<div>");return e.inlineElement=o}return d.updateStatus("ready"),d._parseMarkup(t,{},e),t}}});var q,U,$,P="ajax",F=function(){q&&u(document.body).removeClass(q)},D=function(){F(),d.req&&d.req.abort()};u.magnificPopup.registerModule(P,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){d.types.push(P),q=d.st.ajax.cursor,w(l+"."+P,D),w("BeforeChange."+P,D)},getAjax:function(n){q&&u(document.body).addClass(q),d.updateStatus("loading");var e=u.extend({url:n.src,success:function(e,t,i){var o={data:e,xhr:i};C("ParseAjax",o),d.appendContent(u(o.data),P),n.finished=!0,F(),d._setFocus(),setTimeout(function(){d.wrap.addClass(v)},16),d.updateStatus("ready"),C("AjaxContentAdded")},error:function(){F(),n.finished=n.loadError=!0,d.updateStatus("error",d.st.ajax.tError.replace("%url%",n.src))}},d.st.ajax.settings);return d.req=u.ajax(e),""}}}),u.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=d.st.image,t=".image";d.types.push("image"),w(m+t,function(){"image"===d.currItem.type&&e.cursor&&u(document.body).addClass(e.cursor)}),w(l+t,function(){e.cursor&&u(document.body).removeClass(e.cursor),b.off("resize"+g)}),w("Resize"+t,d.resizeImage),d.isLowIE&&w("AfterChange",d.resizeImage)},resizeImage:function(){var e=d.currItem;if(e&&e.img&&d.st.image.verticalFit){var t=0;d.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",d.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,U&&clearInterval(U),e.isCheckingImgSize=!1,C("ImageHasSize",e),e.imgHidden&&(d.content&&d.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(t){var i=0,o=t.img[0],n=function(e){U&&clearInterval(U),U=setInterval(function(){0<o.naturalWidth?d._onImageHasSize(t):(200<i&&clearInterval(U),3==++i?n(10):40===i?n(50):100===i&&n(500))},e)};n(1)},getImage:function(e,t){var i=0,o=function(){e&&(e.img[0].complete?(e.img.off(".mfploader"),e===d.currItem&&(d._onImageHasSize(e),d.updateStatus("ready")),e.hasSize=!0,e.loaded=!0,C("ImageLoadComplete")):++i<200?setTimeout(o,100):n())},n=function(){e&&(e.img.off(".mfploader"),e===d.currItem&&(d._onImageHasSize(e),d.updateStatus("error",r.tError.replace("%url%",e.src))),e.hasSize=!0,e.loaded=!0,e.loadError=!0)},r=d.st.image,s=t.find(".mfp-img");if(s.length){var a=document.createElement("img");a.className="mfp-img",e.el&&e.el.find("img").length&&(a.alt=e.el.find("img").attr("alt")),e.img=u(a).on("load.mfploader",o).on("error.mfploader",n),a.src=e.src,s.is("img")&&(e.img=e.img.clone()),0<(a=e.img[0]).naturalWidth?e.hasSize=!0:a.width||(e.hasSize=!1)}return d._parseMarkup(t,{title:function(e){if(e.data&&void 0!==e.data.title)return e.data.title;var t=d.st.image.titleSrc;if(t){if(u.isFunction(t))return t.call(d,e);if(e.el)return e.el.attr(t)||""}return""}(e),img_replaceWith:e.img},e),d.resizeImage(),e.hasSize?(U&&clearInterval(U),e.loadError?(t.addClass("mfp-loading"),d.updateStatus("error",r.tError.replace("%url%",e.src))):(t.removeClass("mfp-loading"),d.updateStatus("ready"))):(d.updateStatus("loading"),e.loading=!0,e.hasSize||(e.imgHidden=!0,t.addClass("mfp-loading"),d.findImageSize(e))),t}}}),u.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,r=d.st.zoom,t=".zoom";if(r.enabled&&d.supportsTransition){var i,o,n=r.duration,s=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+r.duration/1e3+"s "+r.easing,o={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},n="transition";return o["-webkit-"+n]=o["-moz-"+n]=o["-o-"+n]=o[n]=i,t.css(o),t},a=function(){d.content.css("visibility","visible")};w("BuildControls"+t,function(){if(d._allowZoom()){if(clearTimeout(i),d.content.css("visibility","hidden"),!(e=d._getItemToZoom()))return void a();(o=s(e)).css(d._getOffset()),d.wrap.append(o),i=setTimeout(function(){o.css(d._getOffset(!0)),i=setTimeout(function(){a(),setTimeout(function(){o.remove(),e=o=null,C("ZoomAnimationEnded")},16)},n)},16)}}),w(c+t,function(){if(d._allowZoom()){if(clearTimeout(i),d.st.removalDelay=n,!e){if(!(e=d._getItemToZoom()))return;o=s(e)}o.css(d._getOffset(!0)),d.wrap.append(o),d.content.css("visibility","hidden"),setTimeout(function(){o.css(d._getOffset())},16)}}),w(l+t,function(){d._allowZoom()&&(a(),o&&o.remove(),e=null)})}},_allowZoom:function(){return"image"===d.currItem.type},_getItemToZoom:function(){return!!d.currItem.hasSize&&d.currItem.img},_getOffset:function(e){var t,i=(t=e?d.currItem.img:d.st.zoom.opener(d.currItem.el||d.currItem)).offset(),o=parseInt(t.css("padding-top"),10),n=parseInt(t.css("padding-bottom"),10);i.top-=u(window).scrollTop()-o;var r={width:t.width(),height:(y?t.innerHeight():t[0].offsetHeight)-n-o};return void 0===$&&($=void 0!==document.createElement("p").style.MozTransform),$?r["-moz-transform"]=r.transform="translate("+i.left+"px,"+i.top+"px)":(r.left=i.left,r.top=i.top),r}}});var A="iframe",z=function(e){if(d.currTemplate[A]){var t=d.currTemplate[A].find("iframe");t.length&&(e||(t[0].src="//about:blank"),d.isIE8&&t.css("display",e?"block":"none"))}};u.magnificPopup.registerModule(A,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){d.types.push(A),w("BeforeChange",function(e,t,i){t!==i&&(t===A?z():i===A&&z(!0))}),w(l+"."+A,function(){z()})},getIframe:function(e,t){var i=e.src,o=d.st.iframe;u.each(o.patterns,function(){if(-1<i.indexOf(this.index))return this.id&&(i="string"==typeof this.id?i.substr(i.lastIndexOf(this.id)+this.id.length,i.length):this.id.call(this,i)),i=this.src.replace("%id%",i),!1});var n={};return o.srcAction&&(n[o.srcAction]=i),d._parseMarkup(t,n,e),d.updateStatus("ready"),t}}});var R=function(e){var t=d.items.length;return t-1<e?e-t:e<0?t+e:e},O=function(e,t,i){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,i)};u.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var r=d.st.gallery,e=".mfp-gallery";if(d.direction=!0,!r||!r.enabled)return!1;h+=" mfp-gallery",w(m+e,function(){r.navigateByImgClick&&d.wrap.on("click"+e,".mfp-img",function(){if(1<d.items.length)return d.next(),!1}),p.on("keydown"+e,function(e){37===e.keyCode?d.prev():39===e.keyCode&&d.next()})}),w("UpdateStatus"+e,function(e,t){t.text&&(t.text=O(t.text,d.currItem.index,d.items.length))}),w(f+e,function(e,t,i,o){var n=d.items.length;i.counter=1<n?O(r.tCounter,o.index,n):""}),w("BuildControls"+e,function(){if(1<d.items.length&&r.arrows&&!d.arrowLeft){var e=r.arrowMarkup,t=d.arrowLeft=u(e.replace(/%title%/gi,r.tPrev).replace(/%dir%/gi,"left")).addClass(a),i=d.arrowRight=u(e.replace(/%title%/gi,r.tNext).replace(/%dir%/gi,"right")).addClass(a);t.click(function(){d.prev()}),i.click(function(){d.next()}),d.container.append(t.add(i))}}),w(s+e,function(){d._preloadTimeout&&clearTimeout(d._preloadTimeout),d._preloadTimeout=setTimeout(function(){d.preloadNearbyImages(),d._preloadTimeout=null},16)}),w(l+e,function(){p.off(e),d.wrap.off("click"+e),d.arrowRight=d.arrowLeft=null})},next:function(){d.direction=!0,d.index=R(d.index+1),d.updateItemHTML()},prev:function(){d.direction=!1,d.index=R(d.index-1),d.updateItemHTML()},goTo:function(e){d.direction=e>=d.index,d.index=e,d.updateItemHTML()},preloadNearbyImages:function(){var e,t=d.st.gallery.preload,i=Math.min(t[0],d.items.length),o=Math.min(t[1],d.items.length);for(e=1;e<=(d.direction?o:i);e++)d._preloadItem(d.index+e);for(e=1;e<=(d.direction?i:o);e++)d._preloadItem(d.index-e)},_preloadItem:function(e){if(e=R(e),!d.items[e].preloaded){var t=d.items[e];t.parsed||(t=d.parseEl(e)),C("LazyLoad",t),"image"===t.type&&(t.img=u('<img class="mfp-img" />').on("load.mfploader",function(){t.hasSize=!0}).on("error.mfploader",function(){t.hasSize=!0,t.loadError=!0,C("LazyLoadError",t)}).attr("src",t.src)),t.preloaded=!0}}}});var L="retina";u.magnificPopup.registerModule(L,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(1<window.devicePixelRatio){var i=d.st.retina,o=i.ratio;1<(o=isNaN(o)?o():o)&&(w("ImageHasSize."+L,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/o,width:"100%"})}),w("ElementParse."+L,function(e,t){t.src=i.replaceSrc(t,o)}))}}}}),S()}),function(m){"use strict";m.fn.magicSuggest=function(n){var e=m(this);return 1===e.length&&e.data("magicSuggest")?e.data("magicSuggest"):(e.each(function(e){var t=m(this);if(!t.data("magicSuggest")){"select"===this.nodeName.toLowerCase()&&(n.data=[],n.value=[],m.each(this.children,function(e,t){t.nodeName&&"option"===t.nodeName.toLowerCase()&&(n.data.push({id:t.value,name:t.text}),m(t).attr("selected")&&n.value.push(t.value))}));var i={};m.each(this.attributes,function(e,t){i[t.name]="value"===t.name&&""!==t.value?JSON.parse(t.value):t.value});var o=new function(e,t){var l=this,i=m.extend({},t),c=m.extend(!0,{},{allowFreeEntries:!0,allowDuplicates:!1,skipFilterData:!1,ajaxConfig:{},autoSelect:!0,selectFirst:!1,queryParam:"query",beforeSend:function(){},cls:"",data:null,dataUrlParams:{},disabled:!1,disabledField:null,displayField:"name",editable:!0,expanded:!1,expandOnFocus:!1,groupBy:null,hideTrigger:!1,highlight:!0,id:null,infoMsgCls:"",inputCfg:{},invalidCls:"ms-inv",matchCase:!1,maxDropHeight:290,maxEntryLength:null,maxEntryRenderer:function(e){return"Please reduce your entry by "+e+" character"+(1<e?"s":"")},maxSuggestions:null,maxSelection:10,maxSelectionRenderer:function(e){return"You cannot choose more than "+e+" item"+(1<e?"s":"")},method:"POST",minChars:0,minCharsRenderer:function(e){return"Please type "+e+" more character"+(1<e?"s":"")},mode:"local",name:null,noSuggestionText:"No suggestions",placeholder:"Type or click here",renderer:null,required:!1,resultAsString:!1,resultAsStringDelimiter:",",resultsField:"results",selectionCls:"",selectionContainer:null,selectionPosition:"inner",selectionRenderer:null,selectionStacked:!1,sortDir:"asc",sortOrder:null,strictSuggest:!1,style:"",toggleOnClick:!1,typeDelay:400,useTabKey:!1,useCommaKey:!0,useZebraStyle:!1,value:null,valueField:"id",vregex:null,vtype:null},i);this.addToSelection=function(e,t){if(!c.maxSelection||u.length<c.maxSelection){m.isArray(e)||(e=[e]);var i=!1;m.each(e,function(e,t){(c.allowDuplicates||-1===m.inArray(t[c.valueField],l.getValue()))&&(u.push(t),i=!0)}),!0===i&&(h._renderSelection(),this.empty(),!0!==t&&m(this).trigger("selectionchange",[this,this.getSelection()]))}this.input.attr("placeholder","inner"===c.selectionPosition&&0<this.getValue().length?"":c.placeholder)},this.clear=function(e){this.removeFromSelection(u.slice(0),e)},this.collapse=function(){!0===c.expanded&&(this.combobox.detach(),c.expanded=!1,m(this).trigger("collapse",[this]))},this.disable=function(){this.container.addClass("ms-ctn-disabled"),c.disabled=!0,l.input.attr("disabled",!0)},this.empty=function(){this.input.val("")},this.enable=function(){this.container.removeClass("ms-ctn-disabled"),c.disabled=!1,l.input.attr("disabled",!1)},this.expand=function(){!c.expanded&&(this.input.val().length>=c.minChars||0<this.combobox.children().length)&&(this.combobox.empty(),this.combobox.height("1px"),this.combobox.appendTo(this.container),h._processSuggestions(),c.expanded=!0,m(this).trigger("expand",[this]))},this.isDisabled=function(){return c.disabled},this.isValid=function(){var i=!1===c.required||0<u.length;return(c.vtype||c.vregex)&&m.each(u,function(e,t){i=i&&h._validateSingleItem(t[c.valueField])}),i},this.getDataUrlParams=function(){return c.dataUrlParams},this.getName=function(){return c.name},this.getSelection=function(){return u},this.getRawValue=function(){return l.input.val()},this.getValue=function(){return m.map(u,function(e){return e[c.valueField]})},this.removeFromSelection=function(e,t){m.isArray(e)||(e=[e]);var o=!1;m.each(e,function(e,t){var i=m.inArray(t[c.valueField],l.getValue());-1<i&&(u.splice(i,1),o=!0)}),!0===o&&(h._renderSelection(),!0!==t&&m(this).trigger("selectionchange",[this,this.getSelection()]),c.expandOnFocus&&l.expand(),c.expanded&&h._processSuggestions()),this.input.attr("placeholder","inner"===c.selectionPosition&&0<this.getValue().length?"":c.placeholder)},this.getData=function(){return s},this.setData=function(e){c.data=e,h._processSuggestions()},this.setName=function(e){(c.name=e)&&(c.name+=0<e.indexOf("[]")?"":"[]"),l._valueContainer&&m.each(l._valueContainer.children(),function(e,t){t.name=c.name})},this.setSelection=function(e){this.clear(),this.addToSelection(e)},this.setValue=function(e){var n=[];m.each(e,function(e,i){var o=!1;if(m.each(s,function(e,t){if(t[c.valueField]==i)return n.push(t),!(o=!0)}),!o)if("object"==typeof i)n.push(i);else{var t={};t[c.valueField]=i,t[c.displayField]=i,n.push(t)}}),0<n.length&&this.addToSelection(n)},this.setDataUrlParams=function(e){c.dataUrlParams=m.extend({},e)};var r,u=[],d=0,o=!1,a=null,s=[],p=!1,h={_displaySuggestions:function(e){l.combobox.show(),l.combobox.empty();var t=0,i=0;if(null===a)h._renderComboItems(e),t=d*e.length;else{for(var o in a)i+=1,m("<div/>",{class:"ms-res-group",html:o}).appendTo(l.combobox),h._renderComboItems(a[o].items,!0);var n=l.combobox.find(".ms-res-group").outerHeight();if(null!==n){var r=i*n;t=d*e.length+r}else t=d*(e.length+i)}if(t<l.combobox.height()||t<=c.maxDropHeight?l.combobox.height(t):t>=l.combobox.height()&&t>c.maxDropHeight&&l.combobox.height(c.maxDropHeight),1===e.length&&!0===c.autoSelect&&l.combobox.children().filter(":not(.ms-res-item-disabled):last").addClass("ms-res-item-active"),!0===c.selectFirst&&l.combobox.children().filter(":not(.ms-res-item-disabled):first").addClass("ms-res-item-active"),0===e.length&&""!==l.getRawValue()){var s=c.noSuggestionText.replace(/\{\{.*\}\}/,l.input.val());h._updateHelper(s),l.collapse()}!1===c.allowFreeEntries&&(0===e.length?(m(l.input).addClass(c.invalidCls),l.combobox.hide()):m(l.input).removeClass(c.invalidCls))},_getEntriesFromStringArray:function(e){var o=[];return m.each(e,function(e,t){var i={};i[c.displayField]=i[c.valueField]=m.trim(t),o.push(i)}),o},_highlightSuggestion:function(e){var i=l.input.val();if(m.each(["^","$","*","+","?",".","(",")",":","!","|","{","}","[","]"],function(e,t){i=i.replace(t,"\\"+t)}),0===i.length)return e;var t=!0===c.matchCase?"g":"gi";return e.replace(new RegExp("("+i+")(?!([^<]+)?>)",t),"<em>$1</em>")},_moveSelectedRow:function(e){var t,i,o,n;c.expanded||l.expand(),t=l.combobox.find(".ms-res-item:not(.ms-res-item-disabled)"),i="down"===e?t.eq(0):t.filter(":last"),0<(o=l.combobox.find(".ms-res-item-active:not(.ms-res-item-disabled):first")).length&&("down"===e?(0===(i=o.nextAll(".ms-res-item:not(.ms-res-item-disabled)").first()).length&&(i=t.eq(0)),n=l.combobox.scrollTop(),l.combobox.scrollTop(0),i[0].offsetTop+i.outerHeight()>l.combobox.height()&&l.combobox.scrollTop(n+d)):(0===(i=o.prevAll(".ms-res-item:not(.ms-res-item-disabled)").first()).length&&(i=t.filter(":last"),l.combobox.scrollTop(d*t.length)),i[0].offsetTop<l.combobox.scrollTop()&&l.combobox.scrollTop(l.combobox.scrollTop()-d))),t.removeClass("ms-res-item-active"),i.addClass("ms-res-item-active")},_processSuggestions:function(e){var t=null,i=e||c.data;if(null!==i){if("function"==typeof i&&(i=i.call(l,l.getRawValue())),"string"==typeof i){m(l).trigger("beforeload",[l]);var o={};o[c.queryParam]=l.input.val();var n=m.extend(o,c.dataUrlParams);return void m.ajax(m.extend({type:c.method,url:i,data:n,beforeSend:c.beforeSend,success:function(e){t="string"==typeof e?JSON.parse(e):e,h._processSuggestions(t),m(l).trigger("load",[l,t]),h._asyncValues&&(l.setValue("string"==typeof h._asyncValues?JSON.parse(h._asyncValues):h._asyncValues),h._renderSelection(),delete h._asyncValues)},error:function(){throw"Could not reach server"}},c.ajaxConfig))}s=0<i.length&&"string"==typeof i[0]?h._getEntriesFromStringArray(i):i[c.resultsField]||i;var r="remote"===c.mode?s:h._sortAndTrim(s);h._displaySuggestions(h._group(r))}},_render:function(e){if(l.setName(c.name),c.cls+=" uc-grid uc-grid-full uc-grid--flex-cells uc-suggest-holder ",l.container=m("<div/>",{class:"ms-ctn "+(c.resultAsString?"ms-as-string ":"")+c.cls+(!0===c.disabled?" ms-ctn-disabled":"")+(!0===c.editable?"":" ms-ctn-readonly")+(!1===c.hideTrigger?"":" ms-no-trigger"),style:c.style,id:c.id}),l.container.on("focus",m.proxy(f._onFocus,this)),l.container.on("blur",m.proxy(f._onBlur,this)),l.container.on("keydown",m.proxy(f._onKeyDown,this)),l.container.on("keyup",m.proxy(f._onKeyUp,this)),l.input=m("<input/>",m.extend({type:"text",class:!0===c.editable?"uc-grid-cell":" uc-grid-cell ms-input-readonly",readonly:!c.editable,placeholder:c.placeholder,disabled:c.disabled},c.inputCfg)),l.input.on("focus",m.proxy(f._onInputFocus,this)),l.input.on("click",m.proxy(f._onInputClick,this)),l.combobox=m("<div/>",{class:"ms-res-ctn dropdown-menu"}).height(c.maxDropHeight),l.combobox.on("click","div.ms-res-item",m.proxy(f._onComboItemSelected,this)),l.combobox.on("mouseover","div.ms-res-item",m.proxy(f._onComboItemMouseOver,this)),c.selectionContainer?(l.selectionContainer=c.selectionContainer,m(l.selectionContainer).addClass("ms-sel-ctn")):l.selectionContainer=m("<div/>",{class:"ms-sel-ctn uc-grid-cell uc-grid uc-grid-fit uc-grid--flex-cells"}),l.selectionContainer.on("click",m.proxy(f._onFocus,this)),"inner"!==c.selectionPosition||c.selectionContainer?l.container.append(l.input):l.selectionContainer.append(l.input),l.helper=m("<span/>",{class:"ms-helper "+c.infoMsgCls}),h._updateHelper(),l.container.append(l.helper),m(e).replaceWith(l.container),!c.selectionContainer)switch(c.selectionPosition){case"bottom":l.selectionContainer.insertAfter(l.container),!0===c.selectionStacked&&(l.selectionContainer.width(l.container.width()),l.selectionContainer.addClass("ms-stacked"));break;case"right":l.selectionContainer.insertAfter(l.container),l.container.css("float","left");break;default:l.container.append(l.selectionContainer)}!1===c.hideTrigger&&(l.trigger=m("<div/>",{class:"ms-trigger",html:'<div class="ms-trigger-ico"></div>'}),l.trigger.on("click",m.proxy(f._onTriggerClick,this)),l.container.append(l.trigger)),m(window).on("resize",m.proxy(f._onWindowResized,this)),null===c.value&&null===c.data||("string"==typeof c.data?(h._asyncValues=c.value,h._processSuggestions()):(h._processSuggestions(),null!==c.value&&(l.setValue(c.value),h._renderSelection()))),m("body").on("click",function(e){l.container.hasClass("ms-ctn-focus")&&0===l.container.has(e.target).length&&e.target.className.indexOf("ms-res-item")<0&&e.target.className.indexOf("ms-close-btn")<0&&l.container[0]!==e.target&&f._onBlur()}),!0===c.expanded&&(c.expanded=!1,l.expand())},_renderComboItems:function(e,r){var s=this,a="";m.each(e,function(e,t){var i=null!==c.renderer?c.renderer.call(s,t):t[c.displayField],o=null!==c.disabledField&&!0===t[c.disabledField],n=m("<div/>",{class:"ms-res-item "+(r?"ms-res-item-grouped ":"")+(o?"ms-res-item-disabled ":"")+(e%2==1&&!0===c.useZebraStyle?"ms-res-odd":""),html:!0===c.highlight?h._highlightSuggestion(i):i,"data-json":JSON.stringify(t)});a+=m("<div/>").append(n).html()}),l.combobox.append(a),d=l.combobox.find(".ms-res-item:first").outerHeight()},_renderSelection:function(){var r=this,s=[],a=!0===c.resultAsString&&!o;l.selectionContainer.find(".ms-sel-item").remove(),void 0!==l._valueContainer&&l._valueContainer.remove(),m.each(u,function(e,t){var i,o=null!==c.selectionRenderer?c.selectionRenderer.call(r,t):t[c.displayField],n=h._validateSingleItem(t[c.displayField])?"":" ms-sel-invalid";!0===a?i=m("<div/>",{class:"ms-sel-item uc-grid-cell uc-grid-cell--center uc-grid-cell--autoSize ms-sel-text "+c.selectionCls+n,html:o+(e===u.length-1?"":c.resultAsStringDelimiter)}).data("json",t):(i=m("<div/>",{class:"ms-sel-item uc-grid-cell uc-grid-cell--center uc-grid-cell--autoSize"+c.selectionCls+n,html:o}).data("json",t),!1===c.disabled&&m("<span/>",{class:"ms-close-btn"}).data("json",t).appendTo(i).on("click",m.proxy(f._onTagTriggerClick,r))),s.push(i)}),l.selectionContainer.prepend(s),l._valueContainer=m("<div/>",{style:"display: none;"}),m.each(l.getValue(),function(e,t){m("<input/>",{type:"hidden",name:c.name,value:t}).appendTo(l._valueContainer)}),l._valueContainer.appendTo(l.selectionContainer),"inner"===c.selectionPosition&&c.selectionContainer,u.length===c.maxSelection?h._updateHelper(c.maxSelectionRenderer.call(this,u.length)):l.helper.hide()},_selectItem:function(e){1===c.maxSelection&&(u=[]),l.addToSelection(e.data("json")),e.removeClass("ms-res-item-active"),!1!==c.expandOnFocus&&u.length!==c.maxSelection||l.collapse(),o?o&&(c.expandOnFocus||p)&&(h._processSuggestions(),p&&l.expand()):l.input.trigger("focus")},_sortAndTrim:function(e){var o=l.getRawValue(),n=[],i=[],r=l.getValue();return 0<o.length&&!c.skipFilterData?m.each(e,function(e,t){var i=t[c.displayField];(!0===c.matchCase&&-1<i.indexOf(o)||!1===c.matchCase&&-1<i.toLowerCase().indexOf(o.toLowerCase()))&&(!1!==c.strictSuggest&&0!==i.toLowerCase().indexOf(o.toLowerCase())||n.push(t))}):n=e,m.each(n,function(e,t){(c.allowDuplicates||-1===m.inArray(t[c.valueField],r))&&i.push(t)}),null!==c.sortOrder&&i.sort(function(e,t){return e[c.sortOrder]<t[c.sortOrder]?"asc"===c.sortDir?-1:1:e[c.sortOrder]>t[c.sortOrder]?"asc"===c.sortDir?1:-1:0}),c.maxSuggestions&&0<c.maxSuggestions&&(i=i.slice(0,c.maxSuggestions)),i},_group:function(e){return null!==c.groupBy&&(a={},m.each(e,function(e,t){var i=-1<c.groupBy.indexOf(".")?c.groupBy.split("."):c.groupBy,o=t[c.groupBy];if("string"!=typeof i)for(o=t;0<i.length;)o=o[i.shift()];void 0===a[o]?a[o]={title:o,items:[t]}:a[o].items.push(t)})),e},_updateHelper:function(e){l.helper.html(e),l.helper.is(":visible")||l.helper.fadeIn()},_validateSingleItem:function(e){if(null!==c.vregex&&c.vregex instanceof RegExp)return c.vregex.test(e);if(null!==c.vtype)switch(c.vtype){case"alpha":return/^[a-zA-Z_]+$/.test(e);case"alphanum":return/^[a-zA-Z0-9_]+$/.test(e);case"email":return/^(\w+)([\-+.][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/.test(e);case"url":return/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i.test(e);case"ipaddress":return/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e)}return!0}},f={_onBlur:function(){if(l.container.removeClass("ms-ctn-focus"),l.collapse(),o=!1,""!==l.getRawValue()&&!0===c.allowFreeEntries){var e={};e[c.displayField]=e[c.valueField]=m.trim(l.getRawValue()),l.addToSelection(e)}h._renderSelection(),!1===l.isValid()?l.container.addClass(c.invalidCls):""!==l.input.val()&&!1===c.allowFreeEntries&&(l.empty(),h._updateHelper("")),m(l).trigger("blur",[l])},_onComboItemMouseOver:function(e){var t=m(e.currentTarget);t.hasClass("ms-res-item-disabled")||(l.combobox.children().removeClass("ms-res-item-active"),t.addClass("ms-res-item-active"))},_onComboItemSelected:function(e){m(e.currentTarget).hasClass("ms-res-item-disabled")||h._selectItem(m(e.currentTarget))},_onFocus:function(){l.input.trigger("focus")},_onInputClick:function(){!1===l.isDisabled()&&o&&!0===c.toggleOnClick&&(c.expanded?l.collapse():l.expand())},_onInputFocus:function(){if(!1===l.isDisabled()&&!o){o=!0,l.container.addClass("ms-ctn-focus"),l.container.removeClass(c.invalidCls);var e=l.getRawValue().length;!0===c.expandOnFocus&&l.expand(),u.length===c.maxSelection?h._updateHelper(c.maxSelectionRenderer.call(this,u.length)):e<c.minChars&&h._updateHelper(c.minCharsRenderer.call(this,c.minChars-e)),h._renderSelection(),m(l).trigger("focus",[l])}},_onKeyDown:function(e){var t=l.combobox.find(".ms-res-item-active:not(.ms-res-item-disabled):first"),i=l.input.val();if(m(l).trigger("keydown",[l,e]),9!==e.keyCode||!1!==c.useTabKey&&(!0!==c.useTabKey||0!==t.length||0!==l.input.val().length))switch(e.keyCode){case 8:0===i.length&&0<l.getSelection().length&&"inner"===c.selectionPosition&&(u.pop(),h._renderSelection(),m(l).trigger("selectionchange",[l,l.getSelection()]),l.input.attr("placeholder","inner"===c.selectionPosition&&0<l.getValue().length?"":c.placeholder),l.input.trigger("focus"),e.preventDefault());break;case 9:case 27:e.preventDefault();break;case 13:(""!==i||c.expanded)&&e.preventDefault();break;case 188:!0===c.useCommaKey&&e.preventDefault();break;case 17:p=!0;break;case 40:e.preventDefault(),h._moveSelectedRow("down");break;case 38:e.preventDefault(),h._moveSelectedRow("up");break;default:u.length===c.maxSelection&&e.preventDefault()}else f._onBlur()},_onKeyUp:function(e){var t,i=l.getRawValue(),o=0<m.trim(l.input.val()).length&&(!c.maxEntryLength||m.trim(l.input.val()).length<=c.maxEntryLength),n={};if(m(l).trigger("keyup",[l,e]),clearTimeout(r),27===e.keyCode&&c.expanded&&l.combobox.hide(),9===e.keyCode&&!1===c.useTabKey||13<e.keyCode&&e.keyCode<32)17===e.keyCode&&(p=!1);else switch(e.keyCode){case 38:case 40:e.preventDefault();break;case 13:case 9:case 188:if(188!==e.keyCode||!0===c.useCommaKey){if(e.preventDefault(),!0===c.expanded&&0<(t=l.combobox.find(".ms-res-item-active:not(.ms-res-item-disabled):first")).length)return void h._selectItem(t);!0===o&&!0===c.allowFreeEntries&&(n[c.displayField]=n[c.valueField]=m.trim(i),l.addToSelection(n),l.collapse(),l.input.trigger("focus"));break}default:u.length===c.maxSelection?h._updateHelper(c.maxSelectionRenderer.call(this,u.length)):i.length<c.minChars?(h._updateHelper(c.minCharsRenderer.call(this,c.minChars-i.length)),!0===c.expanded&&l.collapse()):c.maxEntryLength&&i.length>c.maxEntryLength?(h._updateHelper(c.maxEntryRenderer.call(this,i.length-c.maxEntryLength)),!0===c.expanded&&l.collapse()):(l.helper.hide(),c.minChars<=i.length&&(r=setTimeout(function(){!0===c.expanded?h._processSuggestions():l.expand()},c.typeDelay)))}},_onTagTriggerClick:function(e){l.removeFromSelection(m(e.currentTarget).data("json"))},_onTriggerClick:function(){if(!1===l.isDisabled()&&(!0!==c.expandOnFocus||u.length!==c.maxSelection))if(m(l).trigger("triggerclick",[l]),!0===c.expanded)l.collapse();else{var e=l.getRawValue().length;e>=c.minChars?(l.input.trigger("focus"),l.expand()):h._updateHelper(c.minCharsRenderer.call(this,c.minChars-e))}},_onWindowResized:function(){h._renderSelection()}};null!==e&&h._render(e)}(this,m.extend([],m.fn.magicSuggest.defaults,n,i));t.data("magicSuggest",o),o.container.data("magicSuggest",o)}}),1===e.length?e.data("magicSuggest"):e)},m.fn.magicSuggest.defaults={}}(jQuery),function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var i={exports:{}};t(i,i.exports),e.autosize=i.exports}}(this,function(e,t){"use strict";function i(e){var t=u.get(e);t&&t.destroy()}function o(e){var t=u.get(e);t&&t.update()}var n,r,u="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return-1<n.indexOf(e)},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r.splice(t,1))}}),d=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){d=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}var s=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((s=function(e){return e}).destroy=function(e){return e},s.update=function(e){return e}):((s=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(n){function r(e){var t=n.style.width;n.style.width="0px",n.offsetWidth,n.style.width=t,n.style.overflowY=e}function s(){if(0!==n.scrollHeight){var e=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(n),t=document.documentElement&&document.documentElement.scrollTop;n.style.height="",n.style.height=n.scrollHeight+i+"px",o=n.clientWidth,e.forEach(function(e){e.node.scrollTop=e.scrollTop}),t&&(document.documentElement.scrollTop=t)}}function e(){s();var e=Math.round(parseFloat(n.style.height)),t=window.getComputedStyle(n,null),i="content-box"===t.boxSizing?Math.round(parseFloat(t.height)):n.offsetHeight;if(i<e?"hidden"===t.overflowY&&(r("scroll"),s(),i="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(n,null).height)):n.offsetHeight):"hidden"!==t.overflowY&&(r("hidden"),s(),i="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(n,null).height)):n.offsetHeight),a!==i){a=i;var o=d("autosize:resized");try{n.dispatchEvent(o)}catch(e){}}}if(n&&n.nodeName&&"TEXTAREA"===n.nodeName&&!u.has(n)){var t,i=null,o=null,a=null,l=function(){n.clientWidth!==o&&e()},c=function(t){window.removeEventListener("resize",l,!1),n.removeEventListener("input",e,!1),n.removeEventListener("keyup",e,!1),n.removeEventListener("autosize:destroy",c,!1),n.removeEventListener("autosize:update",e,!1),Object.keys(t).forEach(function(e){n.style[e]=t[e]}),u.delete(n)}.bind(n,{height:n.style.height,resize:n.style.resize,overflowY:n.style.overflowY,overflowX:n.style.overflowX,wordWrap:n.style.wordWrap});n.addEventListener("autosize:destroy",c,!1),"onpropertychange"in n&&"oninput"in n&&n.addEventListener("keyup",e,!1),window.addEventListener("resize",l,!1),n.addEventListener("input",e,!1),n.addEventListener("autosize:update",e,!1),n.style.overflowX="hidden",n.style.wordWrap="break-word",u.set(n,{destroy:c,update:e}),"vertical"===(t=window.getComputedStyle(n,null)).resize?n.style.resize="none":"both"===t.resize&&(n.style.resize="horizontal"),i="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(i)&&(i=0),e()}}(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},s.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],o),e}),t.default=s,e.exports=t.default}),function(t,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("jquery")):t.jQueryBridget=i(t,t.jQuery)}(window,function(e,t){"use strict";function i(c,n,u){(u=u||t||e.jQuery)&&(n.prototype.option||(n.prototype.option=function(e){u.isPlainObject(e)&&(this.options=u.extend(!0,this.options,e))}),u.fn[c]=function(e){if("string"==typeof e){var t=d.call(arguments,1);return s=t,l="$()."+c+'("'+(r=e)+'")',this.each(function(e,t){var i=u.data(t,c);if(i){var o=i[r];if(o&&"_"!=r.charAt(0)){var n=o.apply(i,s);a=void 0===a?n:a}else p(l+" is not a valid method")}else p(c+" not initialized. Cannot call methods, i.e. "+l)}),void 0!==a?a:this}var r,s,a,l,o;return o=e,this.each(function(e,t){var i=u.data(t,c);i?(i.option(o),i._init()):(i=new n(t,o),u.data(t,c,i))}),this},o(u))}function o(e){!e||e&&e.bridget||(e.bridget=i)}var d=Array.prototype.slice,n=e.console,p=void 0===n?function(){}:function(e){n.error(e)};return o(t||e.jQuery),i}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},o=i[e]=i[e]||[];return-1==o.indexOf(t)&&o.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{};return(i[e]=i[e]||{})[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var o=i.indexOf(t);return-1!=o&&i.splice(o,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var o=this._onceEvents&&this._onceEvents[e],n=0;n<i.length;n++){var r=i[n];o&&o[r]&&(this.off(e,r),delete o[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var i=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0;i<t.length;i++){var o=t[i]+"MatchesSelector";if(e[o])return o}}();return function(e,t){return e[i](t)}}),function(t,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("desandro-matches-selector")):t.fizzyUIUtils=i(t,t.matchesSelector)}(window,function(c,r){var u={extend:function(e,t){for(var i in t)e[i]=t[i];return e},modulo:function(e,t){return(e%t+t)%t},makeArray:function(e){var t=[];if(Array.isArray(e))t=e;else if(e&&"object"==typeof e&&"number"==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t},removeFrom:function(e,t){var i=e.indexOf(t);-1!=i&&e.splice(i,1)},getParent:function(e,t){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,r(e,t))return e},getQueryElement:function(e){return"string"==typeof e?document.querySelector(e):e},handleEvent:function(e){var t="on"+e.type;this[t]&&this[t](e)},filterFindElements:function(e,o){e=u.makeArray(e);var n=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(o){r(e,o)&&n.push(e);for(var t=e.querySelectorAll(o),i=0;i<t.length;i++)n.push(t[i])}else n.push(e)}),n},debounceMethod:function(e,t,o){var n=e.prototype[t],r=t+"Timeout";e.prototype[t]=function(){var e=this[r];e&&clearTimeout(e);var t=arguments,i=this;this[r]=setTimeout(function(){n.apply(i,t),delete i[r]},o||100)}},docReady:function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},toDashed:function(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()}},d=c.console;return u.htmlInit=function(a,l){u.docReady(function(){var e=u.toDashed(l),n="data-"+e,t=document.querySelectorAll("["+n+"]"),i=document.querySelectorAll(".js-"+e),o=u.makeArray(t).concat(u.makeArray(i)),r=n+"-options",s=c.jQuery;o.forEach(function(e){var t,i=e.getAttribute(n)||e.getAttribute(r);try{t=i&&JSON.parse(i)}catch(t){return void(d&&d.error("Error parsing "+n+" on "+e.className+": "+t))}var o=new a(e,t);s&&s.data(e,l,o)})})},u}),function(i,o){"function"==typeof define&&define.amd?define("infinite-scroll/js/core",["ev-emitter/ev-emitter","fizzy-ui-utils/utils"],function(e,t){return o(i,e,t)}):"object"==typeof module&&module.exports?module.exports=o(i,require("ev-emitter"),require("fizzy-ui-utils")):i.InfiniteScroll=o(i,i.EvEmitter,i.fizzyUIUtils)}(window,function(t,e,n){function r(e,t){var i=n.getQueryElement(e);if(i){if((e=i).infiniteScrollGUID){var o=a[e.infiniteScrollGUID];return o.option(t),o}this.element=e,this.options=n.extend({},r.defaults),this.option(t),s&&(this.$element=s(this.element)),this.create()}else console.error("Bad element for InfiniteScroll: "+(i||e))}var s=t.jQuery,a={};r.defaults={},r.create={},r.destroy={};var i=r.prototype;n.extend(i,e.prototype);var o=0;i.create=function(){var e=this.guid=++o;if(this.element.infiniteScrollGUID=e,(a[e]=this).pageIndex=1,this.loadCount=0,this.updateGetPath(),this.getPath)for(var t in this.updateGetAbsolutePath(),this.log("initialized",[this.element.className]),this.callOnInit(),r.create)r.create[t].call(this);else console.error("Disabling InfiniteScroll")},i.option=function(e){n.extend(this.options,e)},i.callOnInit=function(){var e=this.options.onInit;e&&e.call(this,this)},i.dispatchEvent=function(e,t,i){this.log(e,i);var o=t?[t].concat(i):i;if(this.emitEvent(e,o),s&&this.$element){var n=e+=".infiniteScroll";if(t){var r=s.Event(t);r.type=e,n=r}this.$element.trigger(n,i)}};var l={initialized:function(e){return"on "+e},request:function(e){return"URL: "+e},load:function(e,t){return(e.title||"")+". URL: "+t},error:function(e,t){return e+". URL: "+t},append:function(e,t,i){return i.length+" items. URL: "+t},last:function(e,t){return"URL: "+t},history:function(e,t){return"URL: "+t},pageIndex:function(e,t){return"current page determined to be: "+e+" from "+t}};i.log=function(e,t){if(this.options.debug){var i="[InfiniteScroll] "+e,o=l[e];o&&(i+=". "+o.apply(this,t)),console.log(i)}},i.updateMeasurements=function(){this.windowHeight=t.innerHeight;var e=this.element.getBoundingClientRect();this.top=e.top+t.pageYOffset},i.updateScroller=function(){var e=this.options.elementScroll;if(e){if(this.scroller=!0===e?this.element:n.getQueryElement(e),!this.scroller)throw"Unable to find elementScroll: "+e}else this.scroller=t},i.updateGetPath=function(){var e=this.options.path;if(e){var t=typeof e;"function"!=t?"string"==t&&e.match("{{#}}")?this.updateGetPathTemplate(e):this.updateGetPathSelector(e):this.getPath=e}else console.error("InfiniteScroll path option required. Set as: "+e)},i.updateGetPathTemplate=function(t){this.getPath=function(){var e=this.pageIndex+1;return t.replace("{{#}}",e)}.bind(this);var e=t.replace("{{#}}","(\\d\\d?\\d?)"),i=new RegExp(e),o=location.href.match(i);o&&(this.pageIndex=parseInt(o[1],10),this.log("pageIndex",this.pageIndex,"template string"))};var c=[/^(.*?\/?page\/?)(\d\d?\d?)(.*?$)/,/^(.*?\/?\?page=)(\d\d?\d?)(.*?$)/,/(.*?)(\d\d?\d?)(?!.*\d)(.*?$)/];return i.updateGetPathSelector=function(e){var t=document.querySelector(e);if(t){for(var i,o,n=t.getAttribute("href"),r=0;n&&r<c.length;r++){o=c[r];var s=n.match(o);if(s){i=s.slice(1);break}}i?(this.isPathSelector=!0,this.getPath=function(){var e=this.pageIndex+1;return i[0]+e+i[2]}.bind(this),this.pageIndex=parseInt(i[1],10)-1,this.log("pageIndex",[this.pageIndex,"next link"])):console.error("InfiniteScroll unable to parse next link href: "+n)}else console.error("Bad InfiniteScroll path option. Next link not found: "+e)},i.updateGetAbsolutePath=function(){var e=this.getPath();if(e.match(/^http/)||e.match(/^\//))this.getAbsolutePath=this.getPath;else{var t=location.pathname,i=t.substring(0,t.lastIndexOf("/"));this.getAbsolutePath=function(){return i+"/"+this.getPath()}}},r.create.hideNav=function(){var e=n.getQueryElement(this.options.hideNav);e&&(e.style.display="none",this.nav=e)},r.destroy.hideNav=function(){this.nav&&(this.nav.style.display="")},i.destroy=function(){for(var e in this.allOff(),r.destroy)r.destroy[e].call(this);delete this.element.infiniteScrollGUID,delete a[this.guid]},r.throttle=function(o,n){var r,s;return n=n||200,function(){var e=+new Date,t=arguments,i=function(){r=e,o.apply(this,t)}.bind(this);r&&e<r+n?(clearTimeout(s),s=setTimeout(i,n)):i()}},r.data=function(e){var t=(e=n.getQueryElement(e))&&e.infiniteScrollGUID;return t&&a[t]},r.setJQuery=function(e){s=e},n.htmlInit(r,"infinite-scroll"),s&&s.bridget&&s.bridget("infiniteScroll",r),r}),function(t,i){"function"==typeof define&&define.amd?define("infinite-scroll/js/page-load",["./core"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("./core")):i(t,t.InfiniteScroll)}(window,function(o,n){function a(e){for(var t=document.createDocumentFragment(),i=0;e&&i<e.length;i++)t.appendChild(e[i]);return t}function l(e,t){for(var i=e.attributes,o=0;o<i.length;o++){var n=i[o];t.setAttribute(n.name,n.value)}}var e=n.prototype;return n.defaults.loadOnScroll=!0,n.defaults.checkLastPage=!0,n.defaults.responseType="document",n.create.pageLoad=function(){this.canLoad=!0,this.on("scrollThreshold",this.onScrollThresholdLoad),this.on("load",this.checkLastPage),this.options.outlayer&&this.on("append",this.onAppendOutlayer)},e.onScrollThresholdLoad=function(){this.options.loadOnScroll&&this.loadNextPage()},e.loadNextPage=function(){if(!this.isLoading&&this.canLoad){var t=this.getAbsolutePath();this.isLoading=!0;var i,e,o,n,r,s=function(e){this.onPageLoad(e,t)}.bind(this),a=function(e){this.onPageError(e,t)}.bind(this);i=t,e=this.options.responseType,o=s,n=a,(r=new XMLHttpRequest).open("POST",i.split("?")[0],!0),r.responseType=e||"",r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Accept","application/json, text/javascript, */*; q=0.01"),r.onload=function(){if(200==r.status)o(r.response);else{var e=new Error(r.statusText);n(e)}},r.onerror=function(){var e=new Error("Network error requesting "+i);n(e)},r.send(i.split("?")[1]),this.dispatchEvent("request",null,[t])}},e.onPageLoad=function(e,t){return this.options.append||(this.isLoading=!1),this.pageIndex++,this.loadCount++,this.dispatchEvent("load",null,[e,t]),this.appendNextPage(e,t),e},e.appendNextPage=function(e,t){var i=this.options.append;if("document"==this.options.responseType&&i){var o=e.querySelectorAll(i),n=a(o),r=function(){this.appendItems(o,n),this.isLoading=!1,this.dispatchEvent("append",null,[e,t,o])}.bind(this);this.options.outlayer?this.appendOutlayerItems(n,r):r()}},e.appendItems=function(r,s){r&&r.length&&(function(e){for(var t=(s=s||a(r)).querySelectorAll("script"),i=0;i<t.length;i++){var o=t[i],n=document.createElement("script");l(o,n),o.parentNode.replaceChild(n,o)}}(),this.element.appendChild(s))},e.appendOutlayerItems=function(e,t){var i=n.imagesLoaded||o.imagesLoaded;if(!i)return console.error("[InfiniteScroll] imagesLoaded required for outlayer option"),void(this.isLoading=!1);i(e,t)},e.onAppendOutlayer=function(e,t,i){this.options.outlayer.appended(i)},e.checkLastPage=function(e,t){var i=this.options.checkLastPage;if(i){var o,n=this.options.path;if("function"==typeof n&&!this.getPath())return void this.lastPageReached(e,t);"string"==typeof i?o=i:this.isPathSelector&&(o=n),o&&e.querySelector&&(e.querySelector(o)||this.lastPageReached(e,t))}},e.lastPageReached=function(e,t){this.canLoad=!1,this.dispatchEvent("last",null,[e,t])},e.onPageError=function(e,t){return this.isLoading=!1,this.canLoad=!1,this.dispatchEvent("error",null,[e,t]),e},n.create.prefill=function(){if(this.options.prefill){var e=this.options.append;e?(this.updateMeasurements(),this.updateScroller(),this.isPrefilling=!0,this.on("append",this.prefill),this.once("error",this.stopPrefill),this.once("last",this.stopPrefill),this.prefill()):console.error("append option required for prefill. Set as :"+e)}},e.prefill=function(){var e=this.getPrefillDistance();this.isPrefilling=0<=e,this.isPrefilling?(this.log("prefill"),this.loadNextPage()):this.stopPrefill()},e.getPrefillDistance=function(){return this.options.elementScroll?this.scroller.clientHeight-this.scroller.scrollHeight:this.windowHeight-this.element.clientHeight},e.stopPrefill=function(){console.log("stopping prefill"),this.off("append",this.prefill)},n}),function(i,o){"function"==typeof define&&define.amd?define("infinite-scroll/js/scroll-watch",["./core","fizzy-ui-utils/utils"],function(e,t){return o(i,e,t)}):"object"==typeof module&&module.exports?module.exports=o(i,require("./core"),require("fizzy-ui-utils")):o(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(i,e,t){var o=e.prototype;return e.defaults.scrollThreshold=400,e.create.scrollWatch=function(){this.pageScrollHandler=this.onPageScroll.bind(this),this.resizeHandler=this.onResize.bind(this);var e=this.options.scrollThreshold;(e||0===e)&&this.enableScrollWatch()},e.destroy.scrollWatch=function(){this.disableScrollWatch()},o.enableScrollWatch=function(){this.isScrollWatching||(this.isScrollWatching=!0,this.updateMeasurements(),this.updateScroller(),this.on("last",this.disableScrollWatch),this.bindScrollWatchEvents(!0))},o.disableScrollWatch=function(){this.isScrollWatching&&(this.bindScrollWatchEvents(!1),delete this.isScrollWatching)},o.bindScrollWatchEvents=function(e){var t=e?"addEventListener":"removeEventListener";this.scroller[t]("scroll",this.pageScrollHandler),i[t]("resize",this.resizeHandler)},o.onPageScroll=e.throttle(function(){this.getBottomDistance()<=this.options.scrollThreshold&&this.dispatchEvent("scrollThreshold")}),o.getBottomDistance=function(){return this.options.elementScroll?this.getElementBottomDistance():this.getWindowBottomDistance()},o.getWindowBottomDistance=function(){return this.top+this.element.clientHeight-(i.pageYOffset+this.windowHeight)},o.getElementBottomDistance=function(){return this.scroller.scrollHeight-(this.scroller.scrollTop+this.scroller.clientHeight)},o.onResize=function(){this.updateMeasurements()},t.debounceMethod(e,"onResize",150),e}),function(i,o){"function"==typeof define&&define.amd?define("infinite-scroll/js/history",["./core","fizzy-ui-utils/utils"],function(e,t){return o(i,e,t)}):"object"==typeof module&&module.exports?module.exports=o(i,require("./core"),require("fizzy-ui-utils")):o(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(o,e,t){var i=e.prototype;e.defaults.history="replace";var r=document.createElement("a");return e.create.history=function(){this.options.history&&(r.href=this.getAbsolutePath(),(r.origin||r.protocol+"//"+r.host)==location.origin?this.options.append?this.createHistoryAppend():this.createHistoryPageLoad():console.error("[InfiniteScroll] cannot set history with different origin: "+r.origin+" on "+location.origin+" . History behavior disabled."))},i.createHistoryAppend=function(){this.updateMeasurements(),this.updateScroller(),this.scrollPages=[{top:0,path:location.href,title:document.title}],this.scrollPageIndex=0,this.scrollHistoryHandler=this.onScrollHistory.bind(this),this.unloadHandler=this.onUnload.bind(this),this.scroller.addEventListener("scroll",this.scrollHistoryHandler),this.on("append",this.onAppendHistory),this.bindHistoryAppendEvents(!0)},i.bindHistoryAppendEvents=function(e){var t=e?"addEventListener":"removeEventListener";this.scroller[t]("scroll",this.scrollHistoryHandler),o[t]("unload",this.unloadHandler)},i.createHistoryPageLoad=function(){this.on("load",this.onPageLoadHistory)},e.destroy.history=i.destroyHistory=function(){this.options.history&&this.options.append&&this.bindHistoryAppendEvents(!1)},i.onAppendHistory=function(e,t,i){var o=i[0],n=this.getElementScrollY(o);r.href=t,this.scrollPages.push({top:n,path:r.href,title:e.title})},i.getElementScrollY=function(e){return this.options.elementScroll?this.getElementElementScrollY(e):this.getElementWindowScrollY(e)},i.getElementWindowScrollY=function(e){return e.getBoundingClientRect().top+o.pageYOffset},i.getElementElementScrollY=function(e){return e.offsetTop-this.top},i.onScrollHistory=function(){for(var e,t,i=this.getScrollViewY(),o=0;o<this.scrollPages.length;o++){var n=this.scrollPages[o];if(n.top>=i)break;e=o,t=n}e!=this.scrollPageIndex&&(this.scrollPageIndex=e,this.setHistory(t.title,t.path))},t.debounceMethod(e,"onScrollHistory",150),i.getScrollViewY=function(){return this.options.elementScroll?this.scroller.scrollTop+this.scroller.clientHeight/2:o.pageYOffset+this.windowHeight/2},i.setHistory=function(e,t){var i=this.options.history;i&&history[i+"State"]&&(history[i+"State"](null,e,t),this.options.historyTitle&&(document.title=e),this.dispatchEvent("history",null,[e,t]))},i.onUnload=function(){var e=this.scrollPageIndex;if(0!==e){var t=this.scrollPages[e],i=o.pageYOffset-t.top+this.top;this.destroyHistory(),scrollTo(0,i)}},i.onPageLoadHistory=function(e,t){this.setHistory(e.title,t)},e}),function(i,o){"function"==typeof define&&define.amd?define("infinite-scroll/js/button",["./core","fizzy-ui-utils/utils"],function(e,t){return o(i,e,t)}):"object"==typeof module&&module.exports?module.exports=o(i,require("./core"),require("fizzy-ui-utils")):o(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(e,t,i){function o(e,t){this.element=e,this.infScroll=t,this.clickHandler=this.onClick.bind(this),this.element.addEventListener("click",this.clickHandler),t.on("request",this.disable.bind(this)),t.on("load",this.enable.bind(this)),t.on("error",this.hide.bind(this)),t.on("last",this.hide.bind(this))}return t.create.button=function(){var e=i.getQueryElement(this.options.button);e&&(this.button=new o(e,this))},t.destroy.button=function(){this.button&&this.button.destroy()},o.prototype.onClick=function(e){e.preventDefault(),this.infScroll.loadNextPage()},o.prototype.enable=function(){this.element.removeAttribute("disabled")},o.prototype.disable=function(){this.element.disabled="disabled"},o.prototype.hide=function(){this.element.style.display="none"},o.prototype.destroy=function(){this.element.removeEventListener("click",this.clickHandler)},t.Button=o,t}),function(i,o){"function"==typeof define&&define.amd?define("infinite-scroll/js/status",["./core","fizzy-ui-utils/utils"],function(e,t){return o(i,e,t)}):"object"==typeof module&&module.exports?module.exports=o(i,require("./core"),require("fizzy-ui-utils")):o(i,i.InfiniteScroll,i.fizzyUIUtils)}(window,function(e,t,i){function o(e){r(e,"none")}function n(e){r(e,"block")}function r(e,t){e&&(e.style.display=t)}var s=t.prototype;return t.create.status=function(){var e=i.getQueryElement(this.options.status);e&&(this.statusElement=e,this.statusEventElements={request:e.querySelector(".infinite-scroll-request"),error:e.querySelector(".infinite-scroll-error"),last:e.querySelector(".infinite-scroll-last")},this.on("request",this.showRequestStatus),this.on("error",this.showErrorStatus),this.on("last",this.showLastStatus),this.bindHideStatus("on"))},s.bindHideStatus=function(e){var t=this.options.append?"append":"load";this[e](t,this.hideAllStatus)},s.showRequestStatus=function(){this.showStatus("request")},s.showErrorStatus=function(){this.showStatus("error")},s.showLastStatus=function(){this.showStatus("last"),this.bindHideStatus("off")},s.showStatus=function(e){n(this.statusElement),this.hideStatusEventElements(),n(this.statusEventElements[e])},s.hideAllStatus=function(){o(this.statusElement),this.hideStatusEventElements()},s.hideStatusEventElements=function(){for(var e in this.statusEventElements)o(this.statusEventElements[e])},t}),function(e,t){"function"==typeof define&&define.amd?define(["infinite-scroll/js/core","infinite-scroll/js/page-load","infinite-scroll/js/scroll-watch","infinite-scroll/js/history","infinite-scroll/js/button","infinite-scroll/js/status"],t):"object"==typeof module&&module.exports&&(module.exports=t(require("./core"),require("./page-load"),require("./scroll-watch"),require("./history"),require("./button"),require("./status")))}(window,function(e){return e}),function(t,i){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.imagesLoaded=i(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function r(e,t){for(var i in t)e[i]=t[i];return e}function s(e,t,i){if(!(this instanceof s))return new s(e,t,i);var o,n=e;"string"==typeof e&&(n=document.querySelectorAll(e)),n?(this.elements=(o=n,Array.isArray(o)?o:"object"==typeof o&&"number"==typeof o.length?c.call(o):[o]),this.options=r({},this.options),"function"==typeof t?i=t:r(this.options,t),i&&this.on("always",i),this.getImages(),a&&(this.jqDeferred=new a.Deferred),setTimeout(this.check.bind(this))):l.error("Bad element for imagesLoaded "+(n||e))}function i(e){this.img=e}function o(e,t){this.url=e,this.element=t,this.img=new Image}var a=t.jQuery,l=t.console,c=Array.prototype.slice;s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),o=0;o<i.length;o++){var n=i[o];this.addImage(n)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(o=0;o<r.length;o++){var s=r[o];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,o=i.exec(t.backgroundImage);null!==o;){var n=o&&o[2];n&&this.addBackground(n,e),o=i.exec(t.backgroundImage)}},s.prototype.addImage=function(e){var t=new i(e);this.images.push(t)},s.prototype.addBackground=function(e,t){var i=new o(e,t);this.images.push(i)},s.prototype.check=function(){function t(e,t,i){setTimeout(function(){o.progress(e,t,i)})}var o=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},s.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+i,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},i.prototype=Object.create(e.prototype),i.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype=Object.create(i.prototype),o.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((a=e).fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(a(this))})},s.makeJQueryPlugin(),s}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(s){"use strict";function v(e){return!e.nodeName||-1!==s.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])}function t(e){return s.isFunction(e)||s.isPlainObject(e)?e:{top:e,left:e}}var y=s.scrollTo=function(e,t,i){return s(window).scrollTo(e,t,i)};return y.defaults={axis:"xy",duration:0,limit:!0},s.fn.scrollTo=function(e,i,m){"object"==typeof i&&(m=i,i=0),"function"==typeof m&&(m={onAfter:m}),"max"===e&&(e=9e9),m=s.extend({},y.defaults,m),i=i||m.duration;var g=m.queue&&1<m.axis.length;return g&&(i/=2),m.offset=t(m.offset),m.over=t(m.over),this.each(function(){function a(e){var t=s.extend({},m,{queue:!0,duration:i,complete:e&&function(){e.call(u,p,m)}});d.animate(h,t)}if(null!==e){var l,c=v(this),u=c?this.contentWindow||window:this,d=s(u),p=e,h={};switch(typeof p){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(p)){p=t(p);break}p=c?s(p):s(p,u);case"object":if(0===p.length)return;(p.is||p.style)&&(l=(p=s(p)).offset())}var f=s.isFunction(m.offset)&&m.offset(u,p)||m.offset;s.each(m.axis.split(""),function(e,t){var i="x"===t?"Left":"Top",o=i.toLowerCase(),n="scroll"+i,r=d[n](),s=y.max(u,t);l?(h[n]=l[o]+(c?0:r-d.offset()[o]),m.margin&&(h[n]-=parseInt(p.css("margin"+i),10)||0,h[n]-=parseInt(p.css("border"+i+"Width"),10)||0),h[n]+=f[o]||0,m.over[o]&&(h[n]+=p["x"===t?"width":"height"]()*m.over[o])):(i=p[o],h[n]=i.slice&&"%"===i.slice(-1)?parseFloat(i)/100*s:i),m.limit&&/^\d+$/.test(h[n])&&(h[n]=h[n]<=0?0:Math.min(h[n],s)),!e&&1<m.axis.length&&(r===h[n]?h={}:g&&(a(m.onAfterFirst),h={}))}),a(m.onAfter)}})},y.max=function(e,t){var i="scroll"+(o="x"===t?"Width":"Height");if(!v(e))return e[i]-s(e)[o.toLowerCase()]();var o="client"+o,n=(r=e.ownerDocument||e.document).documentElement,r=r.body;return Math.max(n[i],r[i])-Math.min(n[o],r[o])},s.Tween.propHooks.scrollLeft=s.Tween.propHooks.scrollTop={get:function(e){return s(e.elem)[e.prop]()},set:function(e){var t=this.get(e);if(e.options.interrupt&&e._last&&e._last!==t)return s(e.elem).stop();var i=Math.round(e.now);t!==i&&(s(e.elem)[e.prop](i),e._last=this.get(e))}},y}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(u){u.ui=u.ui||{},u.ui.version="1.12.1";var n,i=0,a=Array.prototype.slice;u.cleanData=(n=u.cleanData,function(e){var t,i,o;for(o=0;null!=(i=e[o]);o++)try{(t=u._data(i,"events"))&&t.remove&&u(i).triggerHandler("remove")}catch(e){}n(e)}),u.widget=function(e,i,t){var o,n,r,s={},a=e.split(".")[0],l=a+"-"+(e=e.split(".")[1]);return t||(t=i,i=u.Widget),u.isArray(t)&&(t=u.extend.apply(null,[{}].concat(t))),u.expr[":"][l.toLowerCase()]=function(e){return!!u.data(e,l)},u[a]=u[a]||{},o=u[a][e],n=u[a][e]=function(e,t){if(!this._createWidget)return new n(e,t);arguments.length&&this._createWidget(e,t)},u.extend(n,o,{version:t.version,_proto:u.extend({},t),_childConstructors:[]}),(r=new i).options=u.widget.extend({},r.options),u.each(t,function(t,r){u.isFunction(r)?s[t]=function(){function o(){return i.prototype[t].apply(this,arguments)}function n(e){return i.prototype[t].apply(this,e)}return function(){var e,t=this._super,i=this._superApply;return this._super=o,this._superApply=n,e=r.apply(this,arguments),this._super=t,this._superApply=i,e}}():s[t]=r}),n.prototype=u.widget.extend(r,{widgetEventPrefix:o&&r.widgetEventPrefix||e},s,{constructor:n,namespace:a,widgetName:e,widgetFullName:l}),o?(u.each(o._childConstructors,function(e,t){var i=t.prototype;u.widget(i.namespace+"."+i.widgetName,n,t._proto)}),delete o._childConstructors):i._childConstructors.push(n),u.widget.bridge(e,n),n},u.widget.extend=function(e){for(var t,i,o=a.call(arguments,1),n=0,r=o.length;n<r;n++)for(t in o[n])i=o[n][t],o[n].hasOwnProperty(t)&&void 0!==i&&(u.isPlainObject(i)?e[t]=u.isPlainObject(e[t])?u.widget.extend({},e[t],i):u.widget.extend({},i):e[t]=i);return e},u.widget.bridge=function(r,t){var s=t.prototype.widgetFullName||r;u.fn[r]=function(i){var e="string"==typeof i,o=a.call(arguments,1),n=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=u.data(this,s);return"instance"===i?(n=t,!1):t?u.isFunction(t[i])&&"_"!==i.charAt(0)?(e=t[i].apply(t,o))!==t&&void 0!==e?(n=e&&e.jquery?n.pushStack(e.get()):e,!1):void 0:u.error("no such method '"+i+"' for "+r+" widget instance"):u.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+i+"'")}):n=void 0:(o.length&&(i=u.widget.extend.apply(null,[i].concat(o))),this.each(function(){var e=u.data(this,s);e?(e.option(i||{}),e._init&&e._init()):u.data(this,s,new t(i,this))})),n}},u.Widget=function(){},u.Widget._childConstructors=[],u.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=u(t||this.defaultElement||this)[0],this.element=u(t),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=u(),this.hoverable=u(),this.focusable=u(),this.classesElementLookup={},t!==this&&(u.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===t&&this.destroy()}}),this.document=u(t.style?t.ownerDocument:t.document||t),this.window=u(this.document[0].defaultView||this.document[0].parentWindow)),this.options=u.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:u.noop,_create:u.noop,_init:u.noop,destroy:function(){var i=this;this._destroy(),u.each(this.classesElementLookup,function(e,t){i._removeClass(t,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:u.noop,widget:function(){return this.element},option:function(e,t){var i,o,n,r=e;if(0===arguments.length)return u.widget.extend({},this.options);if("string"==typeof e)if(r={},e=(i=e.split(".")).shift(),i.length){for(o=r[e]=u.widget.extend({},this.options[e]),n=0;n<i.length-1;n++)o[i[n]]=o[i[n]]||{},o=o[i[n]];if(e=i.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];r[e]=t}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,i,o;for(t in e)o=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&o&&o.length&&(i=u(o.get()),this._removeClass(o,t),i.addClass(this._classes({element:i,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(n){function e(e,t){var i,o;for(o=0;o<e.length;o++)i=s.classesElementLookup[e[o]]||u(),i=n.add?u(u.unique(i.get().concat(n.element.get()))):u(i.not(n.element).get()),s.classesElementLookup[e[o]]=i,r.push(e[o]),t&&n.classes[e[o]]&&r.push(n.classes[e[o]])}var r=[],s=this;return n=u.extend({element:this.element,classes:this.options.classes||{}},n),this._on(n.element,{remove:"_untrackClassesElement"}),n.keys&&e(n.keys.match(/\S+/g)||[],!0),n.extra&&e(n.extra.match(/\S+/g)||[]),r.join(" ")},_untrackClassesElement:function(i){var o=this;u.each(o.classesElementLookup,function(e,t){-1!==u.inArray(i.target,t)&&(o.classesElementLookup[e]=u(t.not(i.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,o){o="boolean"==typeof o?o:i;var n="string"==typeof e||null===e,r={extra:n?t:i,keys:n?e:t,element:n?this.element:e,add:o};return r.element.toggleClass(this._classes(r),o),this},_on:function(s,a,e){var l,c=this;"boolean"!=typeof s&&(e=a,a=s,s=!1),e?(a=l=u(a),this.bindings=this.bindings.add(a)):(e=a,a=this.element,l=this.widget()),u.each(e,function(e,t){function i(){if(s||!0!==c.options.disabled&&!u(this).hasClass("ui-state-disabled"))return("string"==typeof t?c[t]:t).apply(c,arguments)}"string"!=typeof t&&(i.guid=t.guid=t.guid||i.guid||u.guid++);var o=e.match(/^([\w:-]*)\s*(.*)$/),n=o[1]+c.eventNamespace,r=o[2];r?l.on(n,r,i):a.on(n,i)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t).off(t),this.bindings=u(this.bindings.not(e).get()),this.focusable=u(this.focusable.not(e).get()),this.hoverable=u(this.hoverable.not(e).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(u(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(u(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(u(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(u(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,t,i){var o,n,r=this.options[e];if(i=i||{},(t=u.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],n=t.originalEvent)for(o in n)o in t||(t[o]=n[o]);return this.element.trigger(t,i),!(u.isFunction(r)&&!1===r.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}},u.each({show:"fadeIn",hide:"fadeOut"},function(r,s){u.Widget.prototype["_"+r]=function(t,e,i){var o;"string"==typeof e&&(e={effect:e});var n=e?!0===e||"number"==typeof e?s:e.effect||s:r;"number"==typeof(e=e||{})&&(e={duration:e}),o=!u.isEmptyObject(e),e.complete=i,e.delay&&t.delay(e.delay),o&&u.effects&&u.effects.effect[n]?t[r](e):n!==r&&t[n]?t[n](e.duration,e.easing,i):t.queue(function(e){u(this)[r](),i&&i.call(t[0]),e()})}}),u.widget}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(v){"use strict";function e(i){var o="dragover"===i;return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=e.dataTransfer;t&&-1!==v.inArray("Files",t.types)&&!1!==this._trigger(i,v.Event(i,{delegatedEvent:e}))&&(e.preventDefault(),o&&(t.dropEffect="copy"))}}v.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||v('<input type="file"/>').prop("disabled")),v.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),v.support.xhrFormDataFileUpload=!!window.FormData,v.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),v.widget("blueimp.fileupload",{options:{dropZone:v(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(i,e){return i=this.messages[i]||i.toString(),e&&v.each(e,function(e,t){i=i.replace("{"+e+"}",t)}),i},formData:function(e){return e.serializeArray()},add:function(e,t){if(e.isDefaultPrevented())return!1;(t.autoUpload||!1!==t.autoUpload&&v(this).fileupload("option","autoUpload"))&&t.process().done(function(){t.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:v.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var o=e-this.timestamp;return(!this.bitrate||!i||i<o)&&(this.bitrate=(t-this.loaded)*(1e3/o)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&v.support.xhrFileUpload||v.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;return"function"===v.type(e.formData)?e.formData(e.form):v.isArray(e.formData)?e.formData:"object"===v.type(e.formData)?(i=[],v.each(e.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(e){var i=0;return v.each(e,function(e,t){i+=t.size||1}),i},_initProgressObject:function(e){var t={loaded:0,total:0,bitrate:0};e._progress?v.extend(e._progress,t):e._progress=t},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i,o=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&o-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=o,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(o,i,t.bitrateInterval),this._trigger("progress",v.Event("progress",{delegatedEvent:e}),t),this._trigger("progressall",v.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(i){var o=this,e=i.xhr?i.xhr():v.ajaxSettings.xhr();e.upload&&(v(e.upload).bind("progress",function(e){var t=e.originalEvent;e.lengthComputable=t.lengthComputable,e.loaded=t.loaded,e.total=t.total,o._onProgress(e,i)}),i.xhr=function(){return e})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(i){var o,n=this,e=i.files[0],t=i.multipart||!v.support.xhrFileUpload,r="array"===v.type(i.paramName)?i.paramName[0]:i.paramName;i.headers=v.extend({},i.headers),i.contentRange&&(i.headers["Content-Range"]=i.contentRange),t&&!i.blob&&this._isInstanceOf("File",e)||(i.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.uploadName||e.name)+'"'),t?v.support.xhrFormDataFileUpload&&(i.postMessage?(o=this._getFormData(i),i.blob?o.push({name:r,value:i.blob}):v.each(i.files,function(e,t){o.push({name:"array"===v.type(i.paramName)&&i.paramName[e]||r,value:t})})):(n._isInstanceOf("FormData",i.formData)?o=i.formData:(o=new FormData,v.each(this._getFormData(i),function(e,t){o.append(t.name,t.value)})),i.blob?o.append(r,i.blob,e.uploadName||e.name):v.each(i.files,function(e,t){(n._isInstanceOf("File",t)||n._isInstanceOf("Blob",t))&&o.append("array"===v.type(i.paramName)&&i.paramName[e]||r,t,t.uploadName||t.name)})),i.data=o):(i.contentType=e.type||"application/octet-stream",i.data=i.blob||e),i.blob=null},_initIframeSettings:function(e){var t=v("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&t&&t!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(e){var t=v(e.fileInput),o=e.paramName;return o?v.isArray(o)||(o=[o]):(o=[],t.each(function(){for(var e=v(this),t=e.prop("name")||"files[]",i=(e.prop("files")||[1]).length;i;)o.push(t),i-=1}),o.length||(o=[t.prop("name")||"files[]"])),o},_initFormSettings:function(e){e.form&&e.form.length||(e.form=v(e.fileInput.prop("form")),e.form.length||(e.form=v(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===v.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var t=v.extend({},this.options,e);return this._initFormSettings(t),this._initDataSettings(t),t},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(e,t,i){var o=v.Deferred(),n=o.promise();return t=t||this.options.context||n,!0===e?o.resolveWith(t,i):!1===e&&o.rejectWith(t,i),n.abort=o.promise,this._enhancePromise(n)},_addConvenienceMethods:function(e,i){var o=this,n=function(e){return v.Deferred().resolveWith(o,e).promise()};i.process=function(e,t){return(e||t)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).then(function(){return i.errorThrown?v.Deferred().rejectWith(o,[i]).promise():n(arguments)}).then(e,t)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==o._trigger("submit",v.Event("submit",{delegatedEvent:e}),this)&&o._onSend(e,this)),this.jqXHR||o._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",o._trigger("fail",null,this),o._getXHRPromise(!1))},i.state=function(){return this.jqXHR?o._getDeferredState(this.jqXHR):this._processQueue?o._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===o._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),o=i&&1<i.length&&parseInt(i[1],10);return o&&o+1},_chunkedUpload:function(r,e){r.uploadedBytes=r.uploadedBytes||0;var t,s,a=this,i=r.files[0],l=i.size,c=r.uploadedBytes,u=r.maxChunkSize||l,d=this._blobSlice,p=v.Deferred(),o=p.promise();return!(!(this._isXHRUpload(r)&&d&&(c||("function"===v.type(u)?u(r):u)<l))||r.data)&&(!!e||(l<=c?(i.error=r.i18n("uploadedBytes"),this._getXHRPromise(!1,r.context,[null,"error",i.error])):(s=function(){var o=v.extend({},r),n=o._progress.loaded;o.blob=d.call(i,c,c+("function"===v.type(u)?u(o):u),i.type),o.chunkSize=o.blob.size,o.contentRange="bytes "+c+"-"+(c+o.chunkSize-1)+"/"+l,a._initXHRData(o),a._initProgressListener(o),t=(!1!==a._trigger("chunksend",null,o)&&v.ajax(o)||a._getXHRPromise(!1,o.context)).done(function(e,t,i){c=a._getUploadedBytes(i)||c+o.chunkSize,n+o.chunkSize-o._progress.loaded&&a._onProgress(v.Event("progress",{lengthComputable:!0,loaded:c-o.uploadedBytes,total:c-o.uploadedBytes}),o),r.uploadedBytes=o.uploadedBytes=c,o.result=e,o.textStatus=t,o.jqXHR=i,a._trigger("chunkdone",null,o),a._trigger("chunkalways",null,o),c<l?s():p.resolveWith(o.context,[e,t,i])}).fail(function(e,t,i){o.jqXHR=e,o.textStatus=t,o.errorThrown=i,a._trigger("chunkfail",null,o),a._trigger("chunkalways",null,o),p.rejectWith(o.context,[e,t,i])})},this._enhancePromise(o),o.abort=function(){return t.abort()},s(),o)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(e,t,i,o){var n=o._progress.total,r=o._response;o._progress.loaded<n&&this._onProgress(v.Event("progress",{lengthComputable:!0,loaded:n,total:n}),o),r.result=o.result=e,r.textStatus=o.textStatus=t,r.jqXHR=o.jqXHR=i,this._trigger("done",null,o)},_onFail:function(e,t,i,o){var n=o._response;o.recalculateProgress&&(this._progress.loaded-=o._progress.loaded,this._progress.total-=o._progress.total),n.jqXHR=o.jqXHR=e,n.textStatus=o.textStatus=t,n.errorThrown=o.errorThrown=i,this._trigger("fail",null,o)},_onAlways:function(e,t,i,o){this._trigger("always",null,o)},_onSend:function(e,t){t.submit||this._addConvenienceMethods(e,t);var i,o,n,r,s=this,a=s._getAJAXSettings(t),l=function(){return s._sending+=1,a._bitrateTimer=new s._BitrateTimer,i=i||((o||!1===s._trigger("send",v.Event("send",{delegatedEvent:e}),a))&&s._getXHRPromise(!1,a.context,o)||s._chunkedUpload(a)||v.ajax(a)).done(function(e,t,i){s._onDone(e,t,i,a)}).fail(function(e,t,i){s._onFail(e,t,i,a)}).always(function(e,t,i){if(s._onAlways(e,t,i,a),s._sending-=1,s._active-=1,a.limitConcurrentUploads&&a.limitConcurrentUploads>s._sending)for(var o=s._slots.shift();o;){if("pending"===s._getDeferredState(o)){o.resolve();break}o=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(e,a),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?(n=v.Deferred(),this._slots.push(n),r=n.then(l)):(this._sequence=this._sequence.then(l,l),r=this._sequence),r.abort=function(){return o=[void 0,"abort","abort"],i?i.abort():(n&&n.rejectWith(a.context,o),l())},this._enhancePromise(r)):l()},_onAdd:function(o,n){var r,e,s,t,a=this,l=!0,i=v.extend({},this.options,n),c=n.files,u=c.length,d=i.limitMultiFileUploads,p=i.limitMultiFileUploadSize,h=i.limitMultiFileUploadSizeOverhead,f=0,m=this._getParamName(i),g=0;if(!u)return!1;if(p&&void 0===c[0].size&&(p=void 0),(i.singleFileUploads||d||p)&&this._isXHRUpload(i))if(i.singleFileUploads||p||!d)if(!i.singleFileUploads&&p)for(s=[],r=[],t=0;t<u;t+=1)f+=c[t].size+h,(t+1===u||f+c[t+1].size+h>p||d&&d<=t+1-g)&&(s.push(c.slice(g,t+1)),(e=m.slice(g,t+1)).length||(e=m),r.push(e),g=t+1,f=0);else r=m;else for(s=[],r=[],t=0;t<u;t+=d)s.push(c.slice(t,t+d)),(e=m.slice(t,t+d)).length||(e=m),r.push(e);else s=[c],r=[m];return n.originalFiles=c,v.each(s||c,function(e,t){var i=v.extend({},n);return i.files=s?t:[t],i.paramName=r[e],a._initResponseObject(i),a._initProgressObject(i),a._addConvenienceMethods(o,i),l=a._trigger("add",v.Event("add",{delegatedEvent:o}),i)}),l},_replaceFileInput:function(e){var i=e.fileInput,o=i.clone(!0),t=i.is(document.activeElement);e.fileInputClone=o,v("<form></form>").append(o)[0].reset(),i.after(o).detach(),t&&o.focus(),v.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?o[0]:t}),i[0]===this.element[0]&&(this.element=o)},_handleFileTreeEntry:function(i,o){var e,n=this,r=v.Deferred(),s=[],a=function(e){e&&!e.entry&&(e.entry=i),r.resolve([e])},l=function(){e.readEntries(function(e){var t;e.length?(s=s.concat(e),l()):(t=s,n._handleFileTreeEntries(t,o+i.name+"/").done(function(e){r.resolve(e)}).fail(a))},a)};return o=o||"",i.isFile?i._file?(i._file.relativePath=o,r.resolve(i._file)):i.file(function(e){e.relativePath=o,r.resolve(e)},a):i.isDirectory?(e=i.createReader(),l()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(e,t){var i=this;return v.when.apply(v,v.map(e,function(e){return i._handleFileTreeEntry(e,t)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){var t=(e=e||{}).items;return t&&t.length&&(t[0].webkitGetAsEntry||t[0].getAsEntry)?this._handleFileTreeEntries(v.map(t,function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()})):v.Deferred().resolve(v.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){var t,i,o=(e=v(e)).prop("webkitEntries")||e.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if((t=v.makeArray(e.prop("files"))).length)void 0===t[0].name&&t[0].fileName&&v.each(t,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(i=e.prop("value")))return v.Deferred().resolve([]).promise();t=[{name:i.replace(/^.*\\/,"")}]}return v.Deferred().resolve(t).promise()},_getFileInputFiles:function(e){return e instanceof v&&1!==e.length?v.when.apply(v,v.map(e,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(t){var i=this,o={fileInput:v(t.target),form:v(t.target.form)};this._getFileInputFiles(o.fileInput).always(function(e){o.files=e,i.options.replaceFileInput&&i._replaceFileInput(o),!1!==i._trigger("change",v.Event("change",{delegatedEvent:t}),o)&&i._onAdd(t,o)})},_onPaste:function(e){var t=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,o={files:[]};t&&t.length&&(v.each(t,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&o.files.push(i)}),!1!==this._trigger("paste",v.Event("paste",{delegatedEvent:e}),o)&&this._onAdd(e,o))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,e=t.dataTransfer,o={};e&&e.files&&e.files.length&&(t.preventDefault(),this._getDroppedFiles(e).always(function(e){o.files=e,!1!==i._trigger("drop",v.Event("drop",{delegatedEvent:t}),o)&&i._onAdd(t,o)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),v.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(e,t){var i=-1!==v.inArray(e,this._specialOptions);i&&this._destroyEventHandlers(),this._super(e,t),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof v||(e.fileInput=v(e.fileInput)),e.dropZone instanceof v||(e.dropZone=v(e.dropZone)),e.pasteZone instanceof v||(e.pasteZone=v(e.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(e,t){return"url"!==e&&"string"===v.type(t)&&/^\/.*\/[igm]{0,3}$/.test(t)},_initDataAttributes:function(){var n=this,r=this.options,s=this.element.data();v.each(this.element[0].attributes,function(e,t){var i,o=t.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),i=s[o],n._isRegExpOption(o,i)&&(i=n._getRegExp(i)),r[o]=i)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=v.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,o,n=this,r=v.Deferred(),e=r.promise();return e.abort=function(){return o=!0,i?i.abort():(r.reject(null,"abort","abort"),e)},this._getFileInputFiles(t.fileInput).always(function(e){o||(e.length?(t.files=e,(i=n._onSend(null,t)).then(function(e,t,i){r.resolve(e,t,i)},function(e,t,i){r.reject(e,t,i)})):r.reject())}),this._enhancePromise(e)}if(t.files=v.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):"object"==typeof exports?e(require("jquery"),require("./jquery.fileupload")):e(window.jQuery)}(function(s){"use strict";var o=s.blueimp.fileupload.prototype.options.add;s.widget("blueimp.fileupload",s.blueimp.fileupload,{options:{processQueue:[],add:function(e,t){var i=s(this);t.process(function(){return i.fileupload("process",t)}),o.call(this,e,t)}},processActions:{},_processFile:function(e,o){var n=this,r=s.Deferred().resolveWith(n,[e]).promise();return this._trigger("process",null,e),s.each(e.processQueue,function(e,t){var i=function(e){return o.errorThrown?s.Deferred().rejectWith(n,[o]).promise():n.processActions[t.action].call(n,e,t)};r=r.then(i,t.always&&i)}),r.done(function(){n._trigger("processdone",null,e),n._trigger("processalways",null,e)}).fail(function(){n._trigger("processfail",null,e),n._trigger("processalways",null,e)}),r},_transformProcessQueue:function(n){var t=[];s.each(n.processQueue,function(){var i={},e=this.action,o=!0===this.prefix?e:this.prefix;s.each(this,function(e,t){"string"===s.type(t)&&"@"===t.charAt(0)?i[e]=n[t.slice(1)||(o?o+e.charAt(0).toUpperCase()+e.slice(1):e)]:i[e]=t}),t.push(i)}),n.processQueue=t},processing:function(){return this._processing},process:function(o){var n=this,r=s.extend({},this.options,o);return r.processQueue&&r.processQueue.length&&(this._transformProcessQueue(r),0===this._processing&&this._trigger("processstart"),s.each(o.files,function(e){var t=e?s.extend({},r):r,i=function(){return o.errorThrown?s.Deferred().rejectWith(n,[o]).promise():n._processFile(t,o)};t.index=e,n._processing+=1,n._processingQueue=n._processingQueue.then(i,i).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=s.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("./jquery.fileupload-process")):e(window.jQuery)}(function(s){"use strict";s.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),s.widget("blueimp.fileupload",s.blueimp.fileupload,{options:{getNumberOfFiles:s.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(e,t){if(t.disabled)return e;var i,o=s.Deferred(),n=this.options,r=e.files[e.index];return(t.minFileSize||t.maxFileSize)&&(i=r.size),"number"===s.type(t.maxNumberOfFiles)&&(n.getNumberOfFiles()||0)+e.files.length>t.maxNumberOfFiles?r.error=n.i18n("maxNumberOfFiles"):!t.acceptFileTypes||t.acceptFileTypes.test(r.type)||t.acceptFileTypes.test(r.name)?i>t.maxFileSize?r.error=n.i18n("maxFileSize"):"number"===s.type(i)&&i<t.minFileSize?r.error=n.i18n("minFileSize"):delete r.error:r.error=n.i18n("acceptFileTypes"),r.error||e.files.error?(e.files.error=!0,o.rejectWith(this,[e])):o.resolveWith(this,[e]),o.promise()}}})}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(m){!function(){"use strict";function t(e,t){if(this.el=e,this.$el=m(e),this.s=m.extend({},i,t),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.s.dynamic?this.$items=this.s.dynamicEl:"this"===this.s.selector?this.$items=this.$el:""!==this.s.selector?this.s.selectWithin?this.$items=m(this.s.selectWithin).find(this.s.selector):this.$items=this.$el.find(m(this.s.selector)):this.$items=this.$el.children(),this.$slide="",this.$outer="",this.init(),this}var i={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};t.prototype.init=function(){var e=this;e.s.preload>e.$items.length&&(e.s.preload=e.$items.length);var t=window.location.hash;0<t.indexOf("lg="+this.s.galleryId)&&(e.index=parseInt(t.split("&slide=")[1],10),m("body").addClass("lg-from-hash"),m("body").hasClass("lg-on")||(setTimeout(function(){e.build(e.index)}),m("body").addClass("lg-on"))),e.s.dynamic?(e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||0,m("body").hasClass("lg-on")||setTimeout(function(){e.build(e.index),m("body").addClass("lg-on")})):e.$items.on("click.lgcustom",function(t){try{t.preventDefault(),t.preventDefault()}catch(e){t.returnValue=!1}e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||e.$items.index(this),m("body").hasClass("lg-on")||(e.build(e.index),m("body").addClass("lg-on"))})},t.prototype.build=function(e){var t=this;t.structure(),m.each(m.fn.lightGallery.modules,function(e){t.modules[e]=new m.fn.lightGallery.modules[e](t.el)}),t.slide(e,!1,!1,!1),t.s.keyPress&&t.keyPress(),1<t.$items.length?(t.arrow(),setTimeout(function(){t.enableDrag(),t.enableSwipe()},50),t.s.mousewheel&&t.mousewheel()):t.$slide.on("click.lg",function(){t.$el.trigger("onSlideClick.lg")}),t.counter(),t.closeGallery(),t.$el.trigger("onAfterOpen.lg"),t.$outer.on("mousemove.lg click.lg touchstart.lg",function(){t.$outer.removeClass("lg-hide-items"),clearTimeout(t.hideBartimeout),t.hideBartimeout=setTimeout(function(){t.$outer.addClass("lg-hide-items")},t.s.hideBarsDelay)}),t.$outer.trigger("mousemove.lg")},t.prototype.structure=function(){var e,t="",i="",o=0,n="",r=this;for(m("body").append('<div class="lg-backdrop"></div>'),m(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),o=0;o<this.$items.length;o++)t+='<div class="lg-item"></div>';if(this.s.controls&&1<this.$items.length&&(i='<div class="lg-actions"><button class="lg-prev lg-icon">'+this.s.prevHtml+'</button><button class="lg-next lg-icon">'+this.s.nextHtml+"</button></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(n='<div class="lg-sub-html"></div>'),e='<div class="lg-outer '+this.s.addClass+" "+this.s.startClass+'"><div class="lg" style="width:'+this.s.width+"; height:"+this.s.height+'"><div class="lg-inner">'+t+'</div><div class="lg-toolbar lg-group"><span class="lg-close lg-icon"></span></div>'+i+n+"</div></div>",m("body").append(e),this.$outer=m(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),r.setTop(),m(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){r.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&1<this.$items.length&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var s=this.$outer.find(".lg-inner");s.css("transition-timing-function",this.s.cssEasing),s.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){m(".lg-backdrop").addClass("in")}),setTimeout(function(){r.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append('<a id="lg-download" target="_blank" download class="lg-download lg-icon"></a>'),this.prevScrollTop=m(window).scrollTop()},t.prototype.setTop=function(){if("100%"!==this.s.height){var e=m(window).height(),t=(e-parseInt(this.s.height,10))/2,i=this.$outer.find(".lg");e>=parseInt(this.s.height,10)?i.css("top",t+"px"):i.css("top","0px")}},t.prototype.doCss=function(){return!!function(){var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,i=0;for(i=0;i<e.length;i++)if(e[i]in t.style)return!0}()},t.prototype.isVideo=function(e,t){var i;if(i=this.s.dynamic?this.s.dynamicEl[t].html:this.$items.eq(t).attr("data-html"),!e)return i?{html5:!0}:(console.error("lightGallery :- data-src is not pvovided on slide item "+(t+1)+". Please make sure the selector property is properly configured. More info - http://sachinchoolur.github.io/lightGallery/demos/html-markup.html"),!1);var o=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com|be-nocookie\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),n=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),r=e.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),s=e.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return o?{youtube:o}:n?{vimeo:n}:r?{dailymotion:r}:s?{vk:s}:void 0},t.prototype.counter=function(){this.s.counter&&m(this.s.appendCounterTo).append('<div id="lg-counter"><span id="lg-counter-current">'+(parseInt(this.index,10)+1)+'</span> / <span id="lg-counter-all">'+this.$items.length+"</span></div>")},t.prototype.addHtml=function(e){var t,i,o=null;if(this.s.dynamic?this.s.dynamicEl[e].subHtmlUrl?t=this.s.dynamicEl[e].subHtmlUrl:o=this.s.dynamicEl[e].subHtml:(i=this.$items.eq(e)).attr("data-sub-html-url")?t=i.attr("data-sub-html-url"):(o=i.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!o&&(o=i.attr("title")||i.find("img").first().attr("alt"))),!t)if(null!=o){var n=o.substring(0,1);"."!==n&&"#"!==n||(o=this.s.subHtmlSelectorRelative&&!this.s.dynamic?i.find(o).html():m(o).html())}else o="";".lg-sub-html"===this.s.appendSubHtmlTo?t?this.$outer.find(this.s.appendSubHtmlTo).load(t):this.$outer.find(this.s.appendSubHtmlTo).html(o):t?this.$slide.eq(e).load(t):this.$slide.eq(e).append(o),null!=o&&(""===o?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[e])},t.prototype.preload=function(e){var t=1,i=1;for(t=1;t<=this.s.preload&&!(t>=this.$items.length-e);t++)this.loadContent(e+t,!1,0);for(i=1;i<=this.s.preload&&!(e-i<0);i++)this.loadContent(e-i,!1,0)},t.prototype.loadContent=function(t,e,i){var o,a,n,r,s,l,c=this,u=!1,d=function(e){for(var t=[],i=[],o=0;o<e.length;o++){var n=e[o].split(" ");""===n[0]&&n.splice(0,1),i.push(n[0]),t.push(n[1])}for(var r=m(window).width(),s=0;s<t.length;s++)if(parseInt(t[s],10)>r){a=i[s];break}};c.s.dynamic?(c.s.dynamicEl[t].poster&&(u=!0,n=c.s.dynamicEl[t].poster),l=c.s.dynamicEl[t].html,a=c.s.dynamicEl[t].src,c.s.dynamicEl[t].responsive&&d(c.s.dynamicEl[t].responsive.split(",")),r=c.s.dynamicEl[t].srcset,s=c.s.dynamicEl[t].sizes):(c.$items.eq(t).attr("data-poster")&&(u=!0,n=c.$items.eq(t).attr("data-poster")),l=c.$items.eq(t).attr("data-html"),a=c.$items.eq(t).attr("href")||c.$items.eq(t).attr("data-src"),c.$items.eq(t).attr("data-responsive")&&d(c.$items.eq(t).attr("data-responsive").split(",")),r=c.$items.eq(t).attr("data-srcset"),s=c.$items.eq(t).attr("data-sizes"));var p=!1;c.s.dynamic?c.s.dynamicEl[t].iframe&&(p=!0):"true"===c.$items.eq(t).attr("data-iframe")&&(p=!0);var h=c.isVideo(a,t);if(!c.$slide.eq(t).hasClass("lg-loaded")){if(p)c.$slide.eq(t).prepend('<div class="lg-video-cont lg-has-iframe" style="max-width:'+c.s.iframeMaxWidth+'"><div class="lg-video"><iframe class="lg-object" frameborder="0" src="'+a+'"  allowfullscreen="true"></iframe></div></div>');else if(u){var f;f=h&&h.youtube?"lg-has-youtube":h&&h.vimeo?"lg-has-vimeo":"lg-has-html5",c.$slide.eq(t).prepend('<div class="lg-video-cont '+f+' "><div class="lg-video"><span class="lg-video-play"></span><img class="lg-object lg-has-poster" src="'+n+'" /></div></div>')}else h?(c.$slide.eq(t).prepend('<div class="lg-video-cont "><div class="lg-video"></div></div>'),c.$el.trigger("hasVideo.lg",[t,a,l])):c.$slide.eq(t).prepend('<div class="lg-img-wrap"><img class="lg-object lg-image" src="'+a+'" /></div>');if(c.$el.trigger("onAferAppendSlide.lg",[t]),o=c.$slide.eq(t).find(".lg-object"),s&&o.attr("sizes",s),r){o.attr("srcset",r);try{picturefill({elements:[o[0]]})}catch(e){console.warn("lightGallery :- If you want srcset to be supported for older browser please include picturefil version 2 javascript library in your document.")}}".lg-sub-html"!==this.s.appendSubHtmlTo&&c.addHtml(t),c.$slide.eq(t).addClass("lg-loaded")}c.$slide.eq(t).find(".lg-object").on("load.lg error.lg",function(){var e=0;i&&!m("body").hasClass("lg-from-hash")&&(e=i),setTimeout(function(){c.$slide.eq(t).addClass("lg-complete"),c.$el.trigger("onSlideItemLoad.lg",[t,i||0])},e)}),h&&h.html5&&!u&&c.$slide.eq(t).addClass("lg-complete"),!0===e&&(c.$slide.eq(t).hasClass("lg-complete")?c.preload(t):c.$slide.eq(t).find(".lg-object").on("load.lg error.lg",function(){c.preload(t)}))},t.prototype.slide=function(e,t,i,o){var n=this.$outer.find(".lg-current").index(),r=this;if(!r.lGalleryOn||n!==e){var s,a,l,c=this.$slide.length,u=r.lGalleryOn?this.s.speed:0;if(!r.lgBusy)this.s.download&&((s=r.s.dynamic?!1!==r.s.dynamicEl[e].downloadUrl&&(r.s.dynamicEl[e].downloadUrl||r.s.dynamicEl[e].src):"false"!==r.$items.eq(e).attr("data-download-url")&&(r.$items.eq(e).attr("data-download-url")||r.$items.eq(e).attr("href")||r.$items.eq(e).attr("data-src")))?(m("#lg-download").attr("href",s),r.$outer.removeClass("lg-hide-download")):r.$outer.addClass("lg-hide-download")),this.$el.trigger("onBeforeSlide.lg",[n,e,t,i]),r.lgBusy=!0,clearTimeout(r.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){r.addHtml(e)},u),this.arrowDisable(e),o||(e<n?o="prev":n<e&&(o="next")),t?(this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide"),2<c?(a=e-1,l=e+1,0===e&&n===c-1?(l=0,a=c-1):e===c-1&&0===n&&(l=0,a=c-1)):(a=0,l=1),"prev"===o?r.$slide.eq(l).addClass("lg-next-slide"):r.$slide.eq(a).addClass("lg-prev-slide"),r.$slide.eq(e).addClass("lg-current")):(r.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===o?(this.$slide.eq(e).addClass("lg-prev-slide"),this.$slide.eq(n).addClass("lg-next-slide")):(this.$slide.eq(e).addClass("lg-next-slide"),this.$slide.eq(n).addClass("lg-prev-slide")),setTimeout(function(){r.$slide.removeClass("lg-current"),r.$slide.eq(e).addClass("lg-current"),r.$outer.removeClass("lg-no-trans")},50)),r.lGalleryOn?(setTimeout(function(){r.loadContent(e,!0,0)},this.s.speed+50),setTimeout(function(){r.lgBusy=!1,r.$el.trigger("onAfterSlide.lg",[n,e,t,i])},this.s.speed)):(r.loadContent(e,!0,r.s.backdropDuration),r.lgBusy=!1,r.$el.trigger("onAfterSlide.lg",[n,e,t,i])),r.lGalleryOn=!0,this.s.counter&&m("#lg-counter-current").text(e+1);r.index=e}},t.prototype.goToNextSlide=function(e){var t=this,i=t.s.loop;e&&t.$slide.length<3&&(i=!1),t.lgBusy||(t.index+1<t.$slide.length?(t.index++,t.$el.trigger("onBeforeNextSlide.lg",[t.index]),t.slide(t.index,e,!1,"next")):i?(t.index=0,t.$el.trigger("onBeforeNextSlide.lg",[t.index]),t.slide(t.index,e,!1,"next")):t.s.slideEndAnimatoin&&!e&&(t.$outer.addClass("lg-right-end"),setTimeout(function(){t.$outer.removeClass("lg-right-end")},400)))},t.prototype.goToPrevSlide=function(e){var t=this,i=t.s.loop;e&&t.$slide.length<3&&(i=!1),t.lgBusy||(0<t.index?(t.index--,t.$el.trigger("onBeforePrevSlide.lg",[t.index,e]),t.slide(t.index,e,!1,"prev")):i?(t.index=t.$items.length-1,t.$el.trigger("onBeforePrevSlide.lg",[t.index,e]),t.slide(t.index,e,!1,"prev")):t.s.slideEndAnimatoin&&!e&&(t.$outer.addClass("lg-left-end"),setTimeout(function(){t.$outer.removeClass("lg-left-end")},400)))},t.prototype.keyPress=function(){var t=this;1<this.$items.length&&m(window).on("keyup.lg",function(e){1<t.$items.length&&(37===e.keyCode&&(e.preventDefault(),t.goToPrevSlide()),39===e.keyCode&&(e.preventDefault(),t.goToNextSlide()))}),m(window).on("keydown.lg",function(e){!0===t.s.escKey&&27===e.keyCode&&(e.preventDefault(),t.$outer.hasClass("lg-thumb-open")?t.$outer.removeClass("lg-thumb-open"):t.destroy())})},t.prototype.arrow=function(){var e=this;this.$outer.find(".lg-prev").on("click.lg",function(){e.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){e.goToNextSlide()})},t.prototype.arrowDisable=function(e){!this.s.loop&&this.s.hideControlOnEnd&&(e+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),0<e?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},t.prototype.setTranslate=function(e,t,i){this.s.useLeft?e.css("left",t):e.css({transform:"translate3d("+t+"px, "+i+"px, 0px)"})},t.prototype.touchMove=function(e,t){var i=t-e;15<Math.abs(i)&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),i,0),this.setTranslate(m(".lg-prev-slide"),-this.$slide.eq(this.index).width()+i,0),this.setTranslate(m(".lg-next-slide"),this.$slide.eq(this.index).width()+i,0))},t.prototype.touchEnd=function(e){var t=this;"lg-slide"!==t.s.mode&&t.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){t.$outer.removeClass("lg-dragging"),e<0&&Math.abs(e)>t.s.swipeThreshold?t.goToNextSlide(!0):0<e&&Math.abs(e)>t.s.swipeThreshold?t.goToPrevSlide(!0):Math.abs(e)<5&&t.$el.trigger("onSlideClick.lg"),t.$slide.removeAttr("style")}),setTimeout(function(){t.$outer.hasClass("lg-dragging")||"lg-slide"===t.s.mode||t.$outer.removeClass("lg-slide")},t.s.speed+100)},t.prototype.enableSwipe=function(){var t=this,i=0,o=0,n=!1;t.s.enableSwipe&&t.doCss()&&(t.$slide.on("touchstart.lg",function(e){t.$outer.hasClass("lg-zoomed")||t.lgBusy||(e.preventDefault(),t.manageSwipeClass(),i=e.originalEvent.targetTouches[0].pageX)}),t.$slide.on("touchmove.lg",function(e){t.$outer.hasClass("lg-zoomed")||(e.preventDefault(),o=e.originalEvent.targetTouches[0].pageX,t.touchMove(i,o),n=!0)}),t.$slide.on("touchend.lg",function(){t.$outer.hasClass("lg-zoomed")||(n?(n=!1,t.touchEnd(o-i)):t.$el.trigger("onSlideClick.lg"))}))},t.prototype.enableDrag=function(){var t=this,i=0,o=0,n=!1,r=!1;t.s.enableDrag&&t.doCss()&&(t.$slide.on("mousedown.lg",function(e){t.$outer.hasClass("lg-zoomed")||t.lgBusy||m(e.target).text().trim()||(e.preventDefault(),t.manageSwipeClass(),i=e.pageX,n=!0,t.$outer.scrollLeft+=1,t.$outer.scrollLeft-=1,t.$outer.removeClass("lg-grab").addClass("lg-grabbing"),t.$el.trigger("onDragstart.lg"))}),m(window).on("mousemove.lg",function(e){n&&(r=!0,o=e.pageX,t.touchMove(i,o),t.$el.trigger("onDragmove.lg"))}),m(window).on("mouseup.lg",function(e){r?(r=!1,t.touchEnd(o-i),t.$el.trigger("onDragend.lg")):(m(e.target).hasClass("lg-object")||m(e.target).hasClass("lg-video-play"))&&t.$el.trigger("onSlideClick.lg"),n&&(n=!1,t.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},t.prototype.manageSwipeClass=function(){var e=this.index+1,t=this.index-1;this.s.loop&&2<this.$slide.length&&(0===this.index?t=this.$slide.length-1:this.index===this.$slide.length-1&&(e=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),-1<t&&this.$slide.eq(t).addClass("lg-prev-slide"),this.$slide.eq(e).addClass("lg-next-slide")},t.prototype.mousewheel=function(){var t=this;t.$outer.on("mousewheel.lg",function(e){e.deltaY&&(0<e.deltaY?t.goToPrevSlide():t.goToNextSlide(),e.preventDefault())})},t.prototype.closeGallery=function(){var t=this,i=!1;this.$outer.find(".lg-close").on("click.lg",function(){t.destroy()}),t.s.closable&&(t.$outer.on("mousedown.lg",function(e){i=!!(m(e.target).is(".lg-outer")||m(e.target).is(".lg-item ")||m(e.target).is(".lg-img-wrap"))}),t.$outer.on("mousemove.lg",function(){i=!1}),t.$outer.on("mouseup.lg",function(e){(m(e.target).is(".lg-outer")||m(e.target).is(".lg-item ")||m(e.target).is(".lg-img-wrap")&&i)&&(t.$outer.hasClass("lg-dragging")||t.destroy())}))},t.prototype.destroy=function(e){var t=this;e||(t.$el.trigger("onBeforeClose.lg"),m(window).scrollTop(t.prevScrollTop)),e&&(t.s.dynamic||this.$items.off("click.lg click.lgcustom"),m.removeData(t.el,"lightGallery")),this.$el.off(".lg.tm"),m.each(m.fn.lightGallery.modules,function(e){t.modules[e]&&t.modules[e].destroy()}),this.lGalleryOn=!1,clearTimeout(t.hideBartimeout),this.hideBartimeout=!1,m(window).off(".lg"),m("body").removeClass("lg-on lg-from-hash"),t.$outer&&t.$outer.removeClass("lg-visible"),m(".lg-backdrop").removeClass("in"),setTimeout(function(){t.$outer&&t.$outer.remove(),m(".lg-backdrop").remove(),e||t.$el.trigger("onCloseAfter.lg")},t.s.backdropDuration+50)},m.fn.lightGallery=function(e){return this.each(function(){if(m.data(this,"lightGallery"))try{m(this).data("lightGallery").init()}catch(e){console.error("lightGallery has not initiated properly")}else m.data(this,"lightGallery",new t(this,e))})},m.fn.lightGallery.modules={}}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(i){!function(){"use strict";var t={autoplay:!1,pause:5e3,progressBar:!0,fourceAutoplay:!1,autoplayControls:!0,appendAutoplayControlsTo:".lg-toolbar"},e=function(e){return this.core=i(e).data("lightGallery"),this.$el=i(e),!(this.core.$items.length<2)&&(this.core.s=i.extend({},t,this.core.s),this.interval=!1,this.fromAuto=!0,this.canceledOnTouch=!1,this.fourceAutoplayTemp=this.core.s.fourceAutoplay,this.core.doCss()||(this.core.s.progressBar=!1),this.init(),this)};e.prototype.init=function(){var e=this;e.core.s.autoplayControls&&e.controls(),e.core.s.progressBar&&e.core.$outer.find(".lg").append('<div class="lg-progress-bar"><div class="lg-progress"></div></div>'),e.progress(),e.core.s.autoplay&&e.$el.one("onSlideItemLoad.lg.tm",function(){e.startlAuto()}),e.$el.on("onDragstart.lg.tm touchstart.lg.tm",function(){e.interval&&(e.cancelAuto(),e.canceledOnTouch=!0)}),e.$el.on("onDragend.lg.tm touchend.lg.tm onSlideClick.lg.tm",function(){!e.interval&&e.canceledOnTouch&&(e.startlAuto(),e.canceledOnTouch=!1)})},e.prototype.progress=function(){var e,t,i=this;i.$el.on("onBeforeSlide.lg.tm",function(){i.core.s.progressBar&&i.fromAuto&&(e=i.core.$outer.find(".lg-progress-bar"),t=i.core.$outer.find(".lg-progress"),i.interval&&(t.removeAttr("style"),e.removeClass("lg-start"),setTimeout(function(){t.css("transition","width "+(i.core.s.speed+i.core.s.pause)+"ms ease 0s"),e.addClass("lg-start")},20))),i.fromAuto||i.core.s.fourceAutoplay||i.cancelAuto(),i.fromAuto=!1})},e.prototype.controls=function(){var e=this;i(this.core.s.appendAutoplayControlsTo).append('<span class="lg-autoplay-button lg-icon"></span>'),e.core.$outer.find(".lg-autoplay-button").on("click.lg",function(){i(e.core.$outer).hasClass("lg-show-autoplay")?(e.cancelAuto(),e.core.s.fourceAutoplay=!1):e.interval||(e.startlAuto(),e.core.s.fourceAutoplay=e.fourceAutoplayTemp)})},e.prototype.startlAuto=function(){var e=this;e.core.$outer.find(".lg-progress").css("transition","width "+(e.core.s.speed+e.core.s.pause)+"ms ease 0s"),e.core.$outer.addClass("lg-show-autoplay"),e.core.$outer.find(".lg-progress-bar").addClass("lg-start"),e.interval=setInterval(function(){e.core.index+1<e.core.$items.length?e.core.index++:e.core.index=0,e.fromAuto=!0,e.core.slide(e.core.index,!1,!1,"next")},e.core.s.speed+e.core.s.pause)},e.prototype.cancelAuto=function(){clearInterval(this.interval),this.interval=!1,this.core.$outer.find(".lg-progress").removeAttr("style"),this.core.$outer.removeClass("lg-show-autoplay"),this.core.$outer.find(".lg-progress-bar").removeClass("lg-start")},e.prototype.destroy=function(){this.cancelAuto(),this.core.$outer.find(".lg-progress-bar").remove()},i.fn.lightGallery.modules.autoplay=e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(o){!function(){"use strict";function t(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}var i={fullScreen:!0},e=function(e){return this.core=o(e).data("lightGallery"),this.$el=o(e),this.core.s=o.extend({},i,this.core.s),this.init(),this};e.prototype.init=function(){var e="";if(this.core.s.fullScreen){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))return;e='<span class="lg-fullscreen lg-icon"></span>',this.core.$outer.find(".lg-toolbar").append(e),this.fullScreen()}},e.prototype.requestFullscreen=function(){var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},e.prototype.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},e.prototype.fullScreen=function(){var e=this;o(document).on("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg",function(){e.core.$outer.toggleClass("lg-fullscreen-on")}),this.core.$outer.find(".lg-fullscreen").on("click.lg",function(){t()?e.exitFullscreen():e.requestFullscreen()})},e.prototype.destroy=function(){t()&&this.exitFullscreen(),o(document).off("fullscreenchange.lg webkitfullscreenchange.lg mozfullscreenchange.lg MSFullscreenChange.lg")},o.fn.lightGallery.modules.fullscreen=e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(s){!function(){"use strict";var t={pager:!1},e=function(e){return this.core=s(e).data("lightGallery"),this.$el=s(e),this.core.s=s.extend({},t,this.core.s),this.core.s.pager&&1<this.core.$items.length&&this.init(),this};e.prototype.init=function(){var o,e,t,i=this,n="";if(i.core.$outer.find(".lg").append('<div class="lg-pager-outer"></div>'),i.core.s.dynamic)for(var r=0;r<i.core.s.dynamicEl.length;r++)n+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+i.core.s.dynamicEl[r].thumb+'" /></div></span>';else i.core.$items.each(function(){i.core.s.exThumbImage?n+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+s(this).attr(i.core.s.exThumbImage)+'" /></div></span>':n+='<span class="lg-pager-cont"> <span class="lg-pager"></span><div class="lg-pager-thumb-cont"><span class="lg-caret"></span> <img src="'+s(this).find("img").attr("src")+'" /></div></span>'});(e=i.core.$outer.find(".lg-pager-outer")).html(n),(o=i.core.$outer.find(".lg-pager-cont")).on("click.lg touchend.lg",function(){var e=s(this);i.core.index=e.index(),i.core.slide(i.core.index,!1,!0,!1)}),e.on("mouseover.lg",function(){clearTimeout(t),e.addClass("lg-pager-hover")}),e.on("mouseout.lg",function(){t=setTimeout(function(){e.removeClass("lg-pager-hover")})}),i.core.$el.on("onBeforeSlide.lg.tm",function(e,t,i){o.removeClass("lg-pager-active"),o.eq(i).addClass("lg-pager-active")})},e.prototype.destroy=function(){},s.fn.lightGallery.modules.pager=e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(c){!function(){"use strict";var t={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},e=function(e){return this.core=c(e).data("lightGallery"),this.core.s=c.extend({},t,this.core.s),this.$el=c(e),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight="100%"),this.left=0,this.init(),this};e.prototype.init=function(){var e=this;this.core.s.thumbnail&&1<this.core.$items.length&&(this.core.s.showThumbByDefault&&setTimeout(function(){e.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},e.prototype.build=function(){function t(e,t,i){var o,n=s.core.isVideo(e,i)||{},r="";n.youtube||n.vimeo||n.dailymotion?n.youtube?o=s.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+n.youtube[1]+"/"+s.core.s.youtubeThumbSize+".jpg":t:n.vimeo?s.core.s.loadVimeoThumbnail?(o="//i.vimeocdn.com/video/error_"+l+".jpg",r=n.vimeo[1]):o=t:n.dailymotion&&(o=s.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+n.dailymotion[1]:t):o=t,a+='<div data-vimeo-id="'+r+'" class="lg-thumb-item" style="width:'+s.core.s.thumbWidth+"px; height: "+s.core.s.thumbHeight+"; margin-right: "+s.core.s.thumbMargin+'px"><img src="'+o+'" /></div>',r=""}var e,s=this,a="",l="";switch(this.core.s.vimeoThumbSize){case"thumbnail_large":l="640";break;case"thumbnail_medium":l="200x150";break;case"thumbnail_small":l="100x75"}if(s.core.$outer.addClass("lg-has-thumb"),s.core.$outer.find(".lg").append('<div class="lg-thumb-outer"><div class="lg-thumb lg-group"></div></div>'),s.$thumbOuter=s.core.$outer.find(".lg-thumb-outer"),s.thumbOuterWidth=s.$thumbOuter.width(),s.core.s.animateThumb&&s.core.$outer.find(".lg-thumb").css({width:s.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&s.$thumbOuter.css("height",s.core.s.thumbContHeight+"px"),s.core.s.dynamic)for(var i=0;i<s.core.s.dynamicEl.length;i++)t(s.core.s.dynamicEl[i].src,s.core.s.dynamicEl[i].thumb,i);else s.core.$items.each(function(e){s.core.s.exThumbImage?t(c(this).attr("href")||c(this).attr("data-src"),c(this).attr(s.core.s.exThumbImage),e):t(c(this).attr("href")||c(this).attr("data-src"),c(this).find("img").attr("src"),e)});s.core.$outer.find(".lg-thumb").html(a),(e=s.core.$outer.find(".lg-thumb-item")).each(function(){var t=c(this),e=t.attr("data-vimeo-id");e&&c.getJSON("//www.vimeo.com/api/v2/video/"+e+".json?callback=?",{format:"json"},function(e){t.find("img").attr("src",e[0][s.core.s.vimeoThumbSize])})}),e.eq(s.core.index).addClass("active"),s.core.$el.on("onBeforeSlide.lg.tm",function(){e.removeClass("active"),e.eq(s.core.index).addClass("active")}),e.on("click.lg touchend.lg",function(){var e=c(this);setTimeout(function(){(s.thumbClickable&&!s.core.lgBusy||!s.core.doCss())&&(s.core.index=e.index(),s.core.slide(s.core.index,!1,!0,!1))},50)}),s.core.$el.on("onBeforeSlide.lg.tm",function(){s.animateThumb(s.core.index)}),c(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){s.animateThumb(s.core.index),s.thumbOuterWidth=s.$thumbOuter.width()},200)})},e.prototype.setTranslate=function(e){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+e+"px, 0px, 0px)"})},e.prototype.animateThumb=function(e){var t=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var i;switch(this.core.s.currentPagerPosition){case"left":i=0;break;case"middle":i=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":i=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*e-1-i,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(t.hasClass("on")||this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),this.core.doCss()||t.animate({left:-this.left+"px"},this.core.s.speed)):this.core.doCss()||t.css("left",-this.left+"px"),this.setTranslate(this.left)}},e.prototype.enableThumbDrag=function(){var t=this,i=0,o=0,n=!1,r=!1,s=0;t.$thumbOuter.addClass("lg-grab"),t.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(e){t.thumbTotalWidth>t.thumbOuterWidth&&(e.preventDefault(),i=e.pageX,n=!0,t.core.$outer.scrollLeft+=1,t.core.$outer.scrollLeft-=1,t.thumbClickable=!1,t.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),c(window).on("mousemove.lg.thumb",function(e){n&&(s=t.left,r=!0,o=e.pageX,t.$thumbOuter.addClass("lg-dragging"),(s-=o-i)>t.thumbTotalWidth-t.thumbOuterWidth&&(s=t.thumbTotalWidth-t.thumbOuterWidth),s<0&&(s=0),t.setTranslate(s))}),c(window).on("mouseup.lg.thumb",function(){r?(r=!1,t.$thumbOuter.removeClass("lg-dragging"),t.left=s,Math.abs(o-i)<t.core.s.swipeThreshold&&(t.thumbClickable=!0)):t.thumbClickable=!0,n&&(n=!1,t.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},e.prototype.enableThumbSwipe=function(){var t=this,i=0,o=0,n=!1,r=0;t.core.$outer.find(".lg-thumb").on("touchstart.lg",function(e){t.thumbTotalWidth>t.thumbOuterWidth&&(e.preventDefault(),i=e.originalEvent.targetTouches[0].pageX,t.thumbClickable=!1)}),t.core.$outer.find(".lg-thumb").on("touchmove.lg",function(e){t.thumbTotalWidth>t.thumbOuterWidth&&(e.preventDefault(),o=e.originalEvent.targetTouches[0].pageX,n=!0,t.$thumbOuter.addClass("lg-dragging"),r=t.left,(r-=o-i)>t.thumbTotalWidth-t.thumbOuterWidth&&(r=t.thumbTotalWidth-t.thumbOuterWidth),r<0&&(r=0),t.setTranslate(r))}),t.core.$outer.find(".lg-thumb").on("touchend.lg",function(){t.thumbTotalWidth>t.thumbOuterWidth&&n?(n=!1,t.$thumbOuter.removeClass("lg-dragging"),Math.abs(o-i)<t.core.s.swipeThreshold&&(t.thumbClickable=!0),t.left=r):t.thumbClickable=!0})},e.prototype.toogle=function(){var e=this;e.core.s.toogleThumb&&(e.core.$outer.addClass("lg-can-toggle"),e.$thumbOuter.append('<span class="lg-toogle-thumb lg-icon"></span>'),e.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){e.core.$outer.toggleClass("lg-thumb-open")}))},e.prototype.thumbkeyPress=function(){var t=this;c(window).on("keydown.lg.thumb",function(e){38===e.keyCode?(e.preventDefault(),t.core.$outer.addClass("lg-thumb-open")):40===e.keyCode&&(e.preventDefault(),t.core.$outer.removeClass("lg-thumb-open"))})},e.prototype.destroy=function(){this.core.s.thumbnail&&1<this.core.$items.length&&(c(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},c.fn.lightGallery.modules.Thumbnail=e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(p){!function(){"use strict";var t={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},e=function(e){return this.core=p(e).data("lightGallery"),this.$el=p(e),this.core.s=p.extend({},t,this.core.s),this.videoLoaded=!1,this.init(),this};e.prototype.init=function(){var o=this;o.core.$el.on("hasVideo.lg.tm",function(e,t,i,o){var n=this;if(n.core.$slide.eq(t).find(".lg-video").append(n.loadVideo(i,"lg-object",!0,t,o)),o)if(n.core.s.videojs)try{videojs(n.core.$slide.eq(t).find(".lg-html5").get(0),n.core.s.videojsOptions,function(){!n.videoLoaded&&n.core.s.autoplayFirstVideo&&this.play()})}catch(e){console.error("Make sure you have included videojs")}else!n.videoLoaded&&n.core.s.autoplayFirstVideo&&n.core.$slide.eq(t).find(".lg-html5").get(0).play()}.bind(this)),o.core.$el.on("onAferAppendSlide.lg.tm",function(e,t){var i=this.core.$slide.eq(t).find(".lg-video-cont");i.hasClass("lg-has-iframe")||(i.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}.bind(this)),o.core.doCss()&&1<o.core.$items.length&&(o.core.s.enableSwipe||o.core.s.enableDrag)?o.core.$el.on("onSlideClick.lg.tm",function(){var e=o.core.$slide.eq(o.core.index);o.loadVideoOnclick(e)}):o.core.$slide.on("click.lg",function(){o.loadVideoOnclick(p(this))}),o.core.$el.on("onBeforeSlide.lg.tm",function(e,t,i){var o,n=this,r=n.core.$slide.eq(t),s=r.find(".lg-youtube").get(0),a=r.find(".lg-vimeo").get(0),l=r.find(".lg-dailymotion").get(0),c=r.find(".lg-vk").get(0),u=r.find(".lg-html5").get(0);if(s)s.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*");else if(a)try{$f(a).api("pause")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(l)l.contentWindow.postMessage("pause","*");else if(u)if(n.core.s.videojs)try{videojs(u).pause()}catch(e){console.error("Make sure you have included videojs")}else u.pause();c&&p(c).attr("src",p(c).attr("src").replace("&autoplay","&noplay")),o=n.core.s.dynamic?n.core.s.dynamicEl[i].src:n.core.$items.eq(i).attr("href")||n.core.$items.eq(i).attr("data-src");var d=n.core.isVideo(o,i)||{};(d.youtube||d.vimeo||d.dailymotion||d.vk)&&n.core.$outer.addClass("lg-hide-download")}.bind(this)),o.core.$el.on("onAfterSlide.lg.tm",function(e,t){o.core.$slide.eq(t).removeClass("lg-video-playing")}),o.core.s.autoplayFirstVideo&&o.core.$el.on("onAferAppendSlide.lg.tm",function(e,t){if(!o.core.lGalleryOn){var i=o.core.$slide.eq(t);setTimeout(function(){o.loadVideoOnclick(i)},100)}})},e.prototype.loadVideo=function(e,t,i,o,n){var r="",s=1,a="",l=this.core.isVideo(e,o)||{};if(i&&(s=this.videoLoaded?0:this.core.s.autoplayFirstVideo?1:0),l.youtube)a="?wmode=opaque&autoplay="+s+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(a=a+"&"+p.param(this.core.s.youtubePlayerParams)),r='<iframe class="lg-video-object lg-youtube '+t+'" width="560" height="315" src="//www.youtube.com/embed/'+l.youtube[1]+a+'" frameborder="0" allowfullscreen></iframe>';else if(l.vimeo)a="?autoplay="+s+"&api=1",this.core.s.vimeoPlayerParams&&(a=a+"&"+p.param(this.core.s.vimeoPlayerParams)),r='<iframe class="lg-video-object lg-vimeo '+t+'" width="560" height="315"  src="//player.vimeo.com/video/'+l.vimeo[1]+a+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';else if(l.dailymotion)a="?wmode=opaque&autoplay="+s+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(a=a+"&"+p.param(this.core.s.dailymotionPlayerParams)),r='<iframe class="lg-video-object lg-dailymotion '+t+'" width="560" height="315" src="//www.dailymotion.com/embed/video/'+l.dailymotion[1]+a+'" frameborder="0" allowfullscreen></iframe>';else if(l.html5){var c=n.substring(0,1);"."!==c&&"#"!==c||(n=p(n).html()),r=n}else l.vk&&(a="&autoplay="+s,this.core.s.vkPlayerParams&&(a=a+"&"+p.param(this.core.s.vkPlayerParams)),r='<iframe class="lg-video-object lg-vk '+t+'" width="560" height="315" src="//vk.com/video_ext.php?'+l.vk[1]+a+'" frameborder="0" allowfullscreen></iframe>');return r},e.prototype.loadVideoOnclick=function(i){var o=this;if(i.find(".lg-object").hasClass("lg-has-poster")&&i.find(".lg-object").is(":visible"))if(i.hasClass("lg-has-video")){var e=i.find(".lg-youtube").get(0),t=i.find(".lg-vimeo").get(0),n=i.find(".lg-dailymotion").get(0),r=i.find(".lg-html5").get(0);if(e)e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*");else if(t)try{$f(t).api("play")}catch(e){console.error("Make sure you have included froogaloop2 js")}else if(n)n.contentWindow.postMessage("play","*");else if(r)if(o.core.s.videojs)try{videojs(r).play()}catch(e){console.error("Make sure you have included videojs")}else r.play();i.addClass("lg-video-playing")}else{i.addClass("lg-video-playing lg-has-video");var s=function(e,t){if(i.find(".lg-video").append(o.loadVideo(e,"",!1,o.core.index,t)),t)if(o.core.s.videojs)try{videojs(o.core.$slide.eq(o.core.index).find(".lg-html5").get(0),o.core.s.videojsOptions,function(){this.play()})}catch(e){console.error("Make sure you have included videojs")}else o.core.$slide.eq(o.core.index).find(".lg-html5").get(0).play()};o.core.s.dynamic?s(o.core.s.dynamicEl[o.core.index].src,o.core.s.dynamicEl[o.core.index].html):s(o.core.$items.eq(o.core.index).attr("href")||o.core.$items.eq(o.core.index).attr("data-src"),o.core.$items.eq(o.core.index).attr("data-html"));var a=i.find(".lg-object");i.find(".lg-video").append(a),i.find(".lg-video-object").hasClass("lg-html5")||(i.removeClass("lg-complete"),i.find(".lg-video-object").on("load.lg error.lg",function(){i.addClass("lg-complete")}))}},e.prototype.destroy=function(){this.videoLoaded=!1},p.fn.lightGallery.modules.video=e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(d){!function(){"use strict";var e,t,i={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:(e=!1,t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./),t&&parseInt(t[2],10)<54&&(e=!0),e)},o=function(e){return this.core=d(e).data("lightGallery"),this.core.s=d.extend({},i,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=d(window).width()/2,this.pageY=d(window).height()/2+d(window).scrollTop()),this};o.prototype.init=function(){var s=this,e='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';s.core.s.actualSize&&(e+='<span id="lg-actual-size" class="lg-icon"></span>'),s.core.s.useLeftForZoom?s.core.$outer.addClass("lg-use-left-for-zoom"):s.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(e),s.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(e,t,i){var o=s.core.s.enableZoomAfter+i;d("body").hasClass("lg-from-hash")&&i?o=0:d("body").removeClass("lg-from-hash"),s.zoomabletimeout=setTimeout(function(){s.core.$slide.eq(t).addClass("lg-zoomable")},o+30)});var a=1,t=function(e){var t=s.core.$outer.find(".lg-current .lg-image"),i=(d(window).width()-t.prop("offsetWidth"))/2,o=(d(window).height()-t.prop("offsetHeight"))/2+d(window).scrollTop(),n=(e-1)*(s.pageX-i),r=(e-1)*(s.pageY-o);t.css("transform","scale3d("+e+", "+e+", 1)").attr("data-scale",e),s.core.s.useLeftForZoom?t.parent().css({left:-n+"px",top:-r+"px"}).attr("data-x",n).attr("data-y",r):t.parent().css("transform","translate3d(-"+n+"px, -"+r+"px, 0)").attr("data-x",n).attr("data-y",r)},l=function(){1<a?s.core.$outer.addClass("lg-zoomed"):s.resetZoom(),a<1&&(a=1),t(a)},o=function(e,t,i,o){var n,r=t.prop("offsetWidth");n=s.core.s.dynamic?s.core.s.dynamicEl[i].width||t[0].naturalWidth||r:s.core.$items.eq(i).attr("data-width")||t[0].naturalWidth||r,s.core.$outer.hasClass("lg-zoomed")?a=1:r<n&&(a=n/r||2),o?(s.pageX=d(window).width()/2,s.pageY=d(window).height()/2+d(window).scrollTop()):(s.pageX=e.pageX||e.originalEvent.targetTouches[0].pageX,s.pageY=e.pageY||e.originalEvent.targetTouches[0].pageY),l(),setTimeout(function(){s.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)},n=!1;s.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(e,t){var i=s.core.$slide.eq(t).find(".lg-image");i.on("dblclick",function(e){o(e,i,t)}),i.on("touchstart",function(e){n?(clearTimeout(n),n=null,o(e,i,t)):n=setTimeout(function(){n=null},300),e.preventDefault()})}),d(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){s.pageX=d(window).width()/2,s.pageY=d(window).height()/2+d(window).scrollTop(),t(a)}),d("#lg-zoom-out").on("click.lg",function(){s.core.$outer.find(".lg-current .lg-image").length&&(a-=s.core.s.scale,l())}),d("#lg-zoom-in").on("click.lg",function(){s.core.$outer.find(".lg-current .lg-image").length&&(a+=s.core.s.scale,l())}),d("#lg-actual-size").on("click.lg",function(e){o(e,s.core.$slide.eq(s.core.index).find(".lg-image"),s.core.index,!0)}),s.core.$el.on("onBeforeSlide.lg.tm",function(){a=1,s.resetZoom()}),s.zoomDrag(),s.zoomSwipe()},o.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=d(window).width()/2,this.pageY=d(window).height()/2+d(window).scrollTop()},o.prototype.zoomSwipe=function(){var n=this,r={},s={},a=!1,l=!1,c=!1;n.core.$slide.on("touchstart.lg",function(e){if(n.core.$outer.hasClass("lg-zoomed")){var t=n.core.$slide.eq(n.core.index).find(".lg-object");c=t.prop("offsetHeight")*t.attr("data-scale")>n.core.$outer.find(".lg").height(),((l=t.prop("offsetWidth")*t.attr("data-scale")>n.core.$outer.find(".lg").width())||c)&&(e.preventDefault(),r={x:e.originalEvent.targetTouches[0].pageX,y:e.originalEvent.targetTouches[0].pageY})}}),n.core.$slide.on("touchmove.lg",function(e){if(n.core.$outer.hasClass("lg-zoomed")){var t,i,o=n.core.$slide.eq(n.core.index).find(".lg-img-wrap");e.preventDefault(),a=!0,s={x:e.originalEvent.targetTouches[0].pageX,y:e.originalEvent.targetTouches[0].pageY},n.core.$outer.addClass("lg-zoom-dragging"),i=c?-Math.abs(o.attr("data-y"))+(s.y-r.y):-Math.abs(o.attr("data-y")),t=l?-Math.abs(o.attr("data-x"))+(s.x-r.x):-Math.abs(o.attr("data-x")),(15<Math.abs(s.x-r.x)||15<Math.abs(s.y-r.y))&&(n.core.s.useLeftForZoom?o.css({left:t+"px",top:i+"px"}):o.css("transform","translate3d("+t+"px, "+i+"px, 0)"))}}),n.core.$slide.on("touchend.lg",function(){n.core.$outer.hasClass("lg-zoomed")&&a&&(a=!1,n.core.$outer.removeClass("lg-zoom-dragging"),n.touchendZoom(r,s,l,c))})},o.prototype.zoomDrag=function(){var n=this,r={},s={},a=!1,l=!1,c=!1,u=!1;n.core.$slide.on("mousedown.lg.zoom",function(e){var t=n.core.$slide.eq(n.core.index).find(".lg-object");u=t.prop("offsetHeight")*t.attr("data-scale")>n.core.$outer.find(".lg").height(),c=t.prop("offsetWidth")*t.attr("data-scale")>n.core.$outer.find(".lg").width(),n.core.$outer.hasClass("lg-zoomed")&&d(e.target).hasClass("lg-object")&&(c||u)&&(e.preventDefault(),r={x:e.pageX,y:e.pageY},a=!0,n.core.$outer.scrollLeft+=1,n.core.$outer.scrollLeft-=1,n.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),d(window).on("mousemove.lg.zoom",function(e){if(a){var t,i,o=n.core.$slide.eq(n.core.index).find(".lg-img-wrap");l=!0,s={x:e.pageX,y:e.pageY},n.core.$outer.addClass("lg-zoom-dragging"),i=u?-Math.abs(o.attr("data-y"))+(s.y-r.y):-Math.abs(o.attr("data-y")),t=c?-Math.abs(o.attr("data-x"))+(s.x-r.x):-Math.abs(o.attr("data-x")),n.core.s.useLeftForZoom?o.css({left:t+"px",top:i+"px"}):o.css("transform","translate3d("+t+"px, "+i+"px, 0)")}}),d(window).on("mouseup.lg.zoom",function(e){a&&(a=!1,n.core.$outer.removeClass("lg-zoom-dragging"),!l||r.x===s.x&&r.y===s.y||(s={x:e.pageX,y:e.pageY},n.touchendZoom(r,s,c,u)),l=!1),n.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},o.prototype.touchendZoom=function(e,t,i,o){var n=this,r=n.core.$slide.eq(n.core.index).find(".lg-img-wrap"),s=n.core.$slide.eq(n.core.index).find(".lg-object"),a=-Math.abs(r.attr("data-x"))+(t.x-e.x),l=-Math.abs(r.attr("data-y"))+(t.y-e.y),c=(n.core.$outer.find(".lg").height()-s.prop("offsetHeight"))/2,u=Math.abs(s.prop("offsetHeight")*Math.abs(s.attr("data-scale"))-n.core.$outer.find(".lg").height()+c),d=(n.core.$outer.find(".lg").width()-s.prop("offsetWidth"))/2,p=Math.abs(s.prop("offsetWidth")*Math.abs(s.attr("data-scale"))-n.core.$outer.find(".lg").width()+d);(15<Math.abs(t.x-e.x)||15<Math.abs(t.y-e.y))&&(o&&(l<=-u?l=-u:-c<=l&&(l=-c)),i&&(a<=-p?a=-p:-d<=a&&(a=-d)),o?r.attr("data-y",Math.abs(l)):l=-Math.abs(r.attr("data-y")),i?r.attr("data-x",Math.abs(a)):a=-Math.abs(r.attr("data-x")),n.core.s.useLeftForZoom?r.css({left:a+"px",top:l+"px"}):r.css("transform","translate3d("+a+"px, "+l+"px, 0)"))},o.prototype.destroy=function(){var e=this;e.core.$el.off(".lg.zoom"),d(window).off(".lg.zoom"),e.core.$slide.off(".lg.zoom"),e.core.$el.off(".lg.tm.zoom"),e.resetZoom(),clearTimeout(e.zoomabletimeout),e.zoomabletimeout=!1},d.fn.lightGallery.modules.zoom=o}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(i){!function(){"use strict";var t={hash:!0},e=function(e){return this.core=i(e).data("lightGallery"),this.core.s=i.extend({},t,this.core.s),this.core.s.hash&&(this.oldHash=window.location.hash,this.init()),this};e.prototype.init=function(){var t,o=this;o.core.$el.on("onAfterSlide.lg.tm",function(e,t,i){history.replaceState?history.replaceState(null,null,window.location.pathname+window.location.search+"#lg="+o.core.s.galleryId+"&slide="+i):window.location.hash="lg="+o.core.s.galleryId+"&slide="+i}),i(window).on("hashchange.lg.hash",function(){t=window.location.hash;var e=parseInt(t.split("&slide=")[1],10);-1<t.indexOf("lg="+o.core.s.galleryId)?o.core.slide(e,!1,!1):o.core.lGalleryOn&&o.core.destroy()})},e.prototype.destroy=function(){this.core.s.hash&&(this.oldHash&&this.oldHash.indexOf("lg="+this.core.s.galleryId)<0?history.replaceState?history.replaceState(null,null,this.oldHash):window.location.hash=this.oldHash:history.replaceState?history.replaceState(null,document.title,window.location.pathname+window.location.search):window.location.hash="",this.core.$el.off(".lg.hash"))},i.fn.lightGallery.modules.hash=e}()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(0,function(n){!function(){"use strict";var t={share:!0,facebook:!0,facebookDropdownText:"Facebook",twitter:!0,twitterDropdownText:"Twitter",googlePlus:!0,googlePlusDropdownText:"GooglePlus",pinterest:!0,pinterestDropdownText:"Pinterest"},e=function(e){return this.core=n(e).data("lightGallery"),this.core.s=n.extend({},t,this.core.s),this.core.s.share&&this.init(),this};e.prototype.init=function(){var o=this,e='<span id="lg-share" class="lg-icon"><ul class="lg-dropdown" style="position: absolute;">';e+=o.core.s.facebook?'<li><a id="lg-share-facebook" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.facebookDropdownText+"</span></a></li>":"",e+=o.core.s.twitter?'<li><a id="lg-share-twitter" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.twitterDropdownText+"</span></a></li>":"",e+=o.core.s.googlePlus?'<li><a id="lg-share-googleplus" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.googlePlusDropdownText+"</span></a></li>":"",e+=o.core.s.pinterest?'<li><a id="lg-share-pinterest" target="_blank"><span class="lg-icon"></span><span class="lg-dropdown-text">'+this.core.s.pinterestDropdownText+"</span></a></li>":"",e+="</ul></span>",this.core.$outer.find(".lg-toolbar").append(e),this.core.$outer.find(".lg").append('<div id="lg-dropdown-overlay"></div>'),n("#lg-share").on("click.lg",function(){o.core.$outer.toggleClass("lg-dropdown-active")}),n("#lg-dropdown-overlay").on("click.lg",function(){o.core.$outer.removeClass("lg-dropdown-active")}),o.core.$el.on("onAfterSlide.lg.tm",function(e,t,i){setTimeout(function(){n("#lg-share-facebook").attr("href","https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(o.getSahreProps(i,"facebookShareUrl")||window.location.href)),n("#lg-share-twitter").attr("href","https://twitter.com/intent/tweet?text="+o.getSahreProps(i,"tweetText")+"&url="+encodeURIComponent(o.getSahreProps(i,"twitterShareUrl")||window.location.href)),n("#lg-share-googleplus").attr("href","https://plus.google.com/share?url="+encodeURIComponent(o.getSahreProps(i,"googleplusShareUrl")||window.location.href)),n("#lg-share-pinterest").attr("href","http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(o.getSahreProps(i,"pinterestShareUrl")||window.location.href)+"&media="+encodeURIComponent(o.getSahreProps(i,"src"))+"&description="+o.getSahreProps(i,"pinterestText"))},100)})},e.prototype.getSahreProps=function(e,t){var i="";if(this.core.s.dynamic)i=this.core.s.dynamicEl[e][t];else{var o=this.core.$items.eq(e).attr("href"),n=this.core.$items.eq(e).data(t);i="src"===t&&o||n}return i},e.prototype.destroy=function(){},n.fn.lightGallery.modules.share=e}()}),function(M){"use strict";function N(e,t,i){return e===t?e=t:e===i&&(e=i),e}function B(e){return void 0!==e}function W(e,t,i){var o=i/100*(t-e);return 1===(o=Math.round(e+o).toString(16)).length&&(o="0"+o),o}function G(r,h){function s(e){B(e)||(e=h.rating);var t=(O=e)/q,i=t*$;1<t&&(i+=(Math.ceil(t)-1)*F),l(h.ratedFill),(i=h.rtl?100-i:i)<0?i=0:100<i&&(i=100),z.css("width",i+"%")}function i(){e=U*h.numStars+P*(h.numStars-1),$=U/e*100,F=P/e*100,r.width(e),s()}function o(e){var t=h.starWidth=e;return U=window.parseFloat(h.starWidth.replace("px","")),A.find("svg").attr({width:h.starWidth,height:t}),z.find("svg").attr({width:h.starWidth,height:t}),i(),r}function n(e){return h.spacing=e,P=parseFloat(h.spacing.replace("px","")),A.find("svg:not(:first-child)").css({"margin-left":e}),z.find("svg:not(:first-child)").css({"margin-left":e}),i(),r}function a(e){return h.normalFill=e,(h.rtl?z:A).find("svg").attr({fill:h.normalFill}),r}function l(e){if(h.multiColor){var t=(O-R)/h.maxValue*100,i=h.multiColor||{};e=function(e,t,i){if(!e||!t)return null;i=B(i)?i:0,e=Z(e),t=Z(t);var o=W(e.r,t.r,i),n=W(e.b,t.b,i);return"#"+o+W(e.g,t.g,i)+n}(i.startColor||X.startColor,i.endColor||X.endColor,t)}else H=e;return h.ratedFill=e,(h.rtl?A:z).find("svg").attr({fill:h.ratedFill}),r}function c(e){e=!!e,h.rtl=e,a(h.normalFill),s()}function u(e){l((h.multiColor=e)||H)}function d(e){h.numStars=e,q=h.maxValue/h.numStars,A.empty(),z.empty();for(var t=0;t<h.numStars;t++)A.append(M(h.starSvg||Q)),z.append(M(h.starSvg||Q));return o(h.starWidth),a(h.normalFill),n(h.spacing),s(),r}function p(e){return h.maxValue=e,q=h.maxValue/h.numStars,h.rating>e&&b(e),s(),r}function f(e){return h.precision=e,b(h.rating),r}function m(e){return h.halfStar=e,r}function g(e){return h.fullStar=e,r}function v(e){var t,i,o,n,r,s=A.offset().left,a=s+A.width(),l=h.maxValue,c=e.pageX,u=0;if(c<s)u=R;else if(a<c)u=l;else{var d=(c-s)/(a-s);if(0<P)for(var p=d*=100;0<p;)$<p?(u+=q,p-=$+F):(u+=p/$*q,p=0);else u=d*h.maxValue;i=(t=u)%q,o=q/2,n=h.halfStar,((r=h.fullStar)||n)&&(r||n&&o<i?t+=q-i:(t-=i,0<i&&(t+=o))),u=t}return h.rtl&&(u=l-u),parseFloat(u)}function y(e){return h.readOnly=e,r.attr("readonly",!0),I(),e||(r.removeAttr("readonly"),r.on("mousemove",t).on("mouseenter",t).on("mouseleave",_).on("click",S).on("rateyo.init",k).on("rateyo.change",T).on("rateyo.set",E)),r}function b(e){var o=e,n=h.maxValue;return"string"==typeof o&&("%"===o[o.length-1]&&(o=o.substr(0,o.length-1),p(n=100)),o=parseFloat(o)),function(e,t,i){if(!(R<=o&&o<=n))throw Error("Invalid Rating, expected value between "+R+" and "+n)}(),o=parseFloat(o.toFixed(h.precision)),N(parseFloat(o),R,n),h.rating=o,s(),L&&r.trigger("rateyo.set",{rating:o}),r}function w(e){return h.onInit=e,r}function x(e){return h.onSet=e,r}function C(e){return h.onChange=e,r}function t(e){var t=v(e).toFixed(h.precision),i=h.maxValue;s(t=N(parseFloat(t),R,i)),r.trigger("rateyo.change",{rating:t})}function _(){var e,t;t=!1,e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t||(s(),r.trigger("rateyo.change",{rating:h.rating}))}function S(e){var t=v(e).toFixed(h.precision);t=parseFloat(t),j.rating(t)}function k(e,t){h.onInit&&"function"==typeof h.onInit&&h.onInit.apply(this,[t.rating,j])}function T(e,t){h.onChange&&"function"==typeof h.onChange&&h.onChange.apply(this,[t.rating,j])}function E(e,t){h.onSet&&"function"==typeof h.onSet&&h.onSet.apply(this,[t.rating,j])}function I(){r.off("mousemove",t).off("mouseenter",t).off("mouseleave",_).off("click",S).off("rateyo.init",k).off("rateyo.change",T).off("rateyo.set",E)}this.node=r.get(0);var j=this;r.empty().addClass("jq-ry-container");var q,U,$,P,F,e,D=M("<div/>").addClass("jq-ry-group-wrapper").appendTo(r),A=M("<div/>").addClass("jq-ry-normal-group").addClass("jq-ry-group").appendTo(D),z=M("<div/>").addClass("jq-ry-rated-group").addClass("jq-ry-group").appendTo(D),R=0,O=h.rating,L=!1,H=h.ratedFill;this.rating=function(e){return B(e)?(b(e),r):h.rating},this.destroy=function(){var o,n;return h.readOnly||I(),G.prototype.collection=(o=r.get(0),n=this.collection,M.each(n,function(e){if(o===this.node){var t=n.slice(0,e),i=n.slice(e+1,n.length);return n=t.concat(i),!1}}),n),r.removeClass("jq-ry-container").children().remove(),r},this.method=function(e){if(!e)throw Error("Method name not specified!");if(!B(this[e]))throw Error("Method "+e+" doesn't exist!");var t=Array.prototype.slice.apply(arguments,[]).slice(1);return this[e].apply(this,t)},this.option=function(e,t){if(!B(e))return h;var i;switch(e){case"starWidth":i=o;break;case"numStars":i=d;break;case"normalFill":i=a;break;case"ratedFill":i=l;break;case"multiColor":i=u;break;case"maxValue":i=p;break;case"precision":i=f;break;case"rating":i=b;break;case"halfStar":i=m;break;case"fullStar":i=g;break;case"readOnly":i=y;break;case"spacing":i=n;break;case"rtl":i=c;break;case"onInit":i=w;break;case"onSet":i=x;break;case"onChange":i=C;break;default:throw Error("No such option as "+e)}return B(t)?i(t):h[e]},d(h.numStars),y(h.readOnly),h.rtl&&c(h.rtl),this.collection.push(this),this.rating(h.rating,!0),L=!0,r.trigger("rateyo.init",{rating:h.rating})}function c(e,t){var i;return M.each(t,function(){if(e===this.node)return i=this,!1}),i}var Q='<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><path d="M28 10.996c0 0.303-0.219 0.589-0.438 0.808l-6.108 5.957 1.447 8.413c0.017 0.118 0.017 0.219 0.017 0.337 0 0.438-0.202 0.841-0.69 0.841-0.236 0-0.471-0.084-0.673-0.202l-7.555-3.971-7.555 3.971c-0.219 0.118-0.438 0.202-0.673 0.202-0.488 0-0.707-0.404-0.707-0.841 0-0.118 0.017-0.219 0.034-0.337l1.447-8.413-6.125-5.957c-0.202-0.219-0.421-0.505-0.421-0.808 0-0.505 0.522-0.707 0.942-0.774l8.447-1.228 3.786-7.656c0.151-0.32 0.438-0.69 0.825-0.69s0.673 0.37 0.825 0.69l3.786 7.656 8.447 1.228c0.404 0.067 0.942 0.269 0.942 0.774z"></path></svg>',o={starWidth:"32px",normalFill:"lightgray",ratedFill:"#f39c12",numStars:5,maxValue:5,precision:1,rating:0,fullStar:!1,halfStar:!1,readOnly:!1,spacing:"0px",rtl:!1,multiColor:null,onInit:null,onChange:null,onSet:null,starSvg:null},X={startColor:"#c0392b",endColor:"#f1c40f"},i=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,Z=function(e){if(!i.test(e))return null;var t=i.exec(e);return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}};G.prototype.collection=[],window.RateYo=G,M.fn.rateYo=function(){return function(i){var r=G.prototype.collection,e=M(this);if(0===e.length)return e;var t=Array.prototype.slice.apply(arguments,[]);if(0===t.length)i=t[0]={};else{if(1!==t.length||"object"!=typeof t[0]){if(1<=t.length&&"string"==typeof t[0]){var s=t[0],a=t.slice(1),l=[];return M.each(e,function(e,t){var i=c(t,r);if(!i)throw Error("Trying to set options before even initialization");var o=i[s];if(!o)throw Error("Method "+s+" does not exist!");var n=o.apply(i,a);l.push(n)}),l=1===l.length?l[0]:l}throw Error("Invalid Arguments")}i=t[0]}return i=M.extend({},o,i),M.each(e,function(){var e=c(this,r);if(e)return e;var t=M(this),o={},n=M.extend({},i);return M.each(t.data(),function(e,t){if(0===e.indexOf("rateyo")){var i=e.replace(/^rateyo/,"");i=i[0].toLowerCase()+i.slice(1),o[i]=t,delete n[i]}}),new G(M(this),M.extend({},o,n))})}.apply(this,Array.prototype.slice.apply(arguments,[]))}}(window.jQuery),function(r){r.fn.niceSelect=function(e){function o(e){e.after(r("<div></div>").addClass("nice-select").addClass(e.attr("class")||"").addClass(e.attr("disabled")?"disabled":"").attr("tabindex",e.attr("disabled")?null:"0").html('<span class="current"></span><ul class="list"></ul>'));var n=e.next(),t=e.find("option"),i=e.find("option:selected");n.find(".current").attr("style",i.attr("style")||null).addClass(i.attr("class")).removeClass("option").html(i.data("display")||i.html()),t.each(function(e){var t=r(this),i=t.data("display"),o=r("<li></li>").attr("data-value",t.val()).attr("data-display",i||null).attr("style",t.attr("style")||null).addClass("option"+(t.is(":selected")?" selected":"")+(t.is(":disabled")?" disabled":"")).addClass(t.attr("class")).html(t.html());n.find("ul").append(o)})}if("string"==typeof e)return"update"==e?this.each(function(){var e=r(this),t=r(this).next(".nice-select"),i=t.hasClass("open");t.length&&(t.remove(),o(e),i&&e.next().trigger("click"))}):"destroy"==e?(this.each(function(){var e=r(this),t=r(this).next(".nice-select");t.length&&(t.remove(),e.css("display",""))}),0==r(".nice-select").length&&r(document).off(".nice_select")):console.log('Method "'+e+'" does not exist.'),this;this.hide(0),this.each(function(){var e=r(this);e.next().hasClass("nice-select")||o(e)}),r(document).off(".nice_select"),r(document).on("click.nice_select",".nice-select",function(e){var t=r(this);r(".nice-select").not(t).removeClass("open"),t.toggleClass("open"),t.hasClass("open")?(t.find(".option"),t.find(".focus").removeClass("focus"),t.find(".selected").addClass("focus")):t.focus()}),r(document).on("click.nice_select",function(e){0===r(e.target).closest(".nice-select").length&&r(".nice-select").removeClass("open").find(".option")}),r(document).on("click.nice_select",".nice-select .option:not(.disabled)",function(e){var t=r(this),i=t.closest(".nice-select");i.find(".selected").removeClass("selected"),t.addClass("selected");var o=t.data("display")||t.html();i.find(".current").html(o).attr("style",t.attr("style")||null).removeClass().addClass("current").addClass(t.attr("class")).removeClass("option"),i.prev("select").val(t.data("value")).trigger("change")}),r(document).on("keydown.nice_select",".nice-select",function(e){var t=r(this),i=r(t.find(".focus")||t.find(".list .option.selected"));if(32==e.keyCode||13==e.keyCode)return t.hasClass("open")?i.trigger("click"):t.trigger("click"),!1;if(40==e.keyCode){if(t.hasClass("open")){var o=i.nextAll(".option:not(.disabled)").first();0<o.length&&(t.find(".focus").removeClass("focus"),o.addClass("focus"))}else t.trigger("click");return!1}if(38==e.keyCode){if(t.hasClass("open")){var n=i.prevAll(".option:not(.disabled)").first();0<n.length&&(t.find(".focus").removeClass("focus"),n.addClass("focus"))}else t.trigger("click");return!1}if(27==e.keyCode)t.hasClass("open")&&t.trigger("click");else if(9==e.keyCode&&t.hasClass("open"))return!1});var t=document.createElement("a").style;return t.cssText="pointer-events:auto","auto"!==t.pointerEvents&&r("html").addClass("no-csspointerevents"),this}}(jQuery),function(o){UltraComm.Utils=new function(){this.isInteger=function(e){return+e===e&&!(e%1)},this.getFormNoticeElement=function(e,t){var i=o('<div class="uc-grid-cell uc-notice-holder"></div>');return e&&i.html(o('<p class = "uc-notice uc-notice-'+(t?"success":"error")+'"></p>').html(e)),i},this.getAjaxLoaderElement=function(e){e=e||!1;var t=o('<div class="uc-ajax-loader"><div class="bounce-left"></div><div class="bounce-middle"></div><div class="bounce-right"></div></div>');return e?t.removeClass().addClass("uc-grid-cell uc-grid-cell--center uc-grid-cell--autoSize uc-ajax-loader"):t},this.isGlobalVariableDefined=function(e){return e in window},this.whenImagesLoaded=function(e,t){o(e).each(function(){this.complete&&this.naturalWidth?t.apply(this):o(this).on("load",function(){t.apply(this)})})}}}(jQuery),function(n){UltraComm.Request=new function(){var o={action:"",profiledUserSlug:UltraComm.profiledUserSlug,profiledGroupId:UltraComm.profiledGroupId,ajaxRequestNonce:UltraComm.ajaxRequestNonce};this.setRequestNonce=function(e){o.ajaxRequestNonce=e},this.getAjaxRequestData=function(){return o},this.ajaxPostRequest=function(e,t){e&&"string"==typeof e&&(e={action:e});var i=n.extend({},o,e);return t&&"object"==typeof t&&(i=n.extend(i,t)),t&&"string"==typeof t&&(i=n.param(i)+"&"+t),n.post(UltraComm.ajaxUrl,i)}}}(jQuery),jQuery,UltraComm.Masonry=new function(){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var i=0;i<this.length;i++)e.call(t,this[i],i,this)}),this.resizeAllMasonryItems=function(){document.querySelectorAll(".uc-masonry-holder").forEach(function(e){var r=parseInt(window.getComputedStyle(e).getPropertyValue("grid-row-gap")),s=parseInt(window.getComputedStyle(e).getPropertyValue("grid-auto-rows"));e.querySelectorAll(".uc-masonry-brick").forEach(function(n){UltraComm.Utils.whenImagesLoaded(n.getElementsByTagName("img"),function(){var e,t,i,o;e=n,t=r,i=s,o=Math.ceil((e.querySelector(".uc-masonry-item").getBoundingClientRect().height+t)/(i+t)),e.style.gridRowEnd="span "+o,e.querySelector(".uc-masonry-item").style.height=o*t+"px"})})})}},jQuery(document).ready(function(o){o(".uc-user-main-widget .uc-arrow-holder").off("click").on("click",function(){var e=o(this).closest(".uc-widget-header"),t=e.closest(".uc-panel").find(".uc-panel-content"),i=e.hasClass("uc-widget-header-expanded");e.toggleClass("uc-widget-header-expanded",!i),t.slideToggle("slow",function(){})})}),jQuery(document).ready(function(c){UltraComm.Activity=new function(){var t=c("form.uc-activity-post-form"),o=c("#uc-activity-fileupload"),n=t.find(".uc-activity-uploads-holder"),r=[],s="status";o.parent().hide(),t.on("click",".uc-activity-delete-file",function(e){e.preventDefault();var t=c(this);r=jQuery.grep(r,function(e){return e.name!==t.data("fileName")||(t.parent().fadeOut("slow",function(){c(this).remove()}),!1)})}),this.likeActivity=function(e){e.preventDefault();var t=c(e.currentTarget),i=t.data("ucTargetId");!t.hasClass("liked")&&i&&(t.find("i").removeClass("fa-heart fa-heart-o").addClass("fa-cog fa-spin"),UltraComm.Request.ajaxPostRequest({action:"saveActivityLike",activityId:i}).always(function(e){t.find("i").removeClass("fa-cog fa-spin").addClass("fa-heart"),t.toggleClass("liked",!0),e.success&&e.data.newText&&t.find("span").text(e.data.newText)}))},this.repostActivity=function(e){e.preventDefault();var t=c(e.currentTarget),i=t.data("ucTargetId");t.hasClass("reposted")||t.hasClass("uc-repost-not-allowed")||!i||(t.find("i").removeClass("fa-retweet").addClass("fa-cog fa-spin"),UltraComm.Request.ajaxPostRequest({action:"repostUserActivity",activityId:i}).always(function(e){t.find("i").removeClass("fa-cog fa-spin").addClass("fa-retweet"),t.toggleClass("uc-repost-not-allowed",!0),e.success&&e.data.newText&&(t.toggleClass("reposted",!0),t.find("span").text(e.data.newText))}))},this.deleteActivity=function(e){e.preventDefault();var t=c(e.currentTarget),i=t.data("ucTargetId");i&&UltraComm.Request.ajaxPostRequest({action:"deleteUserActivity",activityId:i}).always(function(e){e.success&&t.closest(".uc-activity-holder").slideUp()})},this.changePostFormat=function(e){e.preventDefault();var t=c(e.currentTarget),i=c("form.uc-activity-post-form div.uc-form-body");if(s=t.data("postFormat"),!t.hasClass("uc-hvr-underline-active")){switch(t.closest("ul").find("a").removeClass("uc-hvr-underline-active"),t.toggleClass("uc-hvr-underline-active",!0),c(".uc-activity-quote-fields-holder, .uc-activity-link-fields-holder").fadeOut(0),n.slideUp(function(){c(this).html("")}),i.show(0),s){case"":case"quote":case"status":o.parent().hide(0);break;default:o.parent().show(0)}switch(s){case"quote":i.hide(0),c(".uc-activity-quote-fields-holder").fadeIn(0);break;case"link":i.hide(0),c(".uc-activity-link-fields-holder").fadeIn(0)}}},this.submitNewActivityPost=function(e){e.preventDefault(),t.find(".uc-notice-holder").html(""),t.find(".uc-ajax-loader").toggleClass("uc-hidden",!1),UltraComm.Request.ajaxPostRequest({action:"saveActivityPost",activityPostFormat:s,uploadedFiles:JSON.stringify(r)},t.serialize()).always(function(e){t.find(".uc-ajax-loader").toggleClass("uc-hidden",!0),!e.success&&e.data&&e.data.message?t.find(".uc-notice-holder").html(c('<p class = "uc-notice uc-notice-error" />').text(e.data.message)).find("p").delay(2500).fadeOut("slow",function(){c(this).remove()}):e.success&&(t.trigger("reset"),r=[],n.slideUp(function(){c(this).html("")}),e.data.message&&c(e.data.message).insertAfter(c(".uc-activity-post-form-holder")).hide().fadeIn(2e3))})},o.length&&o.fileupload({url:UltraComm.ajaxUrl,dataType:"json",autoUpload:!0,maxFileSize:9e7,singleFileUploads:!0}).on("fileuploadadd",function(e,t){t.acceptFileTypes=i(),n.toggleClass("uc-grid--full",!t.acceptFileTypes.test("image/"))}).on("fileuploadprocessalways",function(e,t){t.files[t.index].error&&(t.form.find(".uc-notice-holder").html(c('<p class = "uc-notice uc-notice-error" />').text(t.files[t.index].error)),t.form.find(".uc-notice").delay("1500").slideUp("slow",function(){c(this).remove()}))}).on("fileuploadsubmit",function(e,t){t.form.find(".uc-notice-holder").html(""),n.css("display","flex").hide(1).fadeIn();var i=c('<div class="uc-grid-cell uc-grid-cell--autoSize uc-grid--justify-center uc-bg-holder" />').append(UltraComm.Utils.getAjaxLoaderElement().addClass("uc-grid-cell--center"));t.acceptFileTypes.test("image/")||i.removeClass("uc-grid-cell--autoSize uc-bg-holder uc-grid--justify-center").addClass("uc-grid uc-grid--center uc-grid--fit"),n.append(i),t.context={fileHolderElement:i},t.formData=UltraComm.Request.getAjaxRequestData(),t.formData.action="uploadTemporaryFile"}).on("fileuploaddone",function(e,i){c.each(i.result.files,function(e,t){if(i.context.fileHolderElement.find("div.uc-ajax-loader").remove(),t.error)return i.form.find(".uc-notice-holder").html(c('<p class = "uc-notice uc-notice-error" />').text(t.error)),void i.form.find(".uc-notice").delay(2e3).slideUp("slow",function(){c(this).remove()});r.push(t),t.url&&i.acceptFileTypes.test("image/")?(i.context.fileHolderElement.css("background-image","url("+t.url+")"),i.context.fileHolderElement.html('<i class="fa fa-trash uc-activity-delete-file uc-grid-cell--center" data-file-name = "'+t.name+'"></i>')):(i.context.fileHolderElement.append('<i class="uc-grid-cell uc-grid-cell--autoSize fa fa-paperclip"></i>'),i.context.fileHolderElement.append('<p class="uc-grid-cell">'+t.name+"</p>"),i.context.fileHolderElement.append('<i class="uc-grid-cell uc-grid-cell--autoSize fa fa-trash uc-activity-delete-file uc-grid-cell--center" data-file-name = "'+t.name+'"></i>'))})}).on("fileuploadprogress",function(e,t){});var i=function(){switch(s){case"image":case"link":return/^image\/.*$/;case"audio":return/^audio\/.*$/;case"video":return/^video\/.*$/;case"status":case"quote":return/^$/}return/\.[0-9a-z]+$/i};c(document).click(function(e){var t=c(e.target);t.is("[data-reply-activity-comment-id]")||t.is(".uc-activity-comment-reply-form")||t.parents().is(".uc-activity-comment-reply-form")||c(".uch-content").find(".uc-activity-comment-reply-form").fadeOut(500,function(){c(this).remove()})}),c(".uch-content").on("click",'a[class^="uc-comments-target-root-form-"]',function(e){e.preventDefault();var t=c("#uc-comments-root-form-"+c(this).data("ucTargetId"));t.hide().removeClass("uc-hidden").slideDown({start:function(){c(this).css({display:"flex"})},duration:250,done:function(){t.find("textarea").focus(),c.scrollTo(t,500,{offset:-250,easing:"swing"})}})}),c(".uc-activity-holder").on("submit",".uc-activity-comments-form",function(e){e.preventDefault();var n=c(this),r=!n.hasClass("uc-activity-comments-root-form");n.find(".uc-notice-holder").html(""),n.find(".uc-ajax-loader").toggleClass("uc-hidden",!1),UltraComm.Request.ajaxPostRequest({action:"saveActivityComment"},n.serialize()).always(function(e){var t=e.success?c('<p class = "uc-notice uc-notice-success" />'):c('<p class = "uc-notice uc-notice-error" />');if(n.find(".uc-ajax-loader").toggleClass("uc-hidden",!0),e.data.message&&n.find(".uc-notice-holder").html(t.text(e.data.message)).find("p").delay(2500).fadeOut("slow",function(){c(this).remove()}),e.data.commentOutput){var i=c(e.data.commentOutput);i.hide(),r?n.closest("li").append(i):n.closest(".uc-activity-holder").find("ul").append(i),i.slideDown(),n.trigger("reset");var o=n.closest(".uc-activity-holder").find('.uc-activity-footer-actions a[href^="#uc-comments-root-form"] span');o.length&&o.html(o.html().replace(/(\d+)/,function(e){return++e})),r&&n.delay(1500).fadeOut("slow",function(){c(this).remove()})}})}),c(".uc-activity-holder").on("click","[data-reply-activity-comment-id]",function(e){e.preventDefault(),c(this).closest(".uc-activity-comments-holder").find("form").remove();var t=c(this).closest(".uc-activity-holder").find(".uc-activity-comments-root-form").clone(!0);t.removeClass("uc-activity-comments-root-form").hide(),t.removeAttr("id"),t.append('<input type="hidden" name="txtCommentParentId" value="'+c(this).data("replyActivityCommentId")+'" />'),t.trigger("reset"),t.toggleClass("uc-activity-comment-reply-form",!0),c(this).closest(".uc-activity-comment-actions").find(".uc-comments-form-holder").removeClass("uc-hidden").append(t),t.slideDown({start:function(){c(this).css({display:"flex"})}})}),c(".uc-activity-show-all-comments a").on("click",function(e){e.preventDefault();var t=c(this).closest("ul.uc-activity-comments-holder").find("li.uc-hidden");t.each(function(e){c(this).hide(1).delay(300+100*e).fadeIn(400,function(){c.scrollTo(c(this),250,{offset:-250,easing:"swing"}),e===t.length-1&&t.closest(".uc-activity-holder").find(".uc-activity-comments-root-form").hide().removeClass("uc-hidden").slideDown({start:function(){c(this).css({display:"flex"})},duration:250,done:function(){c.scrollTo(c(this),500,{offset:-250,easing:"swing"})}})})})});var a=c(".uc-user-activity-section").not(".uc-single-activity").length?".uc-user-activity-section":null;if(a||(a=c(".uc-group-activity-section").not(".uc-single-activity").length?".uc-group-activity-section":null),a){var l=new InfiniteScroll(a,{append:".uc-activity-holder",status:".uc-page-load-status",history:!1,prefill:!1,scrollThreshold:10,path:function(){var e={action:-1!==a.indexOf("user-activity")?"getUserProfileActivityPerPage":"getGroupProfileActivityPerPage",ajaxRequestNonce:UltraComm.ajaxRequestNonce,pageNumber:this.pageIndex+1,profiledUserSlug:UltraComm.profiledUserSlug};return UltraComm.ajaxUrl+"?"+c.param(e)}});l.on("load",function(e,t){e||(l.option({append:!1}),c(l.options.status).remove(),l.destroy())})}}}),jQuery(document).ready(function(s){UltraComm.UserRelations=new function(){var n=s('<i class="fa fa-cog fa-spin"></i>'),r=s('<i class="fa fa-check"></i>').css("color","#3c763d");this.userFollow=function(e){e.preventDefault();var t=s(e.currentTarget),i=t.data("actionTargetId");UltraComm.Utils.isInteger(i)&&(t.find("svg, i.fa").remove(),t.prepend(n),t.toggleClass("uc-button-action-transparent",!0),t.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("addUserFollow",{secondaryUserId:i}).always(function(e){e.success&&(n.remove(),t.prepend(r.clone()),e.data&&e.data.message&&(t.attr("uc-tooltip")&&t.attr("uc-tooltip",e.data.message),!t.hasClass("uc-button-icon-action")&&t.find("span").html(e.data.message)))}))},this.userFriendRequest=function(e){e.preventDefault();var t=s(e.currentTarget),i=t.data("actionTargetId");UltraComm.Utils.isInteger(i)&&(t.find("svg, i.fa").remove(),t.prepend(n),t.toggleClass("uc-button-action-transparent",!0),t.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("addUserFriendRequest",{secondaryUserId:i}).always(function(e){e.success&&(n.remove(),t.prepend(r.clone()),e.data&&e.data.message&&(t.attr("uc-tooltip")&&t.attr("uc-tooltip",e.data.message),!t.hasClass("uc-button-icon-action")&&t.find("span").html(e.data.message)))}))},this.userUnFollow=function(e){e.preventDefault();var t=s(e.currentTarget),i=t.data("actionTargetId");UltraComm.Utils.isInteger(i)&&(t.find("svg, i.fa").remove(),t.prepend(n),t.toggleClass("uc-button-action-transparent",!0),t.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("userUnFollow",{secondaryUserId:i}).always(function(e){e.success&&(n.remove(),t.prepend(r.clone()),e.data&&e.data.message&&(t.attr("uc-tooltip")&&t.attr("uc-tooltip",e.data.message),!t.hasClass("uc-button-icon-action")&&t.find("span").html(e.data.message)))}))},this.userUnFriend=function(e){e.preventDefault();var t=s(e.currentTarget),i=t.data("actionTargetId");UltraComm.Utils.isInteger(i)&&(t.find("svg, i.fa").remove(),t.prepend(n),t.toggleClass("uc-button-action-transparent",!0),t.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("userUnFriend",{secondaryUserId:i}).always(function(e){e.success&&(n.remove(),t.prepend(r.clone()),e.data&&e.data.message&&(t.attr("uc-tooltip")&&t.attr("uc-tooltip",e.data.message),!t.hasClass("uc-button-icon-action")&&t.find("span").html(e.data.message)))}))},this.manageFriendshipRequest=function(e,t){e.preventDefault();var i=s(e.currentTarget),o=i.data("actionTargetId");UltraComm.Utils.isInteger(o)&&(i.find("svg, i.fa").remove(),i.prepend(n),i.toggleClass("uc-button-action-transparent",!0),i.on("click",function(){return!1}),i.closest("ul.uc-member-actions").find("button").each(function(){s(this).is(i)||s(this).parent().hide(1,function(){s(this).remove()})}),UltraComm.Request.ajaxPostRequest(t,{relationTargetId:o}).always(function(e){e.success&&(n.remove(),i.prepend(r.clone()),e.data&&e.data.message&&i.find("span").html(e.data.message))}))}}}),jQuery(document).ready(function(n){UltraComm.UserReviews=new function(){n(".uc-user-star-ratings").rateYo({}).on("rateyo.set",function(e,t){n("form.uc-user-review-form").length&&n("form.uc-user-review-form input[type=hidden]").val(t.rating)}),n(".uc-user-ratings-bar-holder").each(function(){n(this).find(".uc-user-ratings-progress-bar").each(function(){n(this).animate({width:n(this).attr("data-percent")},250,"linear")})});var o=function(e){e.preventDefault();var t=n(this);t.off("submit"),t.find(".uc-ajax-loader").show();var i=t.find("p.uc-notice");i.length&&i.remove(),UltraComm.Request.ajaxPostRequest("saveUserReview",t.serialize()).always(function(e){t.find(".uc-ajax-loader").hide(),t.one("submit",o),e.success?(t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-success">'+e.data.message+"</p>"),t.closest(".mfp-container").length&&setTimeout(function(){n.magnificPopup.instance.close()},1500)):t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-error">'+e.data.message+"</p>")})};this.addUserReview=function(e){e.preventDefault(),n(e.currentTarget).magnificPopup({mainClass:"mfp-fade",removalDelay:500,tClose:"",type:"inline",callbacks:{open:function(){var e=this.content.find("p.uc-notice");e.length&&e.remove()}}}).attr("data-mfp-src","#uc-modal-user-reviews-popup").magnificPopup("open"),n("form.uc-user-review-form").off("submit").one("submit",o)}}}),jQuery(document).ready(function(i){UltraComm.SocialShare=new function(){i(".uch").on("click",".uc-activity-share-button",function(e){e.preventDefault();var t=i(this).closest(".uc-activity-holder").find(".uc-activity-share-holder");t.length&&(t.is(":visible")||(t.attr("style","display: -webkit-box; display: -webkit-flex; display: -ms-flexbox; display: flex;"),t.hide(0)),t.slideToggle(500))}),i(".uch").on("click",".uc-profile-share-button",function(e){e.preventDefault();var t=i(this).data("targetId");i(this).magnificPopup({mainClass:"mfp-fade",removalDelay:500,closeMarkup:"",type:"inline",alignTop:!0,callbacks:{}}).attr("data-mfp-src","#uc-modal-share-profile-popup-"+t).magnificPopup("open")})}}),jQuery(document).ready(function(r){UltraComm.UserNotifications=new function(){var n=r(".uc-navbar-notification .uc-notifications-box-holder"),e=r(".uc-user-settings-notifications .uc-notification-holder"),i=function(i,e){i=r(i);var o;o=void 0===e?2==+i.attr("data-notification-status")?1:2:e,UltraComm.Request.ajaxPostRequest("changeNotificationStatus",{statusId:o,notificationId:i.data("notificationId")}).always(function(e){i.toggleClass("status-read",1===o),i.attr("uc-tooltip",1===o?i.attr("data-status-unread-tooltip"):i.attr("data-status-read-tooltip")),i.attr("data-notification-status",o);var t=+n.parent().find("a:first span").text();(t-=1===o?1:-1)?n.parent().find("a:first span").text(t).slideDown(0):n.parent().find("a:first span").slideUp(0).text(t)})};n.length&&(r(".uc-navbar-notifications li.uc-user-notifications a:first").on("click",function(e){e.preventDefault(),n.slideToggle("fast")}),r(document).on("mouseup",function(e){n.is(e.target)||0!==n.has(e.target).length||n.hide()}),n.off("click","[data-target-url]").on("click","[data-target-url]",function(e){var t=r(this).attr("data-target-url");r(this).find(".uc-notification-status").each(function(){2===parseInt(r(this).attr("data-notification-status"),10)&&i(this,1),t&&setTimeout(function(e){window.location.href=e},300,t)})}),n.find(".uc-notification-status").off("click").on("click",function(e){e.stopPropagation(),i(this)})),e.length&&(r(".uc-user-settings-notifications .uc-notification-holder a[data-delete-notification-id]").off("click").on("click",function(e){e.preventDefault();var t=r(this);UltraComm.Request.ajaxPostRequest("deleteNotification",{notificationId:t.data("deleteNotificationId")}).always(function(e){t.closest(".uc-notification-holder").slideUp()})}),r(".uc-user-settings-notifications .uc-notification-holder a[data-notification-status]").off("click").on("click",function(e){e.preventDefault();var t=r(this),i=i=2==+t.attr("data-notification-status")?1:2;UltraComm.Request.ajaxPostRequest("changeNotificationStatus",{statusId:i,notificationId:t.data("notificationId")}).always(function(e){t.toggleClass("status-read",1===i),t.attr("data-notification-status",i),t.find("span").text(1===i?t.attr("data-status-unread"):t.attr("data-status-read"))})}),r(".uc-user-settings-notifications .uc-notification-holder a[data-view-notification-id]").off("click").on("click",function(e){e.preventDefault();var t=r(this),i=t.closest(".uc-notification-holder").find("a[data-notification-status]");i.length&&1==+i.attr("data-notification-status")?window.location.href=t.attr("href"):UltraComm.Request.ajaxPostRequest("changeNotificationStatus",{statusId:1,notificationId:t.data("viewNotificationId")}).always(function(e){setTimeout(function(e){window.location.href=e},300,t.attr("href"))})}))}}),jQuery(document).ready(function(o){if(o(".uc-directory-holder.uc-directory-pagination-scroll").length){var i=new InfiniteScroll(".uc-directory-holder",{append:".uc-directory-item-holder",status:".uc-page-load-status",history:!1,prefill:!1,scrollThreshold:10,path:function(){var e={action:"getDirectoryListingPerPage",ajaxRequestNonce:UltraComm.ajaxRequestNonce,pageNumber:this.pageIndex+1,directoryId:UltraComm.directoryId};return UltraComm.ajaxUrl+"?"+o.param(e)}});i.on("load",function(e,t){e||(i.option({append:!1}),o(i.options.status).remove(),i.destroy())}),i.on("append",function(e,t,i){o.each(o.makeArray(i),function(e,t){o(t).find(".uc-user-star-ratings").rateYo()})})}}),jQuery(document).ready(function(s){UltraComm.Group=new function(){var n=s('<i class="fa fa-cog fa-spin"></i>'),r=s('<i class="fa fa-check"></i>').css("color","#3c763d");this.redirectToManageGroup=function(e){e.preventDefault();var t=s(e.currentTarget);t.data("actionTargetUrl").length&&(window.location.href=t.data("actionTargetUrl"))},this.userJoinGroup=function(e){e.preventDefault();var t=s(e.currentTarget),i=t.data("actionTargetId");UltraComm.Utils.isInteger(i)&&(t.find("svg, i.fa").remove(),t.prepend(n),t.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("userJoinGroup",{groupId:i}).always(function(e){e.success&&(n.remove(),t.prepend(r.clone()),e.data&&e.data.message&&t.find("span").html(e.data.message))}))},this.userLeaveGroup=function(e){e.preventDefault();var t=s(e.currentTarget),i=t.data("actionTargetId");UltraComm.Utils.isInteger(i)&&(t.find("svg, i.fa").remove(),t.prepend(n),t.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("userLeaveGroup",{groupId:i}).always(function(e){e.success&&(n.remove(),t.prepend(r.clone()),e.data&&e.data.message&&t.find("span").html(e.data.message))}))},this.manageMembershipRequest=function(e,t){e.preventDefault();var i=s(e.currentTarget),o=i.data("actionTargetId");UltraComm.Utils.isInteger(o)&&(i.find("svg, i.fa").remove(),i.prepend(n),i.on("click",function(){return!1}),"acceptJoinRequest"!=t&&"declineJoinRequest"!=t||i.closest("ul.uc-member-actions").find("button").each(function(){s(this).is(i)||s(this).parent().hide(1,function(){s(this).remove()})}),UltraComm.Request.ajaxPostRequest("changeGroupUserStatus",{userId:o,status:t}).always(function(e){e.success&&(n.remove(),i.prepend(r.clone()),e.data&&e.data.message&&i.find("span").html(e.data.message))}))},this.changeUserStatus=function(e,t){e.preventDefault();var i=s(e.currentTarget),o=i.data("actionTargetId");UltraComm.Utils.isInteger(o)&&(i.find("svg, i.fa").remove(),i.prepend(n),i.on("click",function(){return!1}),UltraComm.Request.ajaxPostRequest("changeGroupUserStatus",{userId:o,status:t}).always(function(e){e.success&&(n.remove(),i.prepend(r.clone().css({color:"#fff"})))}))}}}),jQuery(document).ready(function(n){var r=null,e=n(".uc-payment-method-holder");e.length&&(e.find("input[name=uc-payment-method]").on("change",function(){n(".uc-registration-payment-info-holder").toggle("paypal-standard"!==n(this).val()),r=n(this).val()}),e.find("input[name=uc-payment-method]:checked").trigger("change"));var s=function(t){UltraComm.Request.ajaxPostRequest("userRegistration",t.serialize()).always(function(e){t.one("submit",a),t.find(".uc-ajax-loader").hide(),e.success?(t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-success">'+e.data.message+"</p>"),e.data.redirectUrl&&setTimeout(function(){window.location.href=e.data.redirectUrl},3e3)):t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-error">'+e.data.message+"</p>")})},a=function(e){e.preventDefault();var t=n(this);t.off("submit"),t.find(".uc-ajax-loader").show();var i=t.find("p.uc-notice");if(i.length&&i.remove(),"stripe"!==r)s(t);else{if(!UltraComm.Utils.isGlobalVariableDefined("stripeObject"))return t.find(".uc-ajax-loader").hide(),t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-error">Cannot process your payment at this time</p>'),void t.one("submit",a);var o={name:t.find("#uc-cc-name").val()};stripeObject.createToken(cardNumberElement,o).then(function(e){if(n("#uc-StripeToken").remove(),e.error)return t.find(".uc-ajax-loader").hide(),t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-error">'+e.error.message+"</p>"),void t.one("submit",a);e.token&&(n("<input>").attr({type:"hidden",id:"uc-StripeToken",name:"uc-StripeToken",value:e.token.id}).appendTo(t),s(t))})}};n(".uc-register-form").off("submit").one("submit",a)}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var t=o(this);t.off("submit"),t.find(".uc-ajax-loader").show();var i=t.find("p.uc-notice");i.length&&i.remove(),UltraComm.Request.ajaxPostRequest("userForgotPassword",o(this).serialize()).always(function(e){t.one("submit",n),t.find(".uc-ajax-loader").hide(),e.success?t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-success">'+e.data.message+"</p>"):t.find(".uc-notice-holder").append('<p class="uc-notice uc-notice-error">'+e.data.message+"</p>")})};o(".uc-forgot-pass-form").off("submit").one("submit",n)}),jQuery(document).ready(function(o){o(".uc-mobile-menu-button").off("click").on("click",function(e){e.preventDefault(),o(this).toggleClass("is-active"),o(this).hasClass("is-active")?o("div.uc-main-menu-holder").slideDown():o("div.uc-main-menu-holder").slideUp()}),o(".uc-navbar-settings-arrow").off("click").on("click",function(e){e.preventDefault(),o(this).toggleClass("is-active"),o(".uc-navbar-settings-menu-holder").slideToggle(150)}),o(document).click(function(e){var t=o(e.target);if(!t.is(".uc-mobile-menu-button")&&!t.parents().is(".uc-mobile-menu-button")){var i=o(".uc-mobile-menu-button");i.hasClass("is-active")&&(i.removeClass("is-active"),o("div.uc-main-menu-holder").hide())}t.is(".uc-navbar-settings-arrow")||t.is(".uc-navbar-settings-arrow i")||(o(".uc-navbar-settings-menu-holder").slideUp(),o(".uc-navbar-settings-arrow").removeClass("is-active"))})}),function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.commonJsStrict={})}(this,function(e){function t(e){if(e in d)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=n.length;i--;)if((e=n[i]+t)in d)return e}function p(e,t){for(var i in e=e||{},t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=e[i]||{},p(e[i],t[i])):e[i]=t[i];return e}function h(e){return p({},e)}function y(e){if("createEvent"in document){var t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")}function b(e,t,i){if("string"==typeof t){var o=t;(t={})[o]=i}for(var n in t)e.style[n]=t[n]}function g(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function a(e,t){for(var i in t)e.setAttribute(i,t[i])}function f(e){return parseInt(e,10)}function m(e,t){var i=e.naturalWidth,o=e.naturalHeight,n=t||v(e);if(n&&5<=n){var r=i;i=o,o=r}return{width:i,height:o}}function v(e){return e.exifdata?e.exifdata.Orientation:1}function w(e,t,i){var o=t.width,n=t.height,r=e.getContext("2d");switch(e.width=t.width,e.height=t.height,r.save(),i){case 2:r.translate(o,0),r.scale(-1,1);break;case 3:r.translate(o,n),r.rotate(180*Math.PI/180);break;case 4:r.translate(0,n),r.scale(1,-1);break;case 5:e.width=n,e.height=o,r.rotate(90*Math.PI/180),r.scale(1,-1);break;case 6:e.width=n,e.height=o,r.rotate(90*Math.PI/180),r.translate(0,-n);break;case 7:e.width=n,e.height=o,r.rotate(-90*Math.PI/180),r.translate(-o,n),r.scale(1,-1);break;case 8:e.width=n,e.height=o,r.translate(0,o),r.rotate(-90*Math.PI/180)}r.drawImage(t,0,0,o,n),r.restore()}function r(){var e,t,i,o,n,r=this,s=r.options.viewport.type?"cr-vp-"+r.options.viewport.type:null;r.options.useCanvas=r.options.enableOrientation||x.call(r),r.data={},r.elements={},e=r.elements.boundary=document.createElement("div"),t=r.elements.viewport=document.createElement("div"),r.elements.img=document.createElement("img"),i=r.elements.overlay=document.createElement("div"),r.options.useCanvas?(r.elements.canvas=document.createElement("canvas"),r.elements.preview=r.elements.canvas):r.elements.preview=r.elements.img,g(e,"cr-boundary"),e.setAttribute("aria-dropeffect","none"),o=r.options.boundary.width,n=r.options.boundary.height,b(e,{width:o+(isNaN(o)?"":"px"),height:n+(isNaN(n)?"":"px")}),g(t,"cr-viewport"),s&&g(t,s),b(t,{width:r.options.viewport.width+"px",height:r.options.viewport.height+"px"}),t.setAttribute("tabindex",0),g(r.elements.preview,"cr-image"),a(r.elements.preview,{alt:"preview","aria-grabbed":"false"}),g(i,"cr-overlay"),r.element.appendChild(e),e.appendChild(r.elements.preview),e.appendChild(t),e.appendChild(i),g(r.element,"croppie-container"),r.options.customClass&&g(r.element,r.options.customClass),function(){function d(e,t){var i=v.elements.preview.getBoundingClientRect(),o=g.y+t,n=g.x+e;v.options.enforceBoundary?(m.top>i.top+t&&m.bottom<i.bottom+t&&(g.y=o),m.left>i.left+e&&m.right<i.right+e&&(g.x=n)):(g.y=o,g.x=n)}function i(e){v.elements.preview.setAttribute("aria-grabbed",e),v.elements.boundary.setAttribute("aria-dropeffect",e?"move":"none")}function e(e){if((void 0===e.button||0===e.button)&&(e.preventDefault(),!r)){if(r=!0,p=e.pageX,h=e.pageY,e.touches){var t=e.touches[0];p=t.pageX,h=t.pageY}i(r),g=z.parse(v.elements.preview),window.addEventListener("mousemove",o),window.addEventListener("touchmove",o),window.addEventListener("mouseup",n),window.addEventListener("touchend",n),document.body.style[P]="none",m=v.elements.viewport.getBoundingClientRect()}}function o(e){e.preventDefault();var t=e.pageX,i=e.pageY;if(e.touches){var o=e.touches[0];t=o.pageX,i=o.pageY}var n=t-p,r=i-h,s={};if("touchmove"===e.type&&1<e.touches.length){var a=e.touches[0],l=e.touches[1],c=Math.sqrt((a.pageX-l.pageX)*(a.pageX-l.pageX)+(a.pageY-l.pageY)*(a.pageY-l.pageY));f||(f=c/v._currentZoom);var u=c/f;return C.call(v,u),void y(v.elements.zoomer)}d(n,r),s[$]=g.toString(),b(v.elements.preview,s),S.call(v),h=i,p=t}function n(){i(r=!1),window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),document.body.style[P]="",_.call(v),k.call(v),f=0}var p,h,f,m,g,v=this,r=!1;v.elements.overlay.addEventListener("mousedown",e),v.elements.viewport.addEventListener("keydown",function(e){var t=37,i=38,o=39,n=40;if(!e.shiftKey||e.keyCode!==i&&e.keyCode!==n){if(v.options.enableKeyMovement&&37<=e.keyCode&&e.keyCode<=40){e.preventDefault();var r=function(e){switch(e){case t:return[1,0];case i:return[0,1];case o:return[-1,0];case n:return[0,-1]}}(e.keyCode);g=z.parse(v.elements.preview),document.body.style[P]="none",m=v.elements.viewport.getBoundingClientRect(),l=(a=r)[0],c=a[1],u={},d(l,c),u[$]=g.toString(),b(v.elements.preview,u),S.call(v),document.body.style[P]="",_.call(v),k.call(v),f=0}}else{var s=0;s=e.keyCode===i?parseFloat(v.elements.zoomer.value,10)+parseFloat(v.elements.zoomer.step,10):parseFloat(v.elements.zoomer.value,10)-parseFloat(v.elements.zoomer.step,10),v.setZoom(s)}var a,l,c,u}),v.elements.overlay.addEventListener("touchstart",e)}.call(this),r.options.enableZoom&&function(){function o(){l.call(n,{value:parseFloat(i.value),origin:new R(n.elements.preview),viewportRect:n.elements.viewport.getBoundingClientRect(),transform:z.parse(n.elements.preview)})}function e(e){var t,i;if("ctrl"===n.options.mouseWheelZoom&&!0!==e.ctrlKey)return 0;t=e.wheelDelta?e.wheelDelta/1200:e.deltaY?e.deltaY/1060:e.detail?e.detail/-60:0,i=n._currentZoom+t*n._currentZoom,e.preventDefault(),C.call(n,i),o.call(n)}var n=this,t=n.elements.zoomerWrap=document.createElement("div"),i=n.elements.zoomer=document.createElement("input");g(t,"cr-slider-wrap"),g(i,"cr-slider"),i.type="range",i.step="0.0001",i.value=1,i.style.display=n.options.showZoomer?"":"none",i.setAttribute("aria-label","zoom"),n.element.appendChild(t),t.appendChild(i),n._currentZoom=1,n.elements.zoomer.addEventListener("input",o),n.elements.zoomer.addEventListener("change",o),n.options.mouseWheelZoom&&(n.elements.boundary.addEventListener("mousewheel",e),n.elements.boundary.addEventListener("DOMMouseScroll",e))}.call(r),r.options.enableResize&&function(){function e(e){if((void 0===e.button||0===e.button)&&(e.preventDefault(),!r)){var t=h.elements.overlay.getBoundingClientRect();if(r=!0,c=e.pageX,u=e.pageY,l=-1!==e.currentTarget.className.indexOf("vertical")?"v":"h",d=t.width,p=t.height,e.touches){var i=e.touches[0];c=i.pageX,u=i.pageY}window.addEventListener("mousemove",o),window.addEventListener("touchmove",o),window.addEventListener("mouseup",n),window.addEventListener("touchend",n),document.body.style[P]="none"}}function o(e){var t=e.pageX,i=e.pageY;if(e.preventDefault(),e.touches){var o=e.touches[0];t=o.pageX,i=o.pageY}var n=t-c,r=i-u,s=h.options.viewport.height+r,a=h.options.viewport.width+n;"v"===l&&m<=s&&s<=p?(b(f,{height:s+"px"}),h.options.boundary.height+=r,b(h.elements.boundary,{height:h.options.boundary.height+"px"}),h.options.viewport.height+=r,b(h.elements.viewport,{height:h.options.viewport.height+"px"})):"h"===l&&m<=a&&a<=d&&(b(f,{width:a+"px"}),h.options.boundary.width+=n,b(h.elements.boundary,{width:h.options.boundary.width+"px"}),h.options.viewport.width+=n,b(h.elements.viewport,{width:h.options.viewport.width+"px"})),S.call(h),E.call(h),_.call(h),k.call(h),u=i,c=t}function n(){r=!1,window.removeEventListener("mousemove",o),window.removeEventListener("touchmove",o),window.removeEventListener("mouseup",n),window.removeEventListener("touchend",n),document.body.style[P]=""}var l,c,u,d,p,t,i,h=this,f=document.createElement("div"),r=!1,m=50;g(f,"cr-resizer"),b(f,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(g(t=document.createElement("div"),"cr-resizer-vertical"),f.appendChild(t));this.options.resizeControls.width&&(g(i=document.createElement("div"),"cr-resizer-horisontal"),f.appendChild(i));t&&(t.addEventListener("mousedown",e),t.addEventListener("touchstart",e));i&&(i.addEventListener("mousedown",e),i.addEventListener("touchstart",e));this.elements.boundary.appendChild(f)}.call(r)}function x(){return this.options.enableExif&&window.EXIF}function C(e){if(this.options.enableZoom){var t=this.elements.zoomer,i=j(e,4);t.value=Math.max(t.min,Math.min(t.max,i))}}function l(e){function t(){var e={};e[$]=o.toString(),e[U]=r.toString(),b(i.elements.preview,e)}var i=this,o=e?e.transform:z.parse(i.elements.preview),n=e?e.viewportRect:i.elements.viewport.getBoundingClientRect(),r=e?e.origin:new R(i.elements.preview);if(i._currentZoom=e?e.value:i._currentZoom,o.scale=i._currentZoom,i.elements.zoomer.setAttribute("aria-valuenow",i._currentZoom),t(),i.options.enforceBoundary){var s=function(e){var t=this._currentZoom,i=e.width,o=e.height,n=this.elements.boundary.clientWidth/2,r=this.elements.boundary.clientHeight/2,s=this.elements.preview.getBoundingClientRect(),a=s.width,l=s.height,c=i/2,u=o/2,d=-1*(c/t-n),p=-1*(u/t-r),h=1/t*c,f=1/t*u;return{translate:{maxX:d,minX:d-(a*(1/t)-i*(1/t)),maxY:p,minY:p-(l*(1/t)-o*(1/t))},origin:{maxX:a*(1/t)-h,minX:h,maxY:l*(1/t)-f,minY:f}}}.call(i,n),a=s.translate,l=s.origin;o.x>=a.maxX&&(r.x=l.minX,o.x=a.maxX),o.x<=a.minX&&(r.x=l.maxX,o.x=a.minX),o.y>=a.maxY&&(r.y=l.minY,o.y=a.maxY),o.y<=a.minY&&(r.y=l.maxY,o.y=a.minY)}t(),N.call(i),k.call(i)}function _(){var e=this,t=e._currentZoom,i=e.elements.preview.getBoundingClientRect(),o=e.elements.viewport.getBoundingClientRect(),n=z.parse(e.elements.preview.style[$]),r=new R(e.elements.preview),s=o.top-i.top+o.height/2,a=o.left-i.left+o.width/2,l={},c={};l.y=s/t,l.x=a/t,c.y=(l.y-r.y)*(1-t),c.x=(l.x-r.x)*(1-t),n.x-=c.x,n.y-=c.y;var u={};u[U]=l.x+"px "+l.y+"px",u[$]=n.toString(),b(e.elements.preview,u)}function S(){if(this.elements){var e=this.elements.boundary.getBoundingClientRect(),t=this.elements.preview.getBoundingClientRect();b(this.elements.overlay,{width:t.width+"px",height:t.height+"px",top:t.top-e.top+"px",left:t.left-e.left+"px"})}}function k(){var e,t=this,i=t.get();s.call(t)&&(t.options.update.call(t,i),t.$&&"undefined"==typeof Prototype?t.$(t.element).trigger("update.croppie",i):(window.CustomEvent?e=new CustomEvent("update",{detail:i}):(e=document.createEvent("CustomEvent")).initCustomEvent("update",!0,!0,i),t.element.dispatchEvent(e)))}function s(){return 0<this.elements.preview.offsetHeight&&0<this.elements.preview.offsetWidth}function T(){var e,t=this,i={},o=t.elements.preview,n=new z(0,0,1),r=new R;s.call(t)&&!t.data.bound&&(t.data.bound=!0,i[$]=n.toString(),i[U]=r.toString(),i.opacity=1,b(o,i),e=t.elements.preview.getBoundingClientRect(),t._originalImageWidth=e.width,t._originalImageHeight=e.height,t.data.orientation=v(t.elements.img),t.options.enableZoom?E.call(t,!0):t._currentZoom=1,n.scale=t._currentZoom,i[$]=n.toString(),b(o,i),t.data.points.length?function(e){if(4!==e.length)throw"Croppie - Invalid number of points supplied: "+e;var t=this,i=e[2]-e[0],o=t.elements.viewport.getBoundingClientRect(),n=t.elements.boundary.getBoundingClientRect(),r={left:o.left-n.left,top:o.top-n.top},s=o.width/i,a=e[1],l=e[0],c=-1*e[1]+r.top,u=-1*e[0]+r.left,d={};d[U]=l+"px "+a+"px",d[$]=new z(u,c,s).toString(),b(t.elements.preview,d),C.call(t,s),t._currentZoom=s}.call(t,t.data.points):function(){var e=this,t=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),o=e.elements.boundary.getBoundingClientRect(),n=i.left-o.left,r=i.top-o.top,s=n-(t.width-i.width)/2,a=r-(t.height-i.height)/2,l=new z(s,a,e._currentZoom);b(e.elements.preview,$,l.toString())}.call(t),_.call(t),S.call(t))}function E(e){var t,i,o,n,r=this,s=0,a=r.options.maxZoom||1.5,l=r.elements.zoomer,c=parseFloat(l.value),u=r.elements.boundary.getBoundingClientRect(),d=m(r.elements.img,r.data.orientation),p=r.elements.viewport.getBoundingClientRect();r.options.enforceBoundary&&(o=p.width/d.width,n=p.height/d.height,s=Math.max(o,n)),a<=s&&(a=s+1),l.min=j(s,4),l.max=j(a,4),!e&&(c<l.min||c>l.max)?C.call(r,c<l.min?l.min:l.max):e&&(i=Math.max(u.width/d.width,u.height/d.height),t=null!==r.data.boundZoom?r.data.boundZoom:i,C.call(r,t)),y(l)}function I(e){var t=e.points,i=f(t[0]),o=f(t[1]),n=f(t[2])-i,r=f(t[3])-o,s=e.circle,a=document.createElement("canvas"),l=a.getContext("2d"),c=e.outputWidth||n,u=e.outputHeight||r;e.outputWidth&&e.outputHeight;return a.width=c,a.height=u,e.backgroundColor&&(l.fillStyle=e.backgroundColor,l.fillRect(0,0,c,u)),!1!==this.options.enforceBoundary&&(n=Math.min(n,this._originalImageWidth),r=Math.min(r,this._originalImageHeight)),l.drawImage(this.elements.preview,i,o,n,r,0,0,c,u),s&&(l.fillStyle="#fff",l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(a.width/2,a.height/2,a.width/2,0,2*Math.PI,!0),l.closePath(),l.fill()),a}function c(u,d){var e,i,o,n,p=this,h=[],t=null,r=x.call(p);if("string"==typeof u)e=u,u={};else if(Array.isArray(u))h=u.slice();else{if(void 0===u&&p.data.url)return T.call(p),k.call(p),null;e=u.url,h=u.points||[],t=void 0===u.zoom?null:u.zoom}return p.data.bound=!1,p.data.url=e||p.data.url,p.data.boundZoom=t,(i=e,o=r,n=new Image,n.style.opacity=0,new Promise(function(e){function t(){n.style.opacity=1,setTimeout(function(){e(n)},1)}n.removeAttribute("crossOrigin"),i.match(/^https?:\/\/|^\/\//)&&n.setAttribute("crossOrigin","anonymous"),n.onload=function(){o?EXIF.getData(n,function(){t()}):t()},n.src=i})).then(function(e){if(function(t){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(e){t.classList.add(e)}),this.elements.img.parentNode.replaceChild(t,this.elements.img),this.elements.preview=t),this.elements.img=t}.call(p,e),h.length)p.options.relative&&(h=[h[0]*e.naturalWidth/100,h[1]*e.naturalHeight/100,h[2]*e.naturalWidth/100,h[3]*e.naturalHeight/100]);else{var t,i,o=m(e),n=p.elements.viewport.getBoundingClientRect(),r=n.width/n.height;r<o.width/o.height?t=(i=o.height)*r:(t=o.width,i=o.height/r);var s=(o.width-t)/2,a=(o.height-i)/2,l=s+t,c=a+i;p.data.points=[s,a,l,c]}p.data.points=h.map(function(e){return parseFloat(e)}),p.options.useCanvas&&function(e){var t=this.elements.canvas,i=this.elements.img,o=t.getContext("2d"),n=x.call(this);e=this.options.enableOrientation&&e,o.clearRect(0,0,t.width,t.height),t.width=i.width,t.height=i.height,n&&!e?w(t,i,f(v(i)||0)):e&&w(t,i,e)}.call(p,u.orientation||1),T.call(p),k.call(p),d&&d()}).catch(function(e){console.error("Croppie:"+e)})}function j(e,t){return parseFloat(e).toFixed(t||0)}function q(){var e=this,t=e.elements.preview.getBoundingClientRect(),i=e.elements.viewport.getBoundingClientRect(),o=i.left-t.left,n=i.top-t.top,r=(i.width-e.elements.viewport.offsetWidth)/2,s=(i.height-e.elements.viewport.offsetHeight)/2,a=o+e.elements.viewport.offsetWidth+r,l=n+e.elements.viewport.offsetHeight+s,c=e._currentZoom;(c===1/0||isNaN(c))&&(c=1);var u=e.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return o=Math.max(u,o/c),n=Math.max(u,n/c),a=Math.max(u,a/c),l=Math.max(u,l/c),{points:[j(o),j(n),j(a),j(l)],zoom:c,orientation:e.data.orientation}}function i(e){var i=this,o=q.call(i),t=p(h(B),h(e)),n="string"==typeof e?e:t.type||"base64",r=t.size||"viewport",s=t.format,a=t.quality,l=t.backgroundColor,c="boolean"==typeof t.circle?t.circle:"circle"===i.options.viewport.type,u=i.elements.viewport.getBoundingClientRect(),d=u.width/u.height;return"viewport"===r?(o.outputWidth=u.width,o.outputHeight=u.height):"object"==typeof r&&(r.width&&r.height?(o.outputWidth=r.width,o.outputHeight=r.height):r.width?(o.outputWidth=r.width,o.outputHeight=r.width/d):r.height&&(o.outputWidth=r.height*d,o.outputHeight=r.height)),-1<W.indexOf(s)&&(o.format="image/"+s,o.quality=a),o.circle=c,o.url=i.data.url,o.backgroundColor=l,new Promise(function(e,t){switch(n.toLowerCase()){case"rawcanvas":e(I.call(i,o));break;case"canvas":case"base64":e(function(e){return I.call(this,e).toDataURL(e.format,e.quality)}.call(i,o));break;case"blob":(function(i){var o=this;return new Promise(function(t,e){I.call(o,i).toBlob(function(e){t(e)},i.format,i.quality)})}).call(i,o).then(e);break;default:e(function(e){var t=e.points,i=document.createElement("div"),o=document.createElement("img"),n=t[2]-t[0],r=t[3]-t[1];return g(i,"croppie-result"),i.appendChild(o),b(o,{left:-1*t[0]+"px",top:-1*t[1]+"px"}),o.src=e.url,b(i,{width:n+"px",height:r+"px"}),i}.call(i,o))}})}function o(e){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var t,i,o,n,r,s=this,a=s.elements.canvas;s.data.orientation=(t=s.data.orientation,i=e,o=-1<F.indexOf(t)?F:D,n=o.indexOf(t),r=i/90%o.length,o[(o.length+n+r%o.length)%o.length]),w(a,s.elements.img,s.data.orientation),E.call(s),l.call(s),copy=null}function u(e,t){if(-1<e.className.indexOf("croppie-container"))throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=e,this.options=p(h(u.defaults),t),"img"===this.element.tagName.toLowerCase()){var i=this.element;g(i,"cr-original-image"),a(i,{"aria-hidden":"true",alt:""});var o=document.createElement("div");this.element.parentNode.appendChild(o),o.appendChild(i),this.element=o,this.options.url=this.options.url||i.src}if(r.call(this),this.options.url){var n={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,c.call(this,n)}}"function"!=typeof Promise&&function(e){function i(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(e,i(o,this),i(n,this))}function s(i){var o=this;return null===this._state?void this._deferreds.push(i):void c(function(){var e=o._state?i.onFulfilled:i.onRejected;if(null!==e){var t;try{t=e(o._value)}catch(e){return void i.reject(e)}i.resolve(t)}else(o._state?i.resolve:i.reject)(o._value)})}function o(e){try{if(e===this)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var t=e.then;if("function"==typeof t)return void l(i(t,e),i(o,this),i(n,this))}this._state=!0,this._value=e,a.call(this)}catch(e){n.call(this,e)}}function n(e){this._state=!1,this._value=e,a.call(this)}function a(){for(var e=0,t=this._deferreds.length;e<t;e++)s.call(this,this._deferreds[e]);this._deferreds=null}function l(e,t,i){var o=!1;try{e(function(e){o||(o=!0,t(e))},function(e){o||(o=!0,i(e))})}catch(e){if(o)return;o=!0,i(e)}}var t=setTimeout,c="function"==typeof setImmediate&&setImmediate||function(e){t(e,1)},u=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(i,o){var n=this;return new r(function(e,t){s.call(n,new function(e,t,i,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=i,this.reject=o}(i,o,e,t))})},r.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new r(function(o,n){function r(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void i.call(e,function(e){r(t,e)},n)}a[t]=e,0==--s&&o(a)}catch(e){n(e)}}if(0===a.length)return o([]);for(var s=a.length,e=0;e<a.length;e++)r(e,a[e])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(i){return new r(function(e,t){t(i)})},r.race=function(n){return new r(function(e,t){for(var i=0,o=n.length;i<o;i++)n[i].then(e,t)})},r._setImmediateFn=function(e){c=e},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),"function"!=typeof window.CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}(),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,i){for(var o=atob(this.toDataURL(t,i).split(",")[1]),n=o.length,r=new Uint8Array(n),s=0;s<n;s++)r[s]=o.charCodeAt(s);e(new Blob([r],{type:t||"image/png"}))}});var U,$,P,n=["Webkit","Moz","ms"],d=document.createElement("div").style,F=[1,8,3,6],D=[2,7,4,5];$=t("transform"),U=t("transformOrigin"),P=t("userSelect");var A={translate3d:{suffix:", 0px"},translate:{suffix:""}},z=function(e,t,i){this.x=parseFloat(e),this.y=parseFloat(t),this.scale=parseFloat(i)};z.parse=function(e){return e.style?z.parse(e.style[$]):-1<e.indexOf("matrix")||-1<e.indexOf("none")?z.fromMatrix(e):z.fromString(e)},z.fromMatrix=function(e){var t=e.substring(7).split(",");return t.length&&"none"!==e||(t=[1,0,0,1,0,0]),new z(f(t[4]),f(t[5]),parseFloat(t[0]))},z.fromString=function(e){var t=e.split(") "),i=t[0].substring(u.globals.translate.length+1).split(","),o=1<t.length?t[1].substring(6):1,n=1<i.length?i[0]:0,r=1<i.length?i[1]:0;return new z(n,r,o)},z.prototype.toString=function(){var e=A[u.globals.translate].suffix||"";return u.globals.translate+"("+this.x+"px, "+this.y+"px"+e+") scale("+this.scale+")"};var R=function(e){if(!e||!e.style[U])return this.x=0,void(this.y=0);var t=e.style[U].split(" ");this.x=parseFloat(t[0]),this.y=parseFloat(t[1])};R.prototype.toString=function(){return this.x+"px "+this.y+"px"};var O,L,H,M,N=(O=S,L=500,function(){var e=this,t=arguments,i=H&&!M;clearTimeout(M),M=setTimeout(function(){M=null,H||O.apply(e,t)},L),i&&O.apply(e,t)}),B={type:"canvas",format:"png",quality:1},W=["jpeg","webp","png"];if(window.jQuery){var G=window.jQuery;G.fn.croppie=function(i){if("string"===typeof i){var o=Array.prototype.slice.call(arguments,1),e=G(this).data("croppie");return"get"===i?e.get():"result"===i?e.result.apply(e,o):"bind"===i?e.bind.apply(e,o):this.each(function(){var e=G(this).data("croppie");if(e){var t=e[i];if(!G.isFunction(t))throw"Croppie "+i+" method not found";t.apply(e,o),"destroy"===i&&G(this).removeData("croppie")}})}return this.each(function(){var e=new u(this,i);(e.$=G)(this).data("croppie",e)})}}u.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},u.globals={translate:"translate3d"},p(u.prototype,{bind:function(e,t){return c.call(this,e,t)},get:function(){var e=q.call(this),t=e.points;return this.options.relative&&(t[0]/=this.elements.img.naturalWidth/100,t[1]/=this.elements.img.naturalHeight/100,t[2]/=this.elements.img.naturalWidth/100,t[3]/=this.elements.img.naturalHeight/100),e},result:function(e){return i.call(this,e)},refresh:function(){return function(){T.call(this)}.call(this)},setZoom:function(e){C.call(this,e),y(this.elements.zoomer)},rotate:function(e){o.call(this,e)},destroy:function(){return function(){var e,t,i=this;i.element.removeChild(i.elements.boundary),e=i.element,t="croppie-container",e.classList?e.classList.remove(t):e.className=e.className.replace(t,""),i.options.enableZoom&&i.element.removeChild(i.elements.zoomerWrap),delete i.elements}.call(this)}}),e.Croppie=window.Croppie=u}),jQuery(document).ready(function(e){e(".uc-settings-sidebar dl").each(function(){var t=e(this);t.find("dt .uc-arrow-holder").off("click").on("click",function(){var e=t.hasClass("uc-section-expanded");t.toggleClass("uc-section-expanded",!e),t.find("dd").css("display",e?"block":"none"),t.find("dd").slideToggle("slow")})})}),jQuery(document).ready(function(o){var e=o("#uc-cover-picture-holder"),t=e.length?e.closest(".uc-grid-cell").width():0,i=e.length?e.croppie({viewport:{width:t,height:Math.round(310*t/1400),type:"square"},boundary:{width:t,height:Math.round(310*t/1400)}}):null;o("#btnChangeCover").on("change",function(){!function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){o(".uc-picture-holder-wrap").removeClass("uc-hidden"),i.croppie("bind",{url:e.target.result}).then(function(){})},t.readAsDataURL(e.files[0])}}(this)}),o("#btnSaveCoverPicture").on("click",function(e){e.preventDefault(),i.croppie("result",{type:"blob",size:{width:1400,height:310},format:"png"}).then(function(e){var t=new FormData;t.append("coverPicture",e,"tmp-picture.png"),t.append("action","saveUserProfileCover"),t.append("ajaxRequestNonce",UltraComm.ajaxRequestNonce),t.append("profiledUserSlug",UltraComm.profiledUserSlug);var i=o(".uc-user-settings-profile-cover-section .uc-panel-footer").find("p.uc-notice");i.length&&i.remove(),o.ajax({url:UltraComm.ajaxUrl,type:"POST",data:t,processData:!1,contentType:!1}).always(function(e){if(e.success){var t=new Image;t.src=e.data.coverUrl;var i=setInterval(function(){t.complete&&(clearInterval(i),o(".uc-user-settings-profile-cover-section .uc-user-cover-holder, .uch-header .uc-header-holder").css("background-image","url("+t.src+")"),e.data.message&&o(".uc-user-settings-profile-cover-section .uc-panel-footer").append('<p class="uc-notice uc-notice-success">'+e.data.message+"</p>"))},10)}else e.data.message&&o(".uc-user-settings-profile-cover-section .uc-panel-footer").append('<p class="uc-notice uc-notice-error">'+e.data.message+"</p>")})})})}),jQuery(document).ready(function(o){var i=o("#uc-picture-holder").length?o("#uc-picture-holder").croppie({viewport:{width:200,height:200,type:"square"}}):null;o("#btnChangeAvatar").on("change",function(){!function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){o(".uc-picture-holder-wrap").removeClass("uc-hidden"),i.croppie("bind",{url:e.target.result}).then(function(){})},t.readAsDataURL(e.files[0])}}(this)}),o("#btnSaveProfilePicture").on("click",function(e){e.preventDefault(),i.croppie("result",{type:"blob",size:"viewport"}).then(function(e){var t=new FormData;t.append("profilePicture",e,"tmp-picture.png"),t.append("action","saveUserProfilePicture"),t.append("ajaxRequestNonce",UltraComm.ajaxRequestNonce),t.append("profiledUserSlug",UltraComm.profiledUserSlug);var i=o(".uc-user-settings-profile-picture-section .uc-panel-footer").find("p.uc-notice");i.length&&i.remove(),o.ajax({url:UltraComm.ajaxUrl,type:"POST",data:t,processData:!1,contentType:!1}).always(function(e){e.success?(o(".uc-settings-sidebar-avatar-holder , .uc-user-settings-profile-picture-section .uc-user-avatar-holder").css("background-image","url("+e.data.avatarUrl+")"),e.data.message&&o(".uc-user-settings-profile-picture-section .uc-panel-footer").append('<p class="uc-notice uc-notice-success">'+e.data.message+"</p>")):e.data.message&&o(".uc-user-settings-profile-picture-section .uc-panel-footer").append('<p class="uc-notice uc-notice-error">'+e.data.message+"</p>")})})})}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var i=o(this),t=i.find("p.uc-notice");t.length&&t.remove(),i.off("submit"),i.find("div.uc-ajax-loader").toggleClass("uc-hidden",!1),UltraComm.Request.ajaxPostRequest("updateUserProfile",i.serialize()).always(function(e){i.one("submit",n),i.find("div.uc-ajax-loader").toggleClass("uc-hidden",!0);var t=e.success?"success":"error";i.find(".uc-notice-holder").html(o('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").delay(1500).fadeOut("slow",function(){o(this).remove()})})};o(".uc-user-settings-profile-form-section form.uc-form").off("submit").one("submit",n)}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var i=o(this);i.off("submit"),i.find(".uc-ajax-loader").show();var t=i.find("p.uc-notice");t.length&&t.remove(),UltraComm.Request.ajaxPostRequest({action:"updateUserAccountPrivacy"},i.serialize()).always(function(e){i.find("div.uc-ajax-loader").hide(),i.one("submit",n);var t=e.success?"success":"error";i.find(".uc-notice-holder").html(o('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").fadeIn("slow"),"error"!==t&&i.find(".uc-notice-holder").find(".uc-notice").delay(2500).fadeOut("slow",function(){o(this).remove()})})};o("#uc-user-settings-account-privacy-form").off("submit").one("submit",n)}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var i=o(this);i.off("submit"),i.find(".uc-ajax-loader").show();var t=i.find("p.uc-notice");t.length&&t.remove(),UltraComm.Request.ajaxPostRequest({action:"updateUserPassword"},i.serialize()).always(function(e){i.find("div.uc-ajax-loader").hide(),i.one("submit",n);var t=e.success?"success":"error";i.find(".uc-notice-holder").html(o('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").fadeIn("slow"),"error"!==t&&i.find(".uc-notice-holder").find(".uc-notice").delay(2500).fadeOut("slow",function(){o(this).remove()})})};o("#uc-user-settings-account-change-password-form").off("submit").one("submit",n)}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var i=o(this);i.off("submit"),i.find(".uc-ajax-loader").show();var t=i.find(".uc-notice-holder p.uc-notice");t.length&&t.remove(),UltraComm.Request.ajaxPostRequest("deleteUserAccount",i.serialize()).always(function(e){i.find("div.uc-ajax-loader").hide(),i.one("submit",n);var t=e.success?"success":"error";i.find(".uc-notice-holder").html(o('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").fadeIn("slow"),"error"!==t&&i.find(".uc-notice-holder").find(".uc-notice").delay(2500).fadeOut("slow",function(){o(this).remove(),e.data.redirectUrl&&(window.location.href=e.data.redirectUrl)})})};o("#uc-user-settings-account-delete-form").off("submit").one("submit",n)}),jQuery(document).ready(function(a){var s;(function s(){var e=a("#uc-user-settings-post-submission-form");e.off("submit"),e.find(".uc-form-footer button").prop("disabled",!1),e.find(".uc-form-footer button").off("click").on("click",function(e){var i=UltraComm.Utils.getAjaxLoaderElement(),t=a(this),o=t.closest("form"),n=o.find(".uc-notice-holder");e.preventDefault(),t.prop("disabled",!0),n.html(""),n.append(i),i.show(0);var r="btnSaveDraft"===t.attr("id")?"draft":null;"function"==typeof tinyMCE.triggerSave&&tinyMCE.triggerSave(),UltraComm.Request.ajaxPostRequest({action:"saveUserPostSubmission","uc-PostStatus":r},o.serialize()).always(function(e){i.remove();var t=e.success?"success":"error";e.success&&e.data.postId&&(a("#uc-PostId").val(e.data.postId),a("#uc-PostFeaturedImageKey").val(e.data.thumbId)),n.html(a('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").fadeIn("slow"),"error"!==t&&n.find(".uc-notice").delay(2500).fadeOut("slow",function(){a(this).remove(),e.data.redirectUrl&&(window.location.href=e.data.redirectUrl)}),s()})})}(),a(".uc-user-settings-page-content .uc-user-posts-section li.uc-user-submission-action-delete a[data-target-id]").off("click").on("click",function(e){e.preventDefault();var t=a(this),i=t.data("targetId");UltraComm.Utils.isInteger(i)&&UltraComm.Request.ajaxPostRequest("deleteUserPostSubmission",{userSubmissionId:i}).always(function(e){e.success&&t.closest(".uc-user-post-holder").slideUp()})}),"function"==typeof wp.media)&&a("#btnFeaturedImage").on("click",function(e){e.preventDefault();var r=a(this).closest("label");s||(s=wp.media.frames.file_frame=wp.media({title:a(this).data("uploader_title"),button:{text:a(this).data("uploader_button_text")},multiple:!1})).on("select",function(){var e=s.state().get("selection").first().toJSON(),t=new Image;t.src=e.url;var i=UltraComm.Utils.getAjaxLoaderElement(),o=a("#uc-user-settings-post-submission-form .uc-post-featured-image-holder");o.html(" ").css({"background-image":"none"}),o.append(i);var n=setInterval(function(){t.complete&&(clearInterval(n),i.remove(),r.length&&r.find("span").text(r.data("changeImageText")),o.css({height:180,"background-image":"url("+e.url+")"}))},10);a("#uc-PostFeaturedImageKey").val(e.id)}),s.open()});a("#btnFeaturedImage").length&&a("#btnFeaturedImage").fileupload({url:UltraComm.ajaxUrl,dataType:"json",autoUpload:!0,maxFileSize:9999e3,singleFileUploads:!0}).on("fileuploadadd",function(e,t){t.acceptFileTypes=/^image\/.*$/}).on("fileuploadprocessalways",function(e,t){t.files[t.index].error&&(t.form.find(".uc-notice-holder").html(a('<p class = "uc-notice uc-notice-error" />').text(t.files[t.index].error)),t.form.find(".uc-notice").delay("2000").slideUp("slow",function(){a(this).remove()}))}).on("fileuploadsubmit",function(e,t){t.form.find(".uc-notice-holder").html("");var i=a("#uc-user-settings-post-submission-form .uc-post-featured-image-holder").append(UltraComm.Utils.getAjaxLoaderElement());t.context={fileHolderElement:i},t.formData=UltraComm.Request.getAjaxRequestData(),t.formData.action="uploadTemporaryFile"}).on("fileuploaddone",function(e,i){a.each(i.result.files,function(e,t){if(i.context.fileHolderElement.find("div.uc-ajax-loader").remove(),t.error)return i.form.find(".uc-notice-holder").html(a('<p class = "uc-notice uc-notice-error" />').text(t.error)),void i.form.find(".uc-notice").delay(2e3).slideUp("slow",function(){a(this).remove()});t.url&&i.acceptFileTypes.test("image/")?(i.context.fileHolderElement.css("background-image","url("+t.url+")").html("<b></b>"),a("#uc-PostFeaturedImageKey").val(t.name)):(i.context.fileHolderElement.append('<i class="uc-grid-cell uc-grid-cell--autoSize fa fa-paperclip"></i>'),i.context.fileHolderElement.append('<p class="uc-grid-cell">'+t.name+"</p>"),i.context.fileHolderElement.append('<i class="uc-grid-cell uc-grid-cell--autoSize fa fa-trash uc-activity-delete-file uc-grid-cell--center" data-file-name = "'+t.name+'"></i>'))})}).on("fileuploadprogress",function(e,t){})}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var i=o(this);i.off("submit"),i.find(".uc-ajax-loader").show();var t=i.find("p.uc-notice");t.length&&t.remove(),UltraComm.Request.ajaxPostRequest("saveUserGroup",i.serialize()).always(function(e){i.find("div.uc-ajax-loader").hide(),i.one("submit",n);var t=e.success?"success":"error";i.find(".uc-notice-holder").html(o('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").fadeIn("slow"),"error"!==t&&i.find(".uc-notice-holder").find(".uc-notice").delay(2500).fadeOut("slow",function(){o(this).remove(),e.data.redirectUrl&&(window.location.href=e.data.redirectUrl)})})};o("#uc-user-settings-group-edit-group-form").off("submit").one("submit",n)}),jQuery(document).ready(function(o){var e=o("#uc-group-cover-picture-holder"),t=e.length?e.closest(".uc-grid-cell").width():0,i=e.length?e.croppie({viewport:{width:t,height:Math.round(310*t/1400),type:"square"},boundary:{width:t,height:Math.round(310*t/1400)}}):null;o("#btnChangeGroupCover").on("change",function(){!function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){o(".uc-picture-holder-wrap").removeClass("uc-hidden"),i.croppie("bind",{url:e.target.result}).then(function(){})},t.readAsDataURL(e.files[0])}}(this)}),o("#btnSaveGroupCoverPicture").on("click",function(e){e.preventDefault(),i.croppie("result",{type:"blob",size:{width:1400,height:310},format:"png"}).then(function(e){var t=new FormData;t.append("coverPicture",e,"tmp-picture.png"),t.append("action","saveGroupCoverPicture"),t.append("ajaxRequestNonce",UltraComm.ajaxRequestNonce),t.append("profiledUserSlug",UltraComm.profiledUserSlug),t.append("profiledGroupId",UltraComm.profiledGroupId);var i=o(".uc-user-settings-group-cover-section .uc-panel-footer").find("p.uc-notice");i.length&&i.remove(),o.ajax({url:UltraComm.ajaxUrl,type:"POST",data:t,processData:!1,contentType:!1}).always(function(e){e.success?(o(".uc-user-settings-group-cover-section .uc-user-cover-holder").css("background-image","url("+e.data.coverUrl+")"),e.data.message&&o(".uc-user-settings-group-cover-section .uc-panel-footer").append('<p style="margin: 1em auto; padding:1em;" class="uc-notice uc-notice-success">'+e.data.message+"</p>")):e.data.message&&o(".uc-user-settings-group-cover-section .uc-panel-footer").append('<p style="margin: 1em auto; padding:1em;" class="uc-notice uc-notice-error">'+e.data.message+"</p>")})})})}),jQuery(document).ready(function(o){var i=o("#uc-group-picture-holder").length?o("#uc-group-picture-holder").croppie({viewport:{width:200,height:200,type:"square"}}):null;o("#btnChangeGroupAvatar").on("change",function(){!function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){o(".uc-picture-holder-wrap").removeClass("uc-hidden"),i.croppie("bind",{url:e.target.result}).then(function(){})},t.readAsDataURL(e.files[0])}}(this)}),o("#btnSaveGroupPicture").on("click",function(e){e.preventDefault(),i.croppie("result",{type:"blob",size:"viewport"}).then(function(e){var t=new FormData;t.append("profilePicture",e,"tmp-picture.png"),t.append("action","saveGroupPicture"),t.append("ajaxRequestNonce",UltraComm.ajaxRequestNonce),t.append("profiledUserSlug",UltraComm.profiledUserSlug),t.append("profiledGroupId",UltraComm.profiledGroupId);var i=o(".uc-user-settings-group-picture-section .uc-panel-footer").find("p.uc-notice");i.length&&i.remove(),o.ajax({url:UltraComm.ajaxUrl,type:"POST",data:t,processData:!1,contentType:!1}).always(function(e){e.success?(o(".uc-settings-sidebar-avatar-holder , .uc-user-settings-group-picture-section .uc-user-avatar-holder").css("background-image","url("+e.data.avatarUrl+")"),e.data.message&&o(".uc-user-settings-group-picture-section .uc-panel-footer").append('<p style="margin: 1em auto; padding:1em;" class="uc-notice uc-notice-success">'+e.data.message+"</p>")):e.data.message&&o(".uc-user-settings-group-picture-section .uc-panel-footer").append('<p style="margin: 1em auto;padding:1em;" class="uc-notice uc-notice-error">'+e.data.message+"</p>")})})})}),jQuery(document).ready(function(o){var n=function(e){e.preventDefault();var i=o(this);i.off("submit"),i.find(".uc-ajax-loader").show();var t=i.find(".uc-notice-holder p.uc-notice");t.length&&t.remove(),UltraComm.Request.ajaxPostRequest("deleteUserGroup",i.serialize()).always(function(e){i.find("div.uc-ajax-loader").hide(),i.one("submit",n);var t=e.success?"success":"error";i.find(".uc-notice-holder").html(o('<p class = "uc-notice uc-notice-'+t+'" />').text(e.data.message)).find("p").fadeIn("slow"),"error"!==t&&i.find(".uc-notice-holder").find(".uc-notice").delay(2500).fadeOut("slow",function(){o(this).remove(),e.data.redirectUrl&&(window.location.href=e.data.redirectUrl)})})};o("#uc-user-settings-groups-delete-group").off("submit").one("submit",n)}),jQuery(document).ready(function(n){var o=function(e){e.preventDefault();var i=n(this);i.off("click");var o=i.data("groupId");i.closest(".uc-panel").find("p.uc-notice").remove(),i.find("span").hide(100,function(){n(this).remove();var t={backgroundColor:"#ca3c3c",color:"#fff"};i.css(t),i.find("i").css(t).removeClass("fa-sign-out").addClass("fa-cog fa-spin"),UltraComm.Request.ajaxPostRequest({action:"currentUserLeaveGroup",groupId:o}).always(function(e){e.success?e.success||(t.backgroundColor="#3bab82",i.find("i").css(t).removeClass("fa-cog fa-spin").addClass("fa-check-circle"),i.closest(".uc-panel").delay(1500).slideUp("slow")):e.data.message&&(i.closest(".uc-panel").find(".uc-notice-holder").html(n('<p class = "uc-notice uc-notice-error" />').text(e.data.message)),i.fadeOut())})})};n("[data-uc-action]").each(function(e,t){var i=n(t);switch(i.data("ucAction")){case"userLeaveGroup":i.off("click").one("click",o)}})});